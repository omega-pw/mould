/*! For license information please see rich-text.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.RichText=e():t.RichText=e()}(this,(function(){return function(){var t={8453:function(t,e,n){t.exports=n(4596)},4881:function(t,e,n){t.exports=n(1932)},7323:function(t,e,n){t.exports=n(6908)},2057:function(t,e,n){t.exports=n(3642)},6292:function(t,e,n){t.exports=n(9535)},3695:function(t,e,n){t.exports=n(8991)},389:function(t,e,n){t.exports=n(1392)},6777:function(t,e,n){t.exports=n(575)},5361:function(t,e,n){t.exports=n(3033)},1987:function(t,e,n){t.exports=n(8292)},1076:function(t,e,n){t.exports=n(2602)},8100:function(t,e,n){t.exports=n(8437)},110:function(t,e,n){t.exports=n(7775)},805:function(t,e,n){t.exports=n(5658)},5386:function(t,e,n){t.exports=n(9377)},4508:function(t,e,n){t.exports=n(7495)},1731:function(t,e,n){t.exports=n(6604)},9296:function(t,e,n){t.exports=n(9187)},8978:function(t,e,n){t.exports=n(238)},2531:function(t,e,n){t.exports=n(8017)},1432:function(t,e,n){t.exports=n(8679)},6803:function(t,e,n){t.exports=n(1536)},6162:function(t,e,n){t.exports=n(3962)},4108:function(t,e,n){t.exports=n(9565)},8696:function(t,e,n){"use strict";var r=n(1733);t.exports=r},9373:function(t,e,n){"use strict";n(9991),n(5743);var r=n(1252);t.exports=r.Array.from},2089:function(t,e,n){"use strict";n(3);var r=n(1252);t.exports=r.Array.isArray},833:function(t,e,n){"use strict";n(8071);var r=n(2585);t.exports=r("Array","concat")},9407:function(t,e,n){"use strict";n(4029);var r=n(2585);t.exports=r("Array","filter")},8162:function(t,e,n){"use strict";n(4840);var r=n(2585);t.exports=r("Array","forEach")},8325:function(t,e,n){"use strict";n(6949),n(5954);var r=n(2585);t.exports=r("Array","keys")},8255:function(t,e,n){"use strict";n(5569);var r=n(2585);t.exports=r("Array","reverse")},4739:function(t,e,n){"use strict";n(9189);var r=n(2585);t.exports=r("Array","slice")},6729:function(t,e,n){"use strict";n(6949),n(9991);var r=n(5926);t.exports=r},7571:function(t,e,n){"use strict";var r=n(7638),o=n(833),i=Array.prototype;t.exports=function(t){var e=t.concat;return t===i||r(i,t)&&e===i.concat?o:e}},209:function(t,e,n){"use strict";var r=n(7638),o=n(9407),i=Array.prototype;t.exports=function(t){var e=t.filter;return t===i||r(i,t)&&e===i.filter?o:e}},6205:function(t,e,n){"use strict";var r=n(7638),o=n(8255),i=Array.prototype;t.exports=function(t){var e=t.reverse;return t===i||r(i,t)&&e===i.reverse?o:e}},6945:function(t,e,n){"use strict";var r=n(7638),o=n(4739),i=Array.prototype;t.exports=function(t){var e=t.slice;return t===i||r(i,t)&&e===i.slice?o:e}},9650:function(t,e,n){"use strict";n(6949),n(4994),n(1433),n(5954),n(9991);var r=n(1252);t.exports=r.Map},9643:function(t,e,n){"use strict";n(5631);var r=n(1252).Object;t.exports=function(t,e){return r.create(t,e)}},2828:function(t,e,n){"use strict";n(5264);var r=n(1252).Object,o=t.exports=function(t,e){return r.defineProperties(t,e)};r.defineProperties.sham&&(o.sham=!0)},620:function(t,e,n){"use strict";n(6072);var r=n(1252).Object,o=t.exports=function(t,e,n){return r.defineProperty(t,e,n)};r.defineProperty.sham&&(o.sham=!0)},6534:function(t,e,n){"use strict";n(1130);var r=n(1252).Object,o=t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)};r.getOwnPropertyDescriptor.sham&&(o.sham=!0)},5309:function(t,e,n){"use strict";n(7017);var r=n(1252);t.exports=r.Object.getOwnPropertyDescriptors},5538:function(t,e,n){"use strict";n(8042);var r=n(1252);t.exports=r.Object.getOwnPropertySymbols},9380:function(t,e,n){"use strict";n(1504);var r=n(1252);t.exports=r.Object.getPrototypeOf},3499:function(t,e,n){"use strict";n(1375);var r=n(1252);t.exports=r.Object.keys},9688:function(t,e,n){"use strict";n(7276);var r=n(1252);t.exports=r.Object.setPrototypeOf},7513:function(t,e,n){"use strict";n(2676),n(6949),n(5954),n(9085),n(1964),n(4913),n(5061),n(7680),n(9991);var r=n(1252);t.exports=r.Promise},4116:function(t,e,n){"use strict";n(8071),n(5954),n(8042),n(7755),n(1754),n(8454),n(3119),n(9799),n(6753),n(3407),n(3712),n(8482),n(1810),n(3400),n(1575),n(9236),n(6671),n(5414),n(8570),n(8939);var r=n(1252);t.exports=r.Symbol},4512:function(t,e,n){"use strict";n(6949),n(5954),n(9991),n(9799);var r=n(9510);t.exports=r.f("iterator")},8136:function(t,e,n){"use strict";n(4479),n(1575);var r=n(9510);t.exports=r.f("toPrimitive")},9565:function(t,e,n){"use strict";t.exports=n(763)},763:function(t,e,n){"use strict";var r=n(8696);t.exports=r},3797:function(t,e,n){"use strict";var r=n(8200),o=n(1578),i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not a function")}},221:function(t,e,n){"use strict";var r=n(9206),o=n(1578),i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not a constructor")}},5109:function(t,e,n){"use strict";var r=n(7164),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},4310:function(t){"use strict";t.exports=function(){}},1106:function(t,e,n){"use strict";var r=n(7638),o=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw new o("Incorrect invocation")}},9462:function(t,e,n){"use strict";var r=n(4211),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not an object")}},8401:function(t,e,n){"use strict";var r=n(5990);t.exports=r((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},7216:function(t,e,n){"use strict";var r=n(2924).forEach,o=n(6417)("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},6375:function(t,e,n){"use strict";var r=n(9641),o=n(8212),i=n(7808),s=n(6624),a=n(46),u=n(9206),c=n(1545),l=n(4013),f=n(9834),h=n(5926),p=Array;t.exports=function(t){var e=i(t),n=u(this),d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v;m&&(v=r(v,d>2?arguments[2]:void 0));var y,g,b,w,k,x,S=h(e),O=0;if(!S||this===p&&a(S))for(y=c(e),g=n?new this(y):p(y);y>O;O++)x=m?v(e[O],O):e[O],l(g,O,x);else for(g=n?new this:[],k=(w=f(e,S)).next;!(b=o(k,w)).done;O++)x=m?s(w,v,[b.value,O],!0):b.value,l(g,O,x);return g.length=O,g}},990:function(t,e,n){"use strict";var r=n(6992),o=n(327),i=n(1545),s=function(t){return function(e,n,s){var a=r(e),u=i(a);if(0===u)return!t&&-1;var c,l=o(s,u);if(t&&n!=n){for(;u>l;)if((c=a[l++])!=c)return!0}else for(;u>l;l++)if((t||l in a)&&a[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},2924:function(t,e,n){"use strict";var r=n(9641),o=n(8197),i=n(7940),s=n(7808),a=n(1545),u=n(1986),c=o([].push),l=function(t){var e=1===t,n=2===t,o=3===t,l=4===t,f=6===t,h=7===t,p=5===t||f;return function(d,v,m,y){for(var g,b,w=s(d),k=i(w),x=a(k),S=r(v,m),O=0,C=y||u,M=e?C(d,x):n||h?C(d,0):void 0;x>O;O++)if((p||O in k)&&(b=S(g=k[O],O,w),t))if(e)M[O]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:c(M,g)}else switch(t){case 4:return!1;case 7:c(M,g)}return f?-1:o||l?l:M}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},4038:function(t,e,n){"use strict";var r=n(5990),o=n(7942),i=n(1529),s=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},6417:function(t,e,n){"use strict";var r=n(5990);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},6125:function(t,e,n){"use strict";var r=n(8197);t.exports=r([].slice)},7987:function(t,e,n){"use strict";var r=n(6125),o=Math.floor;t.exports=function t(e,n){var i=e.length;if(i<8)for(var s,a,u=1;u<i;){for(a=u,s=e[u];a&&n(e[a-1],s)>0;)e[a]=e[--a];a!==u++&&(e[a]=s)}else for(var c=o(i/2),l=t(r(e,0,c),n),f=t(r(e,c),n),h=l.length,p=f.length,d=0,v=0;d<h||v<p;)e[d+v]=d<h&&v<p?n(l[d],f[v])<=0?l[d++]:f[v++]:d<h?l[d++]:f[v++];return e}},2448:function(t,e,n){"use strict";var r=n(4755),o=n(9206),i=n(4211),s=n(7942)("species"),a=Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,(o(e)&&(e===a||r(e.prototype))||i(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},1986:function(t,e,n){"use strict";var r=n(2448);t.exports=function(t,e){return new(r(t))(0===e?0:e)}},6624:function(t,e,n){"use strict";var r=n(9462),o=n(4704);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){o(t,"throw",e)}}},8356:function(t){"use strict";t.exports=function(t,e){return 1===e?function(e,n){return e[t](n)}:function(e,n,r){return e[t](n,r)}}},2863:function(t,e,n){"use strict";var r=n(7942)("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!o)return!1}catch(t){return!1}var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},3021:function(t,e,n){"use strict";var r=n(8197),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},5322:function(t,e,n){"use strict";var r=n(8909),o=n(8200),i=n(3021),s=n(7942)("toStringTag"),a=Object,u="Arguments"===i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:u?i(e):"Object"===(r=i(e))&&o(e.callee)?"Arguments":r}},931:function(t,e,n){"use strict";var r=n(9749),o=n(2017),i=n(612),s=n(9641),a=n(1106),u=n(586),c=n(7725),l=n(5301),f=n(4732),h=n(9368),p=n(9537),d=n(6354).fastKey,v=n(2146),m=v.set,y=v.getterFor;t.exports={getConstructor:function(t,e,n,l){var f=t((function(t,o){a(t,h),m(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),p||(t.size=0),u(o)||c(o,t[l],{that:t,AS_ENTRIES:n})})),h=f.prototype,v=y(e),g=function(t,e,n){var r,o,i=v(t),s=b(t,e);return s?s.value=n:(i.last=s={index:o=d(e,!0),key:e,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=s),r&&(r.next=s),p?i.size++:t.size++,"F"!==o&&(i.index[o]=s)),t},b=function(t,e){var n,r=v(t),o=d(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key===e)return n};return i(h,{clear:function(){for(var t=v(this),e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),e=e.next;t.first=t.last=void 0,t.index=r(null),p?t.size=0:this.size=0},delete:function(t){var e=this,n=v(e),r=b(e,t);if(r){var o=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first===r&&(n.first=o),n.last===r&&(n.last=i),p?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=v(this),r=s(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!b(this,t)}}),i(h,n?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),p&&o(h,"size",{configurable:!0,get:function(){return v(this).size}}),f},setStrong:function(t,e,n){var r=e+" Iterator",o=y(e),i=y(r);l(t,e,(function(t,e){m(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?f("keys"===e?n.key:"values"===e?n.value:[n.key,n.value],!1):(t.target=void 0,f(void 0,!0))}),n?"entries":"values",!n,!0),h(e)}}},7507:function(t,e,n){"use strict";var r=n(8993),o=n(6764),i=n(6354),s=n(5990),a=n(2956),u=n(7725),c=n(1106),l=n(8200),f=n(4211),h=n(586),p=n(814),d=n(8886).f,v=n(2924).forEach,m=n(9537),y=n(2146),g=y.set,b=y.getterFor;t.exports=function(t,e,n){var y,w=-1!==t.indexOf("Map"),k=-1!==t.indexOf("Weak"),x=w?"set":"add",S=o[t],O=S&&S.prototype,C={};if(m&&l(S)&&(k||O.forEach&&!s((function(){(new S).entries().next()})))){var M=(y=e((function(e,n){g(c(e,M),{type:t,collection:new S}),h(n)||u(n,e[x],{that:e,AS_ENTRIES:w})}))).prototype,E=b(t);v(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"===t||"set"===t;!(t in O)||k&&"clear"===t||a(M,t,(function(n,r){var o=E(this).collection;if(!e&&k&&!f(n))return"get"===t&&void 0;var i=o[t](0===n?0:n,r);return e?this:i}))})),k||d(M,"size",{configurable:!0,get:function(){return E(this).collection.size}})}else y=n.getConstructor(e,t,w,x),i.enable();return p(y,t,!1,!0),C[t]=y,r({global:!0,forced:!0},C),k||n.setStrong(y,t,w),y}},7597:function(t,e,n){"use strict";var r=n(7118),o=n(5332),i=n(2180),s=n(8886);t.exports=function(t,e,n){for(var a=o(e),u=s.f,c=i.f,l=0;l<a.length;l++){var f=a[l];r(t,f)||n&&r(n,f)||u(t,f,c(e,f))}}},1404:function(t,e,n){"use strict";var r=n(5990);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4732:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},2956:function(t,e,n){"use strict";var r=n(9537),o=n(8886),i=n(8415);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},8415:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4013:function(t,e,n){"use strict";var r=n(9537),o=n(8886),i=n(8415);t.exports=function(t,e,n){r?o.f(t,e,i(0,n)):t[e]=n}},2017:function(t,e,n){"use strict";var r=n(8886);t.exports=function(t,e,n){return r.f(t,e,n)}},3201:function(t,e,n){"use strict";var r=n(2956);t.exports=function(t,e,n,o){return o&&o.enumerable?t[e]=n:r(t,e,n),t}},612:function(t,e,n){"use strict";var r=n(3201);t.exports=function(t,e,n){for(var o in e)n&&n.unsafe&&t[o]?t[o]=e[o]:r(t,o,e[o],n);return t}},2042:function(t,e,n){"use strict";var r=n(6764),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9537:function(t,e,n){"use strict";var r=n(5990);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},6386:function(t,e,n){"use strict";var r=n(6764),o=n(4211),i=r.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},3478:function(t){"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8246:function(t){"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},1991:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(4559),i=n(9299);t.exports=!o&&!i&&"object"==("undefined"==typeof window?"undefined":r(window))&&"object"==("undefined"==typeof document?"undefined":r(document))},4559:function(t){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}t.exports="object"==("undefined"==typeof Deno?"undefined":e(Deno))&&Deno&&"object"==e(Deno.version)},2115:function(t,e,n){"use strict";var r=n(9545);t.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},3550:function(t,e,n){"use strict";var r=n(9545);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},9299:function(t,e,n){"use strict";var r=n(6764),o=n(3021);t.exports="process"===o(r.process)},3682:function(t,e,n){"use strict";var r=n(9545);t.exports=/web0s(?!.*chrome)/i.test(r)},9545:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},1529:function(t,e,n){"use strict";var r,o,i=n(6764),s=n(9545),a=i.process,u=i.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l&&(o=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},9110:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},584:function(t,e,n){"use strict";var r=n(8197),o=Error,i=r("".replace),s=String(new o("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,u=a.test(s);t.exports=function(t,e){if(u&&"string"==typeof t&&!o.prepareStackTrace)for(;e--;)t=i(t,a,"");return t}},434:function(t,e,n){"use strict";var r=n(2956),o=n(584),i=n(578),s=Error.captureStackTrace;t.exports=function(t,e,n,a){i&&(s?s(t,e):r(t,"stack",o(n,a)))}},578:function(t,e,n){"use strict";var r=n(5990),o=n(8415);t.exports=!r((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},8993:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(6764),i=n(7890),s=n(4503),a=n(8200),u=n(2180).f,c=n(2405),l=n(1252),f=n(9641),h=n(2956),p=n(7118);n(4146);var d=function(t){var e=function e(n,r,o){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,o)}return i(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var n,i,v,m,y,g,b,w,k,x=t.target,S=t.global,O=t.stat,C=t.proto,M=S?o:O?o[x]:o[x]&&o[x].prototype,E=S?l:l[x]||h(l,x,{})[x],T=E.prototype;for(m in e)i=!(n=c(S?m:x+(O?".":"#")+m,t.forced))&&M&&p(M,m),g=E[m],i&&(b=t.dontCallGetSet?(k=u(M,m))&&k.value:M[m]),y=i&&b?b:e[m],(n||C||r(g)!=r(y))&&(w=t.bind&&i?f(y,o):t.wrap&&i?d(y):C&&a(y)?s(y):y,(t.sham||y&&y.sham||g&&g.sham)&&h(w,"sham",!0),h(E,m,w),C&&(p(l,v=x+"Prototype")||h(l,v,{}),h(l[v],m,y),t.real&&T&&(n||!T[m])&&h(T,m,y)))}},5990:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},4803:function(t,e,n){"use strict";var r=n(5990);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},7890:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(5755),i=Function.prototype,s=i.apply,a=i.call;t.exports="object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&Reflect.apply||(o?a.bind(s):function(){return a.apply(s,arguments)})},9641:function(t,e,n){"use strict";var r=n(4503),o=n(3797),i=n(5755),s=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?s(t,e):function(){return t.apply(e,arguments)}}},5755:function(t,e,n){"use strict";var r=n(5990);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},8212:function(t,e,n){"use strict";var r=n(5755),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},1603:function(t,e,n){"use strict";var r=n(9537),o=n(7118),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=o(i,"name"),u=a&&"something"===function(){}.name,c=a&&(!r||r&&s(i,"name").configurable);t.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},2885:function(t,e,n){"use strict";var r=n(8197),o=n(3797);t.exports=function(t,e,n){try{return r(o(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},4503:function(t,e,n){"use strict";var r=n(3021),o=n(8197);t.exports=function(t){if("Function"===r(t))return o(t)}},8197:function(t,e,n){"use strict";var r=n(5755),o=Function.prototype,i=o.call,s=r&&o.bind.bind(i,i);t.exports=r?s:function(t){return function(){return i.apply(t,arguments)}}},2585:function(t,e,n){"use strict";var r=n(6764),o=n(1252);t.exports=function(t,e){var n=o[t+"Prototype"],i=n&&n[e];if(i)return i;var s=r[t],a=s&&s.prototype;return a&&a[e]}},5784:function(t,e,n){"use strict";var r=n(1252),o=n(6764),i=n(8200),s=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(r[t])||s(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},5926:function(t,e,n){"use strict";var r=n(5322),o=n(4341),i=n(586),s=n(4432),a=n(7942)("iterator");t.exports=function(t){if(!i(t))return o(t,a)||o(t,"@@iterator")||s[r(t)]}},9834:function(t,e,n){"use strict";var r=n(8212),o=n(3797),i=n(9462),s=n(1578),a=n(5926),u=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(o(n))return i(r(n,t));throw new u(s(t)+" is not iterable")}},1218:function(t,e,n){"use strict";var r=n(8197),o=n(4755),i=n(8200),s=n(3021),a=n(2062),u=r([].push);t.exports=function(t){if(i(t))return t;if(o(t)){for(var e=t.length,n=[],r=0;r<e;r++){var c=t[r];"string"==typeof c?u(n,c):"number"!=typeof c&&"Number"!==s(c)&&"String"!==s(c)||u(n,a(c))}var l=n.length,f=!0;return function(t,e){if(f)return f=!1,e;if(o(this))return e;for(var r=0;r<l;r++)if(n[r]===t)return e}}}},4341:function(t,e,n){"use strict";var r=n(3797),o=n(586);t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},6764:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=function(t){return t&&t.Math===Math&&t};t.exports=o("object"==("undefined"==typeof globalThis?"undefined":r(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":r(window))&&window)||o("object"==("undefined"==typeof self?"undefined":r(self))&&self)||o("object"==(void 0===n.g?"undefined":r(n.g))&&n.g)||o("object"==r(this)&&this)||function(){return this}()||Function("return this")()},7118:function(t,e,n){"use strict";var r=n(8197),o=n(7808),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},8616:function(t){"use strict";t.exports={}},7454:function(t){"use strict";t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},7910:function(t,e,n){"use strict";var r=n(5784);t.exports=r("document","documentElement")},7626:function(t,e,n){"use strict";var r=n(9537),o=n(5990),i=n(6386);t.exports=!r&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},7940:function(t,e,n){"use strict";var r=n(8197),o=n(5990),i=n(3021),s=Object,a=r("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?a(t,""):s(t)}:s},6697:function(t,e,n){"use strict";var r=n(8197),o=n(8200),i=n(4146),s=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return s(t)}),t.exports=i.inspectSource},7621:function(t,e,n){"use strict";var r=n(4211),o=n(2956);t.exports=function(t,e){r(e)&&"cause"in e&&o(t,"cause",e.cause)}},6354:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(8993),i=n(8197),s=n(8616),a=n(4211),u=n(7118),c=n(8886).f,l=n(1753),f=n(921),h=n(827),p=n(8677),d=n(4803),v=!1,m=p("meta"),y=0,g=function(t){c(t,m,{value:{objectID:"O"+y++,weakData:{}}})},b=t.exports={enable:function(){b.enable=function(){},v=!0;var t=l.f,e=i([].splice),n={};n[m]=1,t(n).length&&(l.f=function(n){for(var r=t(n),o=0,i=r.length;o<i;o++)if(r[o]===m){e(r,o,1);break}return r},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==r(t)?t:("string"==typeof t?"S":"P")+t;if(!u(t,m)){if(!h(t))return"F";if(!e)return"E";g(t)}return t[m].objectID},getWeakData:function(t,e){if(!u(t,m)){if(!h(t))return!0;if(!e)return!1;g(t)}return t[m].weakData},onFreeze:function(t){return d&&v&&h(t)&&!u(t,m)&&g(t),t}};s[m]=!0},2146:function(t,e,n){"use strict";var r,o,i,s=n(8461),a=n(6764),u=n(4211),c=n(2956),l=n(7118),f=n(4146),h=n(4228),p=n(8616),d="Object already initialized",v=a.TypeError,m=a.WeakMap;if(s||f.state){var y=f.state||(f.state=new m);y.get=y.get,y.has=y.has,y.set=y.set,r=function(t,e){if(y.has(t))throw new v(d);return e.facade=t,y.set(t,e),e},o=function(t){return y.get(t)||{}},i=function(t){return y.has(t)}}else{var g=h("state");p[g]=!0,r=function(t,e){if(l(t,g))throw new v(d);return e.facade=t,c(t,g,e),e},o=function(t){return l(t,g)?t[g]:{}},i=function(t){return l(t,g)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=o(e)).type!==t)throw new v("Incompatible receiver, "+t+" required");return n}}}},46:function(t,e,n){"use strict";var r=n(7942),o=n(4432),i=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||s[i]===t)}},4755:function(t,e,n){"use strict";var r=n(3021);t.exports=Array.isArray||function(t){return"Array"===r(t)}},8200:function(t){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var n="object"==("undefined"==typeof document?"undefined":e(document))&&document.all;t.exports=void 0===n&&void 0!==n?function(t){return"function"==typeof t||t===n}:function(t){return"function"==typeof t}},9206:function(t,e,n){"use strict";var r=n(8197),o=n(5990),i=n(8200),s=n(5322),a=n(5784),u=n(6697),c=function(){},l=a("Reflect","construct"),f=/^\s*(?:class|function)\b/,h=r(f.exec),p=!f.test(c),d=function(t){if(!i(t))return!1;try{return l(c,[],t),!0}catch(t){return!1}},v=function(t){if(!i(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(f,u(t))}catch(t){return!0}};v.sham=!0,t.exports=!l||o((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?v:d},2405:function(t,e,n){"use strict";var r=n(5990),o=n(8200),i=/#|\.prototype\./,s=function(t,e){var n=u[a(t)];return n===l||n!==c&&(o(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},586:function(t){"use strict";t.exports=function(t){return null==t}},4211:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(8200);t.exports=function(t){return"object"==r(t)?null!==t:o(t)}},7164:function(t,e,n){"use strict";var r=n(4211);t.exports=function(t){return r(t)||null===t}},6706:function(t){"use strict";t.exports=!0},7060:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(5784),i=n(8200),s=n(7638),a=n(645),u=Object;t.exports=a?function(t){return"symbol"==r(t)}:function(t){var e=o("Symbol");return i(e)&&s(e.prototype,u(t))}},7725:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(9641),i=n(8212),s=n(9462),a=n(1578),u=n(46),c=n(1545),l=n(7638),f=n(9834),h=n(5926),p=n(4704),d=TypeError,v=function(t,e){this.stopped=t,this.result=e},m=v.prototype;t.exports=function(t,e,n){var y,g,b,w,k,x,S,O=n&&n.that,C=!(!n||!n.AS_ENTRIES),M=!(!n||!n.IS_RECORD),E=!(!n||!n.IS_ITERATOR),T=!(!n||!n.INTERRUPTED),N=o(e,O),A=function(t){return y&&p(y,"normal",t),new v(!0,t)},D=function(t){return C?(s(t),T?N(t[0],t[1],A):N(t[0],t[1])):T?N(t,A):N(t)};if(M)y=t.iterator;else if(E)y=t;else{if(!(g=h(t)))throw new d(a(t)+" is not iterable");if(u(g)){for(b=0,w=c(t);w>b;b++)if((k=D(t[b]))&&l(m,k))return k;return new v(!1)}y=f(t,g)}for(x=M?t.next:y.next;!(S=i(x,y)).done;){try{k=D(S.value)}catch(t){p(y,"throw",t)}if("object"==r(k)&&k&&l(m,k))return k}return new v(!1)}},4704:function(t,e,n){"use strict";var r=n(8212),o=n(9462),i=n(4341);t.exports=function(t,e,n){var s,a;o(t);try{if(!(s=i(t,"return"))){if("throw"===e)throw n;return n}s=r(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return o(s),n}},2691:function(t,e,n){"use strict";var r=n(5590).IteratorPrototype,o=n(9749),i=n(8415),s=n(814),a=n(4432),u=function(){return this};t.exports=function(t,e,n,c){var l=e+" Iterator";return t.prototype=o(r,{next:i(+!c,n)}),s(t,l,!1,!0),a[l]=u,t}},5301:function(t,e,n){"use strict";var r=n(8993),o=n(8212),i=n(6706),s=n(1603),a=n(8200),u=n(2691),c=n(1726),l=n(506),f=n(814),h=n(2956),p=n(3201),d=n(7942),v=n(4432),m=n(5590),y=s.PROPER,g=s.CONFIGURABLE,b=m.IteratorPrototype,w=m.BUGGY_SAFARI_ITERATORS,k=d("iterator"),x="keys",S="values",O="entries",C=function(){return this};t.exports=function(t,e,n,s,d,m,M){u(n,e,s);var E,T,N,A=function(t){if(t===d&&j)return j;if(!w&&t&&t in P)return P[t];switch(t){case x:case S:case O:return function(){return new n(this,t)}}return function(){return new n(this)}},D=e+" Iterator",R=!1,P=t.prototype,I=P[k]||P["@@iterator"]||d&&P[d],j=!w&&I||A(d),z="Array"===e&&P.entries||I;if(z&&(E=c(z.call(new t)))!==Object.prototype&&E.next&&(i||c(E)===b||(l?l(E,b):a(E[k])||p(E,k,C)),f(E,D,!0,!0),i&&(v[D]=C)),y&&d===S&&I&&I.name!==S&&(!i&&g?h(P,"name",S):(R=!0,j=function(){return o(I,this)})),d)if(T={values:A(S),keys:m?j:A(x),entries:A(O)},M)for(N in T)(w||R||!(N in P))&&p(P,N,T[N]);else r({target:e,proto:!0,forced:w||R},T);return i&&!M||P[k]===j||p(P,k,j,{name:d}),v[e]=j,T}},5590:function(t,e,n){"use strict";var r,o,i,s=n(5990),a=n(8200),u=n(4211),c=n(9749),l=n(1726),f=n(3201),h=n(7942),p=n(6706),d=h("iterator"),v=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(r=o):v=!0),!u(r)||s((function(){var t={};return r[d].call(t)!==t}))?r={}:p&&(r=c(r)),a(r[d])||f(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:v}},4432:function(t){"use strict";t.exports={}},1545:function(t,e,n){"use strict";var r=n(6015);t.exports=function(t){return r(t.length)}},8249:function(t,e,n){"use strict";var r=n(5784),o=n(8356),i=r("Map");t.exports={Map:i,set:o("set",2),get:o("get",1),has:o("has",1),remove:o("delete",1),proto:i.prototype}},3658:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},8906:function(t,e,n){"use strict";var r,o,i,s,a,u=n(6764),c=n(5416),l=n(9641),f=n(582).set,h=n(9468),p=n(3550),d=n(2115),v=n(3682),m=n(9299),y=u.MutationObserver||u.WebKitMutationObserver,g=u.document,b=u.process,w=u.Promise,k=c("queueMicrotask");if(!k){var x=new h,S=function(){var t,e;for(m&&(t=b.domain)&&t.exit();e=x.get();)try{e()}catch(t){throw x.head&&r(),t}t&&t.enter()};p||m||v||!y||!g?!d&&w&&w.resolve?((s=w.resolve(void 0)).constructor=w,a=l(s.then,s),r=function(){a(S)}):m?r=function(){b.nextTick(S)}:(f=l(f,u),r=function(){f(S)}):(o=!0,i=g.createTextNode(""),new y(S).observe(i,{characterData:!0}),r=function(){i.data=o=!o}),k=function(t){x.head||r(),x.add(t)}}t.exports=k},576:function(t,e,n){"use strict";var r=n(3797),o=TypeError,i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw new o("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},7998:function(t,e,n){"use strict";var r=n(2062);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},9348:function(t,e,n){"use strict";var r=n(9537),o=n(8197),i=n(8212),s=n(5990),a=n(8685),u=n(4648),c=n(6468),l=n(7808),f=n(7940),h=Object.assign,p=Object.defineProperty,d=o([].concat);t.exports=!h||s((function(){if(r&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach((function(t){e[t]=t})),7!==h({},t)[n]||a(h({},e)).join("")!==o}))?function(t,e){for(var n=l(t),o=arguments.length,s=1,h=u.f,p=c.f;o>s;)for(var v,m=f(arguments[s++]),y=h?d(a(m),h(m)):a(m),g=y.length,b=0;g>b;)v=y[b++],r&&!i(p,m,v)||(n[v]=m[v]);return n}:h},9749:function(t,e,n){"use strict";var r,o=n(9462),i=n(9306),s=n(9110),a=n(8616),u=n(7910),c=n(6386),l=n(4228),f="prototype",h="script",p=l("IE_PROTO"),d=function(){},v=function(t){return"<"+h+">"+t+"</"+h+">"},m=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;y="undefined"!=typeof document?document.domain&&r?m(r):(e=c("iframe"),n="java"+h+":",e.style.display="none",u.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):m(r);for(var o=s.length;o--;)delete y[f][s[o]];return y()};a[p]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(d[f]=o(t),n=new d,d[f]=null,n[p]=t):n=y(),void 0===e?n:i.f(n,e)}},9306:function(t,e,n){"use strict";var r=n(9537),o=n(2279),i=n(8886),s=n(9462),a=n(6992),u=n(8685);e.f=r&&!o?Object.defineProperties:function(t,e){s(t);for(var n,r=a(e),o=u(e),c=o.length,l=0;c>l;)i.f(t,n=o[l++],r[n]);return t}},8886:function(t,e,n){"use strict";var r=n(9537),o=n(7626),i=n(2279),s=n(9462),a=n(2812),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",h="configurable",p="writable";e.f=r?i?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&p in n&&!n[p]){var r=l(t,e);r&&r[p]&&(t[e]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:f in n?n[f]:r[f],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),o)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},2180:function(t,e,n){"use strict";var r=n(9537),o=n(8212),i=n(6468),s=n(8415),a=n(6992),u=n(2812),c=n(7118),l=n(7626),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=u(e),l)try{return f(t,e)}catch(t){}if(c(t,e))return s(!o(i.f,t,e),t[e])}},921:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(3021),i=n(6992),s=n(1753).f,a=n(6125),u="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"===o(t)?function(t){try{return s(t)}catch(t){return a(u)}}(t):s(i(t))}},1753:function(t,e,n){"use strict";var r=n(5543),o=n(9110).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},4648:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},1726:function(t,e,n){"use strict";var r=n(7118),o=n(8200),i=n(7808),s=n(4228),a=n(1404),u=s("IE_PROTO"),c=Object,l=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=i(t);if(r(e,u))return e[u];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof c?l:null}},827:function(t,e,n){"use strict";var r=n(5990),o=n(4211),i=n(3021),s=n(8401),a=Object.isExtensible,u=r((function(){a(1)}));t.exports=u||s?function(t){return!!o(t)&&(!s||"ArrayBuffer"!==i(t))&&(!a||a(t))}:a},7638:function(t,e,n){"use strict";var r=n(8197);t.exports=r({}.isPrototypeOf)},5543:function(t,e,n){"use strict";var r=n(8197),o=n(7118),i=n(6992),s=n(990).indexOf,a=n(8616),u=r([].push);t.exports=function(t,e){var n,r=i(t),c=0,l=[];for(n in r)!o(a,n)&&o(r,n)&&u(l,n);for(;e.length>c;)o(r,n=e[c++])&&(~s(l,n)||u(l,n));return l}},8685:function(t,e,n){"use strict";var r=n(5543),o=n(9110);t.exports=Object.keys||function(t){return r(t,o)}},6468:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},506:function(t,e,n){"use strict";var r=n(2885),o=n(4211),i=n(2753),s=n(5109);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return i(n),s(r),o(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0)},9760:function(t,e,n){"use strict";var r=n(8909),o=n(5322);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},5947:function(t,e,n){"use strict";var r=n(8212),o=n(8200),i=n(4211),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&o(n=t.toString)&&!i(a=r(n,t)))return a;if(o(n=t.valueOf)&&!i(a=r(n,t)))return a;if("string"!==e&&o(n=t.toString)&&!i(a=r(n,t)))return a;throw new s("Can't convert object to primitive value")}},5332:function(t,e,n){"use strict";var r=n(5784),o=n(8197),i=n(1753),s=n(4648),a=n(9462),u=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=s.f;return n?u(e,n(t)):e}},1252:function(t){"use strict";t.exports={}},1902:function(t){"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},9897:function(t,e,n){"use strict";var r=n(6764),o=n(3785),i=n(8200),s=n(2405),a=n(6697),u=n(7942),c=n(1991),l=n(4559),f=n(6706),h=n(1529),p=o&&o.prototype,d=u("species"),v=!1,m=i(r.PromiseRejectionEvent),y=s("Promise",(function(){var t=a(o),e=t!==String(o);if(!e&&66===h)return!0;if(f&&(!p.catch||!p.finally))return!0;if(!h||h<51||!/native code/.test(t)){var n=new o((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[d]=r,!(v=n.then((function(){}))instanceof r))return!0}return!e&&(c||l)&&!m}));t.exports={CONSTRUCTOR:y,REJECTION_EVENT:m,SUBCLASSING:v}},3785:function(t,e,n){"use strict";var r=n(6764);t.exports=r.Promise},9359:function(t,e,n){"use strict";var r=n(9462),o=n(4211),i=n(576);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},2144:function(t,e,n){"use strict";var r=n(3785),o=n(2863),i=n(9897).CONSTRUCTOR;t.exports=i||!o((function(t){r.all(t).then(void 0,(function(){}))}))},9468:function(t){"use strict";var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},2753:function(t,e,n){"use strict";var r=n(586),o=TypeError;t.exports=function(t){if(r(t))throw new o("Can't call method on "+t);return t}},5416:function(t,e,n){"use strict";var r=n(6764),o=n(9537),i=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!o)return r[t];var e=i(r,t);return e&&e.value}},9368:function(t,e,n){"use strict";var r=n(5784),o=n(2017),i=n(7942),s=n(9537),a=i("species");t.exports=function(t){var e=r(t);s&&e&&!e[a]&&o(e,a,{configurable:!0,get:function(){return this}})}},814:function(t,e,n){"use strict";var r=n(8909),o=n(8886).f,i=n(2956),s=n(7118),a=n(9760),u=n(7942)("toStringTag");t.exports=function(t,e,n,c){var l=n?t:t&&t.prototype;l&&(s(l,u)||o(l,u,{configurable:!0,value:e}),c&&!r&&i(l,"toString",a))}},4228:function(t,e,n){"use strict";var r=n(8342),o=n(8677),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},4146:function(t,e,n){"use strict";var r=n(6706),o=n(6764),i=n(2042),s="__core-js_shared__",a=t.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.37.1",mode:r?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"})},8342:function(t,e,n){"use strict";var r=n(4146);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},4760:function(t,e,n){"use strict";var r=n(9462),o=n(221),i=n(586),s=n(7942)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||i(n=r(a)[s])?e:o(n)}},1552:function(t,e,n){"use strict";var r=n(8197),o=n(4908),i=n(2062),s=n(2753),a=r("".charAt),u=r("".charCodeAt),c=r("".slice),l=function(t){return function(e,n){var r,l,f=i(s(e)),h=o(n),p=f.length;return h<0||h>=p?t?"":void 0:(r=u(f,h))<55296||r>56319||h+1===p||(l=u(f,h+1))<56320||l>57343?t?a(f,h):r:t?c(f,h,h+2):l-56320+(r-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},5210:function(t,e,n){"use strict";var r=n(8197),o=2147483647,i=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",u=RangeError,c=r(s.exec),l=Math.floor,f=String.fromCharCode,h=r("".charCodeAt),p=r([].join),d=r([].push),v=r("".replace),m=r("".split),y=r("".toLowerCase),g=function(t){return t+22+75*(t<26)},b=function(t,e,n){var r=0;for(t=n?l(t/700):t>>1,t+=l(t/e);t>455;)t=l(t/35),r+=36;return l(r+36*t/(t+38))},w=function(t){var e=[];t=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=h(t,n++);if(o>=55296&&o<=56319&&n<r){var i=h(t,n++);56320==(64512&i)?d(e,((1023&o)<<10)+(1023&i)+65536):(d(e,o),n--)}else d(e,o)}return e}(t);var n,r,i=t.length,s=128,c=0,v=72;for(n=0;n<t.length;n++)(r=t[n])<128&&d(e,f(r));var m=e.length,y=m;for(m&&d(e,"-");y<i;){var w=o;for(n=0;n<t.length;n++)(r=t[n])>=s&&r<w&&(w=r);var k=y+1;if(w-s>l((o-c)/k))throw new u(a);for(c+=(w-s)*k,s=w,n=0;n<t.length;n++){if((r=t[n])<s&&++c>o)throw new u(a);if(r===s){for(var x=c,S=36;;){var O=S<=v?1:S>=v+26?26:S-v;if(x<O)break;var C=x-O,M=36-O;d(e,f(g(O+C%M))),x=l(C/M),S+=36}d(e,f(g(x))),v=b(c,k,y===m),c=0,y++}}c++,s++}return p(e,"")};t.exports=function(t){var e,n,r=[],o=m(v(y(t),s,"."),".");for(e=0;e<o.length;e++)n=o[e],d(r,c(i,n)?"xn--"+w(n):n);return p(r,".")}},6348:function(t,e,n){"use strict";var r=n(1529),o=n(5990),i=n(6764).String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4233:function(t,e,n){"use strict";var r=n(8212),o=n(5784),i=n(7942),s=n(3201);t.exports=function(){var t=o("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,a=i("toPrimitive");e&&!e[a]&&s(e,a,(function(t){return r(n,this)}),{arity:1})}},4061:function(t,e,n){"use strict";var r=n(6348);t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},582:function(t,e,n){"use strict";var r,o,i,s,a=n(6764),u=n(7890),c=n(9641),l=n(8200),f=n(7118),h=n(5990),p=n(7910),d=n(6125),v=n(6386),m=n(8873),y=n(3550),g=n(9299),b=a.setImmediate,w=a.clearImmediate,k=a.process,x=a.Dispatch,S=a.Function,O=a.MessageChannel,C=a.String,M=0,E={},T="onreadystatechange";h((function(){r=a.location}));var N=function(t){if(f(E,t)){var e=E[t];delete E[t],e()}},A=function(t){return function(){N(t)}},D=function(t){N(t.data)},R=function(t){a.postMessage(C(t),r.protocol+"//"+r.host)};b&&w||(b=function(t){m(arguments.length,1);var e=l(t)?t:S(t),n=d(arguments,1);return E[++M]=function(){u(e,void 0,n)},o(M),M},w=function(t){delete E[t]},g?o=function(t){k.nextTick(A(t))}:x&&x.now?o=function(t){x.now(A(t))}:O&&!y?(s=(i=new O).port2,i.port1.onmessage=D,o=c(s.postMessage,s)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!h(R)?(o=R,a.addEventListener("message",D,!1)):o=T in v("script")?function(t){p.appendChild(v("script"))[T]=function(){p.removeChild(this),N(t)}}:function(t){setTimeout(A(t),0)}),t.exports={set:b,clear:w}},327:function(t,e,n){"use strict";var r=n(4908),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},6992:function(t,e,n){"use strict";var r=n(7940),o=n(2753);t.exports=function(t){return r(o(t))}},4908:function(t,e,n){"use strict";var r=n(3658);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},6015:function(t,e,n){"use strict";var r=n(4908),o=Math.min;t.exports=function(t){var e=r(t);return e>0?o(e,9007199254740991):0}},7808:function(t,e,n){"use strict";var r=n(2753),o=Object;t.exports=function(t){return o(r(t))}},9862:function(t,e,n){"use strict";var r=n(8212),o=n(4211),i=n(7060),s=n(4341),a=n(5947),u=n(7942),c=TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,u=s(t,l);if(u){if(void 0===e&&(e="default"),n=r(u,t,e),!o(n)||i(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2812:function(t,e,n){"use strict";var r=n(9862),o=n(7060);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},8909:function(t,e,n){"use strict";var r={};r[n(7942)("toStringTag")]="z",t.exports="[object z]"===String(r)},2062:function(t,e,n){"use strict";var r=n(5322),o=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},1578:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},8677:function(t,e,n){"use strict";var r=n(8197),o=0,i=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++o+i,36)}},617:function(t,e,n){"use strict";var r=n(5990),o=n(7942),i=n(9537),s=n(6706),a=o("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),n.delete("a",2),n.delete("b",void 0),s&&(!t.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!e.size&&(s||!i)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},645:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(6348);t.exports=o&&!Symbol.sham&&"symbol"==r(Symbol.iterator)},2279:function(t,e,n){"use strict";var r=n(9537),o=n(5990);t.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8873:function(t){"use strict";var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},8461:function(t,e,n){"use strict";var r=n(6764),o=n(8200),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},9008:function(t,e,n){"use strict";var r=n(1252),o=n(7118),i=n(9510),s=n(8886).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||s(e,t,{value:i.f(t)})}},9510:function(t,e,n){"use strict";var r=n(7942);e.f=r},7942:function(t,e,n){"use strict";var r=n(6764),o=n(8342),i=n(7118),s=n(8677),a=n(6348),u=n(645),c=r.Symbol,l=o("wks"),f=u?c.for||c:c&&c.withoutSetter||s;t.exports=function(t){return i(l,t)||(l[t]=a&&i(c,t)?c[t]:f("Symbol."+t)),l[t]}},4010:function(t,e,n){"use strict";var r=n(8993),o=n(7638),i=n(1726),s=n(506),a=n(7597),u=n(9749),c=n(2956),l=n(8415),f=n(7621),h=n(434),p=n(7725),d=n(7998),v=n(7942)("toStringTag"),m=Error,y=[].push,g=function(t,e){var n,r=o(b,this);s?n=s(new m,r?i(this):b):(n=r?this:u(b),c(n,v,"Error")),void 0!==e&&c(n,"message",d(e)),h(n,g,n.stack,1),arguments.length>2&&f(n,arguments[2]);var a=[];return p(t,y,{that:a}),c(n,"errors",a),n};s?s(g,m):a(g,m,{name:!0});var b=g.prototype=u(m.prototype,{constructor:l(1,g),message:l(1,""),name:l(1,"AggregateError")});r({global:!0,constructor:!0,arity:2},{AggregateError:g})},2676:function(t,e,n){"use strict";n(4010)},8071:function(t,e,n){"use strict";var r=n(8993),o=n(5990),i=n(4755),s=n(4211),a=n(7808),u=n(1545),c=n(3478),l=n(4013),f=n(1986),h=n(4038),p=n(7942),d=n(1529),v=p("isConcatSpreadable"),m=d>=51||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),y=function(t){if(!s(t))return!1;var e=t[v];return void 0!==e?!!e:i(t)};r({target:"Array",proto:!0,arity:1,forced:!m||!h("concat")},{concat:function(t){var e,n,r,o,i,s=a(this),h=f(s,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(y(i=-1===e?s:arguments[e]))for(o=u(i),c(p+o),n=0;n<o;n++,p++)n in i&&l(h,p,i[n]);else c(p+1),l(h,p++,i);return h.length=p,h}})},4029:function(t,e,n){"use strict";var r=n(8993),o=n(2924).filter;r({target:"Array",proto:!0,forced:!n(4038)("filter")},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},4840:function(t,e,n){"use strict";var r=n(8993),o=n(7216);r({target:"Array",proto:!0,forced:[].forEach!==o},{forEach:o})},5743:function(t,e,n){"use strict";var r=n(8993),o=n(6375);r({target:"Array",stat:!0,forced:!n(2863)((function(t){Array.from(t)}))},{from:o})},3:function(t,e,n){"use strict";n(8993)({target:"Array",stat:!0},{isArray:n(4755)})},6949:function(t,e,n){"use strict";var r=n(6992),o=n(4310),i=n(4432),s=n(2146),a=n(8886).f,u=n(5301),c=n(4732),l=n(6706),f=n(9537),h="Array Iterator",p=s.set,d=s.getterFor(h);t.exports=u(Array,"Array",(function(t,e){p(this,{type:h,target:r(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,c(void 0,!0);switch(t.kind){case"keys":return c(n,!1);case"values":return c(e[n],!1)}return c([n,e[n]],!1)}),"values");var v=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!l&&f&&"values"!==v.name)try{a(v,"name",{value:"values"})}catch(t){}},5569:function(t,e,n){"use strict";var r=n(8993),o=n(8197),i=n(4755),s=o([].reverse),a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),s(this)}})},9189:function(t,e,n){"use strict";var r=n(8993),o=n(4755),i=n(9206),s=n(4211),a=n(327),u=n(1545),c=n(6992),l=n(4013),f=n(7942),h=n(4038),p=n(6125),d=h("slice"),v=f("species"),m=Array,y=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var n,r,f,h=c(this),d=u(h),g=a(t,d),b=a(void 0===e?d:e,d);if(o(h)&&(n=h.constructor,(i(n)&&(n===m||o(n.prototype))||s(n)&&null===(n=n[v]))&&(n=void 0),n===m||void 0===n))return p(h,g,b);for(r=new(void 0===n?m:n)(y(b-g,0)),f=0;g<b;g++,f++)g in h&&l(r,f,h[g]);return r.length=f,r}})},4479:function(){},8331:function(t,e,n){"use strict";var r=n(8993),o=n(5784),i=n(7890),s=n(8212),a=n(8197),u=n(5990),c=n(8200),l=n(7060),f=n(6125),h=n(1218),p=n(6348),d=String,v=o("JSON","stringify"),m=a(/./.exec),y=a("".charAt),g=a("".charCodeAt),b=a("".replace),w=a(1..toString),k=/[\uD800-\uDFFF]/g,x=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,O=!p||u((function(){var t=o("Symbol")("stringify detection");return"[null]"!==v([t])||"{}"!==v({a:t})||"{}"!==v(Object(t))})),C=u((function(){return'"\\udf06\\ud834"'!==v("\udf06\ud834")||'"\\udead"'!==v("\udead")})),M=function(t,e){var n=f(arguments),r=h(e);if(c(r)||void 0!==t&&!l(t))return n[1]=function(t,e){if(c(r)&&(e=s(r,this,d(t),e)),!l(e))return e},i(v,null,n)},E=function(t,e,n){var r=y(n,e-1),o=y(n,e+1);return m(x,t)&&!m(S,o)||m(S,t)&&!m(x,r)?"\\u"+w(g(t,0),16):t};v&&r({target:"JSON",stat:!0,arity:3,forced:O||C},{stringify:function(t,e,n){var r=f(arguments),o=i(O?M:v,null,r);return C&&"string"==typeof o?b(o,k,E):o}})},5414:function(t,e,n){"use strict";var r=n(6764);n(814)(r.JSON,"JSON",!0)},180:function(t,e,n){"use strict";n(7507)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(931))},1433:function(t,e,n){"use strict";var r=n(8993),o=n(8197),i=n(3797),s=n(2753),a=n(7725),u=n(8249),c=n(6706),l=n(5990),f=u.Map,h=u.has,p=u.get,d=u.set,v=o([].push),m=c||l((function(){return 1!==f.groupBy("ab",(function(t){return t})).get("a").length}));r({target:"Map",stat:!0,forced:c||m},{groupBy:function(t,e){s(t),i(e);var n=new f,r=0;return a(t,(function(t){var o=e(t,r++);h(n,o)?v(p(n,o),t):d(n,o,[t])})),n}})},4994:function(t,e,n){"use strict";n(180)},8570:function(){},5631:function(t,e,n){"use strict";n(8993)({target:"Object",stat:!0,sham:!n(9537)},{create:n(9749)})},5264:function(t,e,n){"use strict";var r=n(8993),o=n(9537),i=n(9306).f;r({target:"Object",stat:!0,forced:Object.defineProperties!==i,sham:!o},{defineProperties:i})},6072:function(t,e,n){"use strict";var r=n(8993),o=n(9537),i=n(8886).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},1130:function(t,e,n){"use strict";var r=n(8993),o=n(5990),i=n(6992),s=n(2180).f,a=n(9537);r({target:"Object",stat:!0,forced:!a||o((function(){s(1)})),sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(i(t),e)}})},7017:function(t,e,n){"use strict";var r=n(8993),o=n(9537),i=n(5332),s=n(6992),a=n(2180),u=n(4013);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){for(var e,n,r=s(t),o=a.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=o(r,e=c[f++]))&&u(l,e,n);return l}})},3062:function(t,e,n){"use strict";var r=n(8993),o=n(6348),i=n(5990),s=n(4648),a=n(7808);r({target:"Object",stat:!0,forced:!o||i((function(){s.f(1)}))},{getOwnPropertySymbols:function(t){var e=s.f;return e?e(a(t)):[]}})},1504:function(t,e,n){"use strict";var r=n(8993),o=n(5990),i=n(7808),s=n(1726),a=n(1404);r({target:"Object",stat:!0,forced:o((function(){s(1)})),sham:!a},{getPrototypeOf:function(t){return s(i(t))}})},1375:function(t,e,n){"use strict";var r=n(8993),o=n(7808),i=n(8685);r({target:"Object",stat:!0,forced:n(5990)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},7276:function(t,e,n){"use strict";n(8993)({target:"Object",stat:!0},{setPrototypeOf:n(506)})},5954:function(){},1964:function(t,e,n){"use strict";var r=n(8993),o=n(8212),i=n(3797),s=n(576),a=n(1902),u=n(7725);r({target:"Promise",stat:!0,forced:n(2144)},{allSettled:function(t){var e=this,n=s.f(e),r=n.resolve,c=n.reject,l=a((function(){var n=i(e.resolve),s=[],a=0,c=1;u(t,(function(t){var i=a++,u=!1;c++,o(n,e,t).then((function(t){u||(u=!0,s[i]={status:"fulfilled",value:t},--c||r(s))}),(function(t){u||(u=!0,s[i]={status:"rejected",reason:t},--c||r(s))}))})),--c||r(s)}));return l.error&&c(l.value),n.promise}})},6364:function(t,e,n){"use strict";var r=n(8993),o=n(8212),i=n(3797),s=n(576),a=n(1902),u=n(7725);r({target:"Promise",stat:!0,forced:n(2144)},{all:function(t){var e=this,n=s.f(e),r=n.resolve,c=n.reject,l=a((function(){var n=i(e.resolve),s=[],a=0,l=1;u(t,(function(t){var i=a++,u=!1;l++,o(n,e,t).then((function(t){u||(u=!0,s[i]=t,--l||r(s))}),c)})),--l||r(s)}));return l.error&&c(l.value),n.promise}})},4913:function(t,e,n){"use strict";var r=n(8993),o=n(8212),i=n(3797),s=n(5784),a=n(576),u=n(1902),c=n(7725),l=n(2144),f="No one promise resolved";r({target:"Promise",stat:!0,forced:l},{any:function(t){var e=this,n=s("AggregateError"),r=a.f(e),l=r.resolve,h=r.reject,p=u((function(){var r=i(e.resolve),s=[],a=0,u=1,p=!1;c(t,(function(t){var i=a++,c=!1;u++,o(r,e,t).then((function(t){c||p||(p=!0,l(t))}),(function(t){c||p||(c=!0,s[i]=t,--u||h(new n(s,f)))}))})),--u||h(new n(s,f))}));return p.error&&h(p.value),r.promise}})},5064:function(t,e,n){"use strict";var r=n(8993),o=n(6706),i=n(9897).CONSTRUCTOR,s=n(3785),a=n(5784),u=n(8200),c=n(3201),l=s&&s.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&u(s)){var f=a("Promise").prototype.catch;l.catch!==f&&c(l,"catch",f,{unsafe:!0})}},3007:function(t,e,n){"use strict";var r,o,i,s=n(8993),a=n(6706),u=n(9299),c=n(6764),l=n(8212),f=n(3201),h=n(506),p=n(814),d=n(9368),v=n(3797),m=n(8200),y=n(4211),g=n(1106),b=n(4760),w=n(582).set,k=n(8906),x=n(7454),S=n(1902),O=n(9468),C=n(2146),M=n(3785),E=n(9897),T=n(576),N="Promise",A=E.CONSTRUCTOR,D=E.REJECTION_EVENT,R=E.SUBCLASSING,P=C.getterFor(N),I=C.set,j=M&&M.prototype,z=M,L=j,B=c.TypeError,F=c.document,V=c.process,q=T.f,_=q,$=!!(F&&F.createEvent&&c.dispatchEvent),U="unhandledrejection",J=function(t){var e;return!(!y(t)||!m(e=t.then))&&e},W=function(t,e){var n,r,o,i=e.value,s=1===e.state,a=s?t.ok:t.fail,u=t.resolve,c=t.reject,f=t.domain;try{a?(s||(2===e.rejection&&X(e),e.rejection=1),!0===a?n=i:(f&&f.enter(),n=a(i),f&&(f.exit(),o=!0)),n===t.promise?c(new B("Promise-chain cycle")):(r=J(n))?l(r,n,u,c):u(n)):c(i)}catch(t){f&&!o&&f.exit(),c(t)}},H=function(t,e){t.notified||(t.notified=!0,k((function(){for(var n,r=t.reactions;n=r.get();)W(n,t);t.notified=!1,e&&!t.rejection&&G(t)})))},K=function(t,e,n){var r,o;$?((r=F.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!D&&(o=c["on"+t])?o(r):t===U&&x("Unhandled promise rejection",n)},G=function(t){l(w,c,(function(){var e,n=t.facade,r=t.value;if(Y(t)&&(e=S((function(){u?V.emit("unhandledRejection",r,n):K(U,n,r)})),t.rejection=u||Y(t)?2:1,e.error))throw e.value}))},Y=function(t){return 1!==t.rejection&&!t.parent},X=function(t){l(w,c,(function(){var e=t.facade;u?V.emit("rejectionHandled",e):K("rejectionhandled",e,t.value)}))},Q=function(t,e,n){return function(r){t(e,r,n)}},Z=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,H(t,!0))},tt=function t(e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===n)throw new B("Promise can't be resolved itself");var o=J(n);o?k((function(){var r={done:!1};try{l(o,n,Q(t,r,e),Q(Z,r,e))}catch(t){Z(r,t,e)}})):(e.value=n,e.state=1,H(e,!1))}catch(t){Z({done:!1},t,e)}}};if(A&&(L=(z=function(t){g(this,L),v(t),l(r,this);var e=P(this);try{t(Q(tt,e),Q(Z,e))}catch(t){Z(e,t)}}).prototype,(r=function(t){I(this,{type:N,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=f(L,"then",(function(t,e){var n=P(this),r=q(b(this,z));return n.parent=!0,r.ok=!m(t)||t,r.fail=m(e)&&e,r.domain=u?V.domain:void 0,0===n.state?n.reactions.add(r):k((function(){W(r,n)})),r.promise})),o=function(){var t=new r,e=P(t);this.promise=t,this.resolve=Q(tt,e),this.reject=Q(Z,e)},T.f=q=function(t){return t===z||void 0===t?new o(t):_(t)},!a&&m(M)&&j!==Object.prototype)){i=j.then,R||f(j,"then",(function(t,e){var n=this;return new z((function(t,e){l(i,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete j.constructor}catch(t){}h&&h(j,L)}s({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:z}),p(z,N,!1,!0),d(N)},7680:function(t,e,n){"use strict";var r=n(8993),o=n(6706),i=n(3785),s=n(5990),a=n(5784),u=n(8200),c=n(4760),l=n(9359),f=n(3201),h=i&&i.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&s((function(){h.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=c(this,a("Promise")),n=u(t);return this.then(n?function(n){return l(e,t()).then((function(){return n}))}:t,n?function(n){return l(e,t()).then((function(){throw n}))}:t)}}),!o&&u(i)){var p=a("Promise").prototype.finally;h.finally!==p&&f(h,"finally",p,{unsafe:!0})}},9085:function(t,e,n){"use strict";n(3007),n(6364),n(5064),n(7898),n(1372),n(6535)},7898:function(t,e,n){"use strict";var r=n(8993),o=n(8212),i=n(3797),s=n(576),a=n(1902),u=n(7725);r({target:"Promise",stat:!0,forced:n(2144)},{race:function(t){var e=this,n=s.f(e),r=n.reject,c=a((function(){var s=i(e.resolve);u(t,(function(t){o(s,e,t).then(n.resolve,r)}))}));return c.error&&r(c.value),n.promise}})},1372:function(t,e,n){"use strict";var r=n(8993),o=n(576);r({target:"Promise",stat:!0,forced:n(9897).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return(0,e.reject)(t),e.promise}})},6535:function(t,e,n){"use strict";var r=n(8993),o=n(5784),i=n(6706),s=n(3785),a=n(9897).CONSTRUCTOR,u=n(9359),c=o("Promise"),l=i&&!a;r({target:"Promise",stat:!0,forced:i||a},{resolve:function(t){return u(l&&this===c?s:this,t)}})},5061:function(t,e,n){"use strict";var r=n(8993),o=n(576);r({target:"Promise",stat:!0},{withResolvers:function(){var t=o.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})},8939:function(){},9991:function(t,e,n){"use strict";var r=n(1552).charAt,o=n(2062),i=n(2146),s=n(5301),a=n(4732),u="String Iterator",c=i.set,l=i.getterFor(u);s(String,"String",(function(t){c(this,{type:u,string:o(t),index:0})}),(function(){var t,e=l(this),n=e.string,o=e.index;return o>=n.length?a(void 0,!0):(t=r(n,o),e.index+=t.length,a(t,!1))}))},7755:function(t,e,n){"use strict";n(9008)("asyncIterator")},8460:function(t,e,n){"use strict";var r=n(8993),o=n(6764),i=n(8212),s=n(8197),a=n(6706),u=n(9537),c=n(6348),l=n(5990),f=n(7118),h=n(7638),p=n(9462),d=n(6992),v=n(2812),m=n(2062),y=n(8415),g=n(9749),b=n(8685),w=n(1753),k=n(921),x=n(4648),S=n(2180),O=n(8886),C=n(9306),M=n(6468),E=n(3201),T=n(2017),N=n(8342),A=n(4228),D=n(8616),R=n(8677),P=n(7942),I=n(9510),j=n(9008),z=n(4233),L=n(814),B=n(2146),F=n(2924).forEach,V=A("hidden"),q="Symbol",_="prototype",$=B.set,U=B.getterFor(q),J=Object[_],W=o.Symbol,H=W&&W[_],K=o.RangeError,G=o.TypeError,Y=o.QObject,X=S.f,Q=O.f,Z=k.f,tt=M.f,et=s([].push),nt=N("symbols"),rt=N("op-symbols"),ot=N("wks"),it=!Y||!Y[_]||!Y[_].findChild,st=function(t,e,n){var r=X(J,e);r&&delete J[e],Q(t,e,n),r&&t!==J&&Q(J,e,r)},at=u&&l((function(){return 7!==g(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?st:Q,ut=function(t,e){var n=nt[t]=g(H);return $(n,{type:q,tag:t,description:e}),u||(n.description=e),n},ct=function(t,e,n){t===J&&ct(rt,e,n),p(t);var r=v(e);return p(n),f(nt,r)?(n.enumerable?(f(t,V)&&t[V][r]&&(t[V][r]=!1),n=g(n,{enumerable:y(0,!1)})):(f(t,V)||Q(t,V,y(1,g(null))),t[V][r]=!0),at(t,r,n)):Q(t,r,n)},lt=function(t,e){p(t);var n=d(e),r=b(n).concat(dt(n));return F(r,(function(e){u&&!i(ft,n,e)||ct(t,e,n[e])})),t},ft=function(t){var e=v(t),n=i(tt,this,e);return!(this===J&&f(nt,e)&&!f(rt,e))&&(!(n||!f(this,e)||!f(nt,e)||f(this,V)&&this[V][e])||n)},ht=function(t,e){var n=d(t),r=v(e);if(n!==J||!f(nt,r)||f(rt,r)){var o=X(n,r);return!o||!f(nt,r)||f(n,V)&&n[V][r]||(o.enumerable=!0),o}},pt=function(t){var e=Z(d(t)),n=[];return F(e,(function(t){f(nt,t)||f(D,t)||et(n,t)})),n},dt=function(t){var e=t===J,n=Z(e?rt:d(t)),r=[];return F(n,(function(t){!f(nt,t)||e&&!f(J,t)||et(r,nt[t])})),r};c||(W=function(){if(h(H,this))throw new G("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?m(arguments[0]):void 0,e=R(t);return u&&it&&at(J,e,{configurable:!0,set:function t(n){var r=void 0===this?o:this;r===J&&i(t,rt,n),f(r,V)&&f(r[V],e)&&(r[V][e]=!1);var s=y(1,n);try{at(r,e,s)}catch(t){if(!(t instanceof K))throw t;st(r,e,s)}}}),ut(e,t)},E(H=W[_],"toString",(function(){return U(this).tag})),E(W,"withoutSetter",(function(t){return ut(R(t),t)})),M.f=ft,O.f=ct,C.f=lt,S.f=ht,w.f=k.f=pt,x.f=dt,I.f=function(t){return ut(P(t),t)},u&&(T(H,"description",{configurable:!0,get:function(){return U(this).description}}),a||E(J,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),F(b(ot),(function(t){j(t)})),r({target:q,stat:!0,forced:!c},{useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!u},{create:function(t,e){return void 0===e?g(t):lt(g(t),e)},defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:ht}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:pt}),z(),L(W,q),D[V]=!0},1754:function(){},1823:function(t,e,n){"use strict";var r=n(8993),o=n(5784),i=n(7118),s=n(2062),a=n(8342),u=n(4061),c=a("string-to-symbol-registry"),l=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=s(t);if(i(c,e))return c[e];var n=o("Symbol")(e);return c[e]=n,l[n]=e,n}})},8454:function(t,e,n){"use strict";n(9008)("hasInstance")},3119:function(t,e,n){"use strict";n(9008)("isConcatSpreadable")},9799:function(t,e,n){"use strict";n(9008)("iterator")},8042:function(t,e,n){"use strict";n(8460),n(1823),n(1121),n(8331),n(3062)},1121:function(t,e,n){"use strict";var r=n(8993),o=n(7118),i=n(7060),s=n(1578),a=n(8342),u=n(4061),c=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!u},{keyFor:function(t){if(!i(t))throw new TypeError(s(t)+" is not a symbol");if(o(c,t))return c[t]}})},3407:function(t,e,n){"use strict";n(9008)("matchAll")},6753:function(t,e,n){"use strict";n(9008)("match")},3712:function(t,e,n){"use strict";n(9008)("replace")},8482:function(t,e,n){"use strict";n(9008)("search")},1810:function(t,e,n){"use strict";n(9008)("species")},3400:function(t,e,n){"use strict";n(9008)("split")},1575:function(t,e,n){"use strict";var r=n(9008),o=n(4233);r("toPrimitive"),o()},9236:function(t,e,n){"use strict";var r=n(5784),o=n(9008),i=n(814);o("toStringTag"),i(r("Symbol"),"Symbol")},6671:function(t,e,n){"use strict";n(9008)("unscopables")},6447:function(){},6798:function(t,e,n){"use strict";n(6949);var r=n(8246),o=n(6764),i=n(814),s=n(4432);for(var a in r)i(o[a],a),s[a]=s.Array},5195:function(t,e,n){"use strict";n(6949);var r=n(8993),o=n(6764),i=n(5416),s=n(8212),a=n(8197),u=n(9537),c=n(617),l=n(3201),f=n(2017),h=n(612),p=n(814),d=n(2691),v=n(2146),m=n(1106),y=n(8200),g=n(7118),b=n(9641),w=n(5322),k=n(9462),x=n(4211),S=n(2062),O=n(9749),C=n(8415),M=n(9834),E=n(5926),T=n(4732),N=n(8873),A=n(7942),D=n(7987),R=A("iterator"),P="URLSearchParams",I=P+"Iterator",j=v.set,z=v.getterFor(P),L=v.getterFor(I),B=i("fetch"),F=i("Request"),V=i("Headers"),q=F&&F.prototype,_=V&&V.prototype,$=o.RegExp,U=o.TypeError,J=o.decodeURIComponent,W=o.encodeURIComponent,H=a("".charAt),K=a([].join),G=a([].push),Y=a("".replace),X=a([].shift),Q=a([].splice),Z=a("".split),tt=a("".slice),et=/\+/g,nt=Array(4),rt=function(t){return nt[t-1]||(nt[t-1]=$("((?:%[\\da-f]{2}){"+t+"})","gi"))},ot=function(t){try{return J(t)}catch(e){return t}},it=function(t){var e=Y(t,et," "),n=4;try{return J(e)}catch(t){for(;n;)e=Y(e,rt(n--),ot);return e}},st=/[!'()~]|%20/g,at={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ut=function(t){return at[t]},ct=function(t){return Y(W(t),st,ut)},lt=d((function(t,e){j(this,{type:I,target:z(t).entries,index:0,kind:e})}),P,(function(){var t=L(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,T(void 0,!0);var r=e[n];switch(t.kind){case"keys":return T(r.key,!1);case"values":return T(r.value,!1)}return T([r.key,r.value],!1)}),!0),ft=function(t){this.entries=[],this.url=null,void 0!==t&&(x(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===H(t,0)?tt(t,1):t:S(t)))};ft.prototype={type:P,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,o,i,a,u,c=this.entries,l=E(t);if(l)for(n=(e=M(t,l)).next;!(r=s(n,e)).done;){if(i=(o=M(k(r.value))).next,(a=s(i,o)).done||(u=s(i,o)).done||!s(i,o).done)throw new U("Expected sequence with length 2");G(c,{key:S(a.value),value:S(u.value)})}else for(var f in t)g(t,f)&&G(c,{key:f,value:S(t[f])})},parseQuery:function(t){if(t)for(var e,n,r=this.entries,o=Z(t,"&"),i=0;i<o.length;)(e=o[i++]).length&&(n=Z(e,"="),G(r,{key:it(X(n)),value:it(K(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],r=0;r<e.length;)t=e[r++],G(n,ct(t.key)+"="+ct(t.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ht=function(){m(this,pt);var t=j(this,new ft(arguments.length>0?arguments[0]:void 0));u||(this.size=t.entries.length)},pt=ht.prototype;if(h(pt,{append:function(t,e){var n=z(this);N(arguments.length,2),G(n.entries,{key:S(t),value:S(e)}),u||this.length++,n.updateURL()},delete:function(t){for(var e=z(this),n=N(arguments.length,1),r=e.entries,o=S(t),i=n<2?void 0:arguments[1],s=void 0===i?i:S(i),a=0;a<r.length;){var c=r[a];if(c.key!==o||void 0!==s&&c.value!==s)a++;else if(Q(r,a,1),void 0!==s)break}u||(this.size=r.length),e.updateURL()},get:function(t){var e=z(this).entries;N(arguments.length,1);for(var n=S(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){var e=z(this).entries;N(arguments.length,1);for(var n=S(t),r=[],o=0;o<e.length;o++)e[o].key===n&&G(r,e[o].value);return r},has:function(t){for(var e=z(this).entries,n=N(arguments.length,1),r=S(t),o=n<2?void 0:arguments[1],i=void 0===o?o:S(o),s=0;s<e.length;){var a=e[s++];if(a.key===r&&(void 0===i||a.value===i))return!0}return!1},set:function(t,e){var n=z(this);N(arguments.length,1);for(var r,o=n.entries,i=!1,s=S(t),a=S(e),c=0;c<o.length;c++)(r=o[c]).key===s&&(i?Q(o,c--,1):(i=!0,r.value=a));i||G(o,{key:s,value:a}),u||(this.size=o.length),n.updateURL()},sort:function(){var t=z(this);D(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=z(this).entries,r=b(t,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((e=n[o++]).value,e.key,this)},keys:function(){return new lt(this,"keys")},values:function(){return new lt(this,"values")},entries:function(){return new lt(this,"entries")}},{enumerable:!0}),l(pt,R,pt.entries,{name:"entries"}),l(pt,"toString",(function(){return z(this).serialize()}),{enumerable:!0}),u&&f(pt,"size",{get:function(){return z(this).entries.length},configurable:!0,enumerable:!0}),p(ht,P),r({global:!0,constructor:!0,forced:!c},{URLSearchParams:ht}),!c&&y(V)){var dt=a(_.has),vt=a(_.set),mt=function(t){if(x(t)){var e,n=t.body;if(w(n)===P)return e=t.headers?new V(t.headers):new V,dt(e,"content-type")||vt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),O(t,{body:C(0,S(n)),headers:C(0,e)})}return t};if(y(B)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return B(t,arguments.length>1?mt(arguments[1]):{})}}),y(F)){var yt=function(t){return m(this,q),new F(t,arguments.length>1?mt(arguments[1]):{})};q.constructor=yt,yt.prototype=q,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:yt})}}t.exports={URLSearchParams:ht,getState:z}},3576:function(){},9463:function(){},9665:function(t,e,n){"use strict";n(5195)},1277:function(){},8947:function(t,e,n){"use strict";var r=n(8993),o=n(5784),i=n(5990),s=n(8873),a=n(2062),u=n(617),c=o("URL"),l=u&&i((function(){c.canParse()})),f=i((function(){return 1!==c.canParse.length}));r({target:"URL",stat:!0,forced:!l||f},{canParse:function(t){var e=s(arguments.length,1),n=a(t),r=e<2||void 0===arguments[1]?void 0:a(arguments[1]);try{return!!new c(n,r)}catch(t){return!1}}})},875:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n(9991);var o,i=n(8993),s=n(9537),a=n(617),u=n(6764),c=n(9641),l=n(8197),f=n(3201),h=n(2017),p=n(1106),d=n(7118),v=n(9348),m=n(6375),y=n(6125),g=n(1552).codeAt,b=n(5210),w=n(2062),k=n(814),x=n(8873),S=n(5195),O=n(2146),C=O.set,M=O.getterFor("URL"),E=S.URLSearchParams,T=S.getState,N=u.URL,A=u.TypeError,D=u.parseInt,R=Math.floor,P=Math.pow,I=l("".charAt),j=l(/./.exec),z=l([].join),L=l(1..toString),B=l([].pop),F=l([].push),V=l("".replace),q=l([].shift),_=l("".split),$=l("".slice),U=l("".toLowerCase),J=l([].unshift),W="Invalid scheme",H="Invalid host",K="Invalid port",G=/[a-z]/i,Y=/[\d+-.a-z]/i,X=/\d/,Q=/^0x/i,Z=/^[0-7]+$/,tt=/^\d+$/,et=/^[\da-f]+$/i,nt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,rt=/[\0\t\n\r #/:<>?@[\\\]^|]/,ot=/^[\u0000-\u0020]+/,it=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,st=/[\t\n\r]/g,at=function(t){var e,n,o,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)J(e,t%256),t=R(t/256);return z(e,".")}if("object"==r(t)){for(e="",o=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),o===n?(e+=n?":":"::",i=!0):(e+=L(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},ut={},ct=v({},ut,{" ":1,'"':1,"<":1,">":1,"`":1}),lt=v({},ct,{"#":1,"?":1,"{":1,"}":1}),ft=v({},lt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ht=function(t,e){var n=g(t,0);return n>32&&n<127&&!d(e,t)?t:encodeURIComponent(t)},pt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},dt=function(t,e){var n;return 2===t.length&&j(G,I(t,0))&&(":"===(n=I(t,1))||!e&&"|"===n)},vt=function(t){var e;return t.length>1&&dt($(t,0,2))&&(2===t.length||"/"===(e=I(t,2))||"\\"===e||"?"===e||"#"===e)},mt=function(t){return"."===t||"%2e"===U(t)},yt={},gt={},bt={},wt={},kt={},xt={},St={},Ot={},Ct={},Mt={},Et={},Tt={},Nt={},At={},Dt={},Rt={},Pt={},It={},jt={},zt={},Lt={},Bt=function t(e,n,r){var o,i,s,a=w(e);if(n){if(i=this.parse(a))throw new A(i);this.searchParams=null}else{if(void 0!==r&&(o=new t(r,!0)),i=this.parse(a,null,o))throw new A(i);(s=T(new E)).bindURL(this),this.searchParams=s}};Bt.prototype={type:"URL",parse:function(t,e,n){var r,i,s,a,u,c=this,l=e||yt,f=0,h="",p=!1,v=!1,g=!1;for(t=w(t),e||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,t=V(t,ot,""),t=V(t,it,"$1")),t=V(t,st,""),r=m(t);f<=r.length;){switch(i=r[f],l){case yt:if(!i||!j(G,i)){if(e)return W;l=bt;continue}h+=U(i),l=gt;break;case gt:if(i&&(j(Y,i)||"+"===i||"-"===i||"."===i))h+=U(i);else{if(":"!==i){if(e)return W;h="",l=bt,f=0;continue}if(e&&(c.isSpecial()!==d(pt,h)||"file"===h&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=h,e)return void(c.isSpecial()&&pt[c.scheme]===c.port&&(c.port=null));h="","file"===c.scheme?l=At:c.isSpecial()&&n&&n.scheme===c.scheme?l=wt:c.isSpecial()?l=Ot:"/"===r[f+1]?(l=kt,f++):(c.cannotBeABaseURL=!0,F(c.path,""),l=jt)}break;case bt:if(!n||n.cannotBeABaseURL&&"#"!==i)return W;if(n.cannotBeABaseURL&&"#"===i){c.scheme=n.scheme,c.path=y(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=Lt;break}l="file"===n.scheme?At:xt;continue;case wt:if("/"!==i||"/"!==r[f+1]){l=xt;continue}l=Ct,f++;break;case kt:if("/"===i){l=Mt;break}l=It;continue;case xt:if(c.scheme=n.scheme,i===o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=y(n.path),c.query=n.query;else if("/"===i||"\\"===i&&c.isSpecial())l=St;else if("?"===i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=y(n.path),c.query="",l=zt;else{if("#"!==i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=y(n.path),c.path.length--,l=It;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=y(n.path),c.query=n.query,c.fragment="",l=Lt}break;case St:if(!c.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=It;continue}l=Mt}else l=Ct;break;case Ot:if(l=Ct,"/"!==i||"/"!==I(h,f+1))continue;f++;break;case Ct:if("/"!==i&&"\\"!==i){l=Mt;continue}break;case Mt:if("@"===i){p&&(h="%40"+h),p=!0,s=m(h);for(var b=0;b<s.length;b++){var k=s[b];if(":"!==k||g){var x=ht(k,ft);g?c.password+=x:c.username+=x}else g=!0}h=""}else if(i===o||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(p&&""===h)return"Invalid authority";f-=m(h).length+1,h="",l=Et}else h+=i;break;case Et:case Tt:if(e&&"file"===c.scheme){l=Rt;continue}if(":"!==i||v){if(i===o||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()){if(c.isSpecial()&&""===h)return H;if(e&&""===h&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(h))return a;if(h="",l=Pt,e)return;continue}"["===i?v=!0:"]"===i&&(v=!1),h+=i}else{if(""===h)return H;if(a=c.parseHost(h))return a;if(h="",l=Nt,e===Tt)return}break;case Nt:if(!j(X,i)){if(i===o||"/"===i||"?"===i||"#"===i||"\\"===i&&c.isSpecial()||e){if(""!==h){var S=D(h,10);if(S>65535)return K;c.port=c.isSpecial()&&S===pt[c.scheme]?null:S,h=""}if(e)return;l=Pt;continue}return K}h+=i;break;case At:if(c.scheme="file","/"===i||"\\"===i)l=Dt;else{if(!n||"file"!==n.scheme){l=It;continue}switch(i){case o:c.host=n.host,c.path=y(n.path),c.query=n.query;break;case"?":c.host=n.host,c.path=y(n.path),c.query="",l=zt;break;case"#":c.host=n.host,c.path=y(n.path),c.query=n.query,c.fragment="",l=Lt;break;default:vt(z(y(r,f),""))||(c.host=n.host,c.path=y(n.path),c.shortenPath()),l=It;continue}}break;case Dt:if("/"===i||"\\"===i){l=Rt;break}n&&"file"===n.scheme&&!vt(z(y(r,f),""))&&(dt(n.path[0],!0)?F(c.path,n.path[0]):c.host=n.host),l=It;continue;case Rt:if(i===o||"/"===i||"\\"===i||"?"===i||"#"===i){if(!e&&dt(h))l=It;else if(""===h){if(c.host="",e)return;l=Pt}else{if(a=c.parseHost(h))return a;if("localhost"===c.host&&(c.host=""),e)return;h="",l=Pt}continue}h+=i;break;case Pt:if(c.isSpecial()){if(l=It,"/"!==i&&"\\"!==i)continue}else if(e||"?"!==i)if(e||"#"!==i){if(i!==o&&(l=It,"/"!==i))continue}else c.fragment="",l=Lt;else c.query="",l=zt;break;case It:if(i===o||"/"===i||"\\"===i&&c.isSpecial()||!e&&("?"===i||"#"===i)){if(".."===(u=U(u=h))||"%2e."===u||".%2e"===u||"%2e%2e"===u?(c.shortenPath(),"/"===i||"\\"===i&&c.isSpecial()||F(c.path,"")):mt(h)?"/"===i||"\\"===i&&c.isSpecial()||F(c.path,""):("file"===c.scheme&&!c.path.length&&dt(h)&&(c.host&&(c.host=""),h=I(h,0)+":"),F(c.path,h)),h="","file"===c.scheme&&(i===o||"?"===i||"#"===i))for(;c.path.length>1&&""===c.path[0];)q(c.path);"?"===i?(c.query="",l=zt):"#"===i&&(c.fragment="",l=Lt)}else h+=ht(i,lt);break;case jt:"?"===i?(c.query="",l=zt):"#"===i?(c.fragment="",l=Lt):i!==o&&(c.path[0]+=ht(i,ut));break;case zt:e||"#"!==i?i!==o&&("'"===i&&c.isSpecial()?c.query+="%27":c.query+="#"===i?"%23":ht(i,ut)):(c.fragment="",l=Lt);break;case Lt:i!==o&&(c.fragment+=ht(i,ct))}f++}},parseHost:function(t){var e,n,r;if("["===I(t,0)){if("]"!==I(t,t.length-1))return H;if(e=function(t){var e,n,r,o,i,s,a,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,h=function(){return I(t,f)};if(":"===h()){if(":"!==I(t,1))return;f+=2,l=++c}for(;h();){if(8===c)return;if(":"!==h()){for(e=n=0;n<4&&j(et,h());)e=16*e+D(h(),16),f++,n++;if("."===h()){if(0===n)return;if(f-=n,c>6)return;for(r=0;h();){if(o=null,r>0){if(!("."===h()&&r<4))return;f++}if(!j(X,h()))return;for(;j(X,h());){if(i=D(h(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;f++}u[c]=256*u[c]+o,2!=++r&&4!==r||c++}if(4!==r)return;break}if(":"===h()){if(f++,!h())return}else if(h())return;u[c++]=e}else{if(null!==l)return;f++,l=++c}}if(null!==l)for(s=c-l,c=7;0!==c&&s>0;)a=u[c],u[c--]=u[l+s-1],u[l+--s]=a;else if(8!==c)return;return u}($(t,1,-1)),!e)return H;this.host=e}else if(this.isSpecial()){if(t=b(t),j(nt,t))return H;if(e=function(t){var e,n,r,o,i,s,a,u=_(t,".");if(u.length&&""===u[u.length-1]&&u.length--,(e=u.length)>4)return t;for(n=[],r=0;r<e;r++){if(""===(o=u[r]))return t;if(i=10,o.length>1&&"0"===I(o,0)&&(i=j(Q,o)?16:8,o=$(o,8===i?1:2)),""===o)s=0;else{if(!j(10===i?tt:8===i?Z:et,o))return t;s=D(o,i)}F(n,s)}for(r=0;r<e;r++)if(s=n[r],r===e-1){if(s>=P(256,5-e))return null}else if(s>255)return null;for(a=B(n),r=0;r<n.length;r++)a+=n[r]*P(256,3-r);return a}(t),null===e)return H;this.host=e}else{if(j(rt,t))return H;for(e="",n=m(t),r=0;r<n.length;r++)e+=ht(n[r],ut);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return d(pt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&dt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,s=t.path,a=t.query,u=t.fragment,c=e+":";return null!==o?(c+="//",t.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=at(o),null!==i&&(c+=":"+i)):"file"===e&&(c+="//"),c+=t.cannotBeABaseURL?s[0]:s.length?"/"+z(s,"/"):"",null!==a&&(c+="?"+a),null!==u&&(c+="#"+u),c},setHref:function(t){var e=this.parse(t);if(e)throw new A(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Ft(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+at(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(w(t)+":",yt)},getUsername:function(){return this.username},setUsername:function(t){var e=m(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=ht(e[n],ft)}},getPassword:function(){return this.password},setPassword:function(t){var e=m(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=ht(e[n],ft)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?at(t):at(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Et)},getHostname:function(){var t=this.host;return null===t?"":at(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Tt)},getPort:function(){var t=this.port;return null===t?"":w(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=w(t))?this.port=null:this.parse(t,Nt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+z(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Pt))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=w(t))?this.query=null:("?"===I(t,0)&&(t=$(t,1)),this.query="",this.parse(t,zt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=w(t))?("#"===I(t,0)&&(t=$(t,1)),this.fragment="",this.parse(t,Lt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ft=function(t){var e=p(this,Vt),n=x(arguments.length,1)>1?arguments[1]:void 0,r=C(e,new Bt(t,!1,n));s||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},Vt=Ft.prototype,qt=function(t,e){return{get:function(){return M(this)[t]()},set:e&&function(t){return M(this)[e](t)},configurable:!0,enumerable:!0}};if(s&&(h(Vt,"href",qt("serialize","setHref")),h(Vt,"origin",qt("getOrigin")),h(Vt,"protocol",qt("getProtocol","setProtocol")),h(Vt,"username",qt("getUsername","setUsername")),h(Vt,"password",qt("getPassword","setPassword")),h(Vt,"host",qt("getHost","setHost")),h(Vt,"hostname",qt("getHostname","setHostname")),h(Vt,"port",qt("getPort","setPort")),h(Vt,"pathname",qt("getPathname","setPathname")),h(Vt,"search",qt("getSearch","setSearch")),h(Vt,"searchParams",qt("getSearchParams")),h(Vt,"hash",qt("getHash","setHash"))),f(Vt,"toJSON",(function(){return M(this).serialize()}),{enumerable:!0}),f(Vt,"toString",(function(){return M(this).serialize()}),{enumerable:!0}),N){var _t=N.createObjectURL,$t=N.revokeObjectURL;_t&&f(Ft,"createObjectURL",c(_t,N)),$t&&f(Ft,"revokeObjectURL",c($t,N))}k(Ft,"URL"),i({global:!0,constructor:!0,forced:!a,sham:!s},{URL:Ft})},1249:function(t,e,n){"use strict";n(875)},2052:function(t,e,n){"use strict";var r=n(8993),o=n(5784),i=n(8873),s=n(2062),a=n(617),u=o("URL");r({target:"URL",stat:!0,forced:!a},{parse:function(t){var e=i(arguments.length,1),n=s(t),r=e<2||void 0===arguments[1]?void 0:s(arguments[1]);try{return new u(n,r)}catch(t){return null}}})},1729:function(){},4596:function(t,e,n){"use strict";var r=n(9373);t.exports=r},1932:function(t,e,n){"use strict";var r=n(2089);t.exports=r},8003:function(t,e,n){"use strict";var r=n(8162);t.exports=r},520:function(t,e,n){"use strict";var r=n(8325);t.exports=r},1733:function(t,e,n){"use strict";var r=n(6729);n(6798),t.exports=r},6908:function(t,e,n){"use strict";var r=n(7571);t.exports=r},3642:function(t,e,n){"use strict";var r=n(209);t.exports=r},9535:function(t,e,n){"use strict";var r=n(5322),o=n(7118),i=n(7638),s=n(8003);n(6447);var a=Array.prototype,u={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===a||i(a,t)&&e===a.forEach||o(u,r(t))?s:e}},8991:function(t,e,n){"use strict";n(6798);var r=n(5322),o=n(7118),i=n(7638),s=n(520),a=Array.prototype,u={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.keys;return t===a||i(a,t)&&e===a.keys||o(u,r(t))?s:e}},1392:function(t,e,n){"use strict";var r=n(6205);t.exports=r},575:function(t,e,n){"use strict";var r=n(6945);t.exports=r},3033:function(t,e,n){"use strict";var r=n(9650);n(6798),t.exports=r},8292:function(t,e,n){"use strict";var r=n(9643);t.exports=r},2602:function(t,e,n){"use strict";var r=n(2828);t.exports=r},8437:function(t,e,n){"use strict";var r=n(620);t.exports=r},7775:function(t,e,n){"use strict";var r=n(6534);t.exports=r},5658:function(t,e,n){"use strict";var r=n(5309);t.exports=r},9377:function(t,e,n){"use strict";var r=n(5538);t.exports=r},7495:function(t,e,n){"use strict";var r=n(9380);t.exports=r},6604:function(t,e,n){"use strict";var r=n(3499);t.exports=r},9187:function(t,e,n){"use strict";var r=n(9688);t.exports=r},238:function(t,e,n){"use strict";var r=n(7513);n(6798),t.exports=r},8017:function(t,e,n){"use strict";var r=n(4116);n(6798),t.exports=r},8679:function(t,e,n){"use strict";var r=n(4512);n(6798),t.exports=r},1536:function(t,e,n){"use strict";var r=n(8136);t.exports=r},3962:function(t,e,n){"use strict";var r=n(5570);t.exports=r},8710:function(t,e,n){"use strict";n(9665),n(3576),n(9463),n(1277);var r=n(1252);t.exports=r.URLSearchParams},5570:function(t,e,n){"use strict";n(8710),n(1249),n(8947),n(2052),n(1729);var r=n(1252);t.exports=r.URL},3593:function(t,e,n){"use strict";var r=n(548),o=n(6942),i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not a function")}},513:function(t,e,n){"use strict";var r=n(1776),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},3010:function(t,e,n){"use strict";var r=n(8439),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not an object")}},5418:function(t,e,n){"use strict";var r=n(7428),o=n(2443),i=n(613),s=function(t){return function(e,n,s){var a=r(e),u=i(a);if(0===u)return!t&&-1;var c,l=o(s,u);if(t&&n!=n){for(;u>l;)if((c=a[l++])!=c)return!0}else for(;u>l;l++)if((t||l in a)&&a[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},5849:function(t,e,n){"use strict";var r=n(5097),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},7190:function(t,e,n){"use strict";var r=n(6025),o=n(548),i=n(5849),s=n(9666)("toStringTag"),a=Object,u="Arguments"===i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:u?i(e):"Object"===(r=i(e))&&o(e.callee)?"Arguments":r}},6217:function(t,e,n){"use strict";var r=n(1242),o=n(1096),i=n(960),s=n(3722);t.exports=function(t,e,n){for(var a=o(e),u=s.f,c=i.f,l=0;l<a.length;l++){var f=a[l];r(t,f)||n&&r(n,f)||u(t,f,c(e,f))}}},2757:function(t,e,n){"use strict";var r=n(5097),o=n(125),i=n(5330),s=/"/g,a=r("".replace);t.exports=function(t,e,n,r){var u=i(o(t)),c="<"+e;return""!==n&&(c+=" "+n+'="'+a(i(r),s,"&quot;")+'"'),c+">"+u+"</"+e+">"}},7472:function(t,e,n){"use strict";var r=n(4277),o=n(3722),i=n(9931);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9931:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},8829:function(t,e,n){"use strict";var r=n(9594),o=n(3722);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),o.f(t,e,n)}},7613:function(t,e,n){"use strict";var r=n(548),o=n(3722),i=n(9594),s=n(70);t.exports=function(t,e,n,a){a||(a={});var u=a.enumerable,c=void 0!==a.name?a.name:e;if(r(n)&&i(n,c,a),a.global)u?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},70:function(t,e,n){"use strict";var r=n(2632),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},4277:function(t,e,n){"use strict";var r=n(2138);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4382:function(t,e,n){"use strict";var r=n(2632),o=n(8439),i=r.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},2581:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7821:function(t,e,n){"use strict";var r,o,i=n(2632),s=n(2581),a=i.process,u=i.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l&&(o=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},2738:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7685:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(2632),i=n(960).f,s=n(7472),a=n(7613),u=n(70),c=n(6217),l=n(7377);t.exports=function(t,e){var n,f,h,p,d,v=t.target,m=t.global,y=t.stat;if(n=m?o:y?o[v]||u(v,{}):o[v]&&o[v].prototype)for(f in e){if(p=e[f],h=t.dontCallGetSet?(d=i(n,f))&&d.value:n[f],!l(m?f:v+(y?".":"#")+f,t.forced)&&void 0!==h){if(r(p)==r(h))continue;c(p,h)}(t.sham||h&&h.sham)&&s(p,"sham",!0),a(n,f,p,t)}}},2138:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},2375:function(t,e,n){"use strict";var r=n(2138);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},5984:function(t,e,n){"use strict";var r=n(2375),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6663:function(t,e,n){"use strict";var r=n(4277),o=n(1242),i=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=o(i,"name"),u=a&&"something"===function(){}.name,c=a&&(!r||r&&s(i,"name").configurable);t.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},7881:function(t,e,n){"use strict";var r=n(5097),o=n(3593);t.exports=function(t,e,n){try{return r(o(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},5097:function(t,e,n){"use strict";var r=n(2375),o=Function.prototype,i=o.call,s=r&&o.bind.bind(i,i);t.exports=r?s:function(t){return function(){return i.apply(t,arguments)}}},668:function(t,e,n){"use strict";var r=n(2632),o=n(548);t.exports=function(t,e){return arguments.length<2?(n=r[t],o(n)?n:void 0):r[t]&&r[t][e];var n}},5273:function(t,e,n){"use strict";var r=n(3593),o=n(4118);t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},2632:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=function(t){return t&&t.Math===Math&&t};t.exports=o("object"==("undefined"==typeof globalThis?"undefined":r(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":r(window))&&window)||o("object"==("undefined"==typeof self?"undefined":r(self))&&self)||o("object"==(void 0===n.g?"undefined":r(n.g))&&n.g)||o("object"==r(this)&&this)||function(){return this}()||Function("return this")()},1242:function(t,e,n){"use strict";var r=n(5097),o=n(9908),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},7612:function(t){"use strict";t.exports={}},1930:function(t,e,n){"use strict";var r=n(668);t.exports=r("document","documentElement")},9598:function(t,e,n){"use strict";var r=n(4277),o=n(2138),i=n(4382);t.exports=!r&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},3784:function(t,e,n){"use strict";var r=n(5097),o=n(2138),i=n(5849),s=Object,a=r("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?a(t,""):s(t)}:s},1630:function(t,e,n){"use strict";var r=n(548),o=n(8439),i=n(8774);t.exports=function(t,e,n){var s,a;return i&&r(s=e.constructor)&&s!==n&&o(a=s.prototype)&&a!==n.prototype&&i(t,a),t}},5981:function(t,e,n){"use strict";var r=n(5097),o=n(548),i=n(9950),s=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return s(t)}),t.exports=i.inspectSource},5254:function(t,e,n){"use strict";var r,o,i,s=n(785),a=n(2632),u=n(8439),c=n(7472),l=n(1242),f=n(9950),h=n(8464),p=n(7612),d="Object already initialized",v=a.TypeError,m=a.WeakMap;if(s||f.state){var y=f.state||(f.state=new m);y.get=y.get,y.has=y.has,y.set=y.set,r=function(t,e){if(y.has(t))throw new v(d);return e.facade=t,y.set(t,e),e},o=function(t){return y.get(t)||{}},i=function(t){return y.has(t)}}else{var g=h("state");p[g]=!0,r=function(t,e){if(l(t,g))throw new v(d);return e.facade=t,c(t,g,e),e},o=function(t){return l(t,g)?t[g]:{}},i=function(t){return l(t,g)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=o(e)).type!==t)throw new v("Incompatible receiver, "+t+" required");return n}}}},548:function(t){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var n="object"==("undefined"==typeof document?"undefined":e(document))&&document.all;t.exports=void 0===n&&void 0!==n?function(t){return"function"==typeof t||t===n}:function(t){return"function"==typeof t}},7377:function(t,e,n){"use strict";var r=n(2138),o=n(548),i=/#|\.prototype\./,s=function(t,e){var n=u[a(t)];return n===l||n!==c&&(o(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},4118:function(t){"use strict";t.exports=function(t){return null==t}},8439:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(548);t.exports=function(t){return"object"==r(t)?null!==t:o(t)}},1776:function(t,e,n){"use strict";var r=n(8439);t.exports=function(t){return r(t)||null===t}},5870:function(t){"use strict";t.exports=!1},9889:function(t,e,n){"use strict";var r=n(8439),o=n(5849),i=n(9666)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"===o(t))}},8520:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(668),i=n(548),s=n(6746),a=n(3129),u=Object;t.exports=a?function(t){return"symbol"==r(t)}:function(t){var e=o("Symbol");return i(e)&&s(e.prototype,u(t))}},613:function(t,e,n){"use strict";var r=n(2035);t.exports=function(t){return r(t.length)}},9594:function(t,e,n){"use strict";var r=n(5097),o=n(2138),i=n(548),s=n(1242),a=n(4277),u=n(6663).CONFIGURABLE,c=n(5981),l=n(5254),f=l.enforce,h=l.get,p=String,d=Object.defineProperty,v=r("".slice),m=r("".replace),y=r([].join),g=a&&!o((function(){return 8!==d((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===v(p(e),0,7)&&(e="["+m(p(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||u&&t.name!==e)&&(a?d(t,"name",{value:e,configurable:!0}):t.name=e),g&&n&&s(n,"arity")&&t.length!==n.arity&&d(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=f(t);return s(r,"source")||(r.source=y(b,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return i(this)&&h(this).source||c(this)}),"toString")},9702:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},9073:function(t,e,n){"use strict";var r,o=n(3010),i=n(1910),s=n(2738),a=n(7612),u=n(1930),c=n(4382),l=n(8464),f="prototype",h="script",p=l("IE_PROTO"),d=function(){},v=function(t){return"<"+h+">"+t+"</"+h+">"},m=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;y="undefined"!=typeof document?document.domain&&r?m(r):(e=c("iframe"),n="java"+h+":",e.style.display="none",u.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):m(r);for(var o=s.length;o--;)delete y[f][s[o]];return y()};a[p]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(d[f]=o(t),n=new d,d[f]=null,n[p]=t):n=y(),void 0===e?n:i.f(n,e)}},1910:function(t,e,n){"use strict";var r=n(4277),o=n(4411),i=n(3722),s=n(3010),a=n(7428),u=n(3577);e.f=r&&!o?Object.defineProperties:function(t,e){s(t);for(var n,r=a(e),o=u(e),c=o.length,l=0;c>l;)i.f(t,n=o[l++],r[n]);return t}},3722:function(t,e,n){"use strict";var r=n(4277),o=n(9598),i=n(4411),s=n(3010),a=n(3424),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",h="configurable",p="writable";e.f=r?i?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&p in n&&!n[p]){var r=l(t,e);r&&r[p]&&(t[e]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:f in n?n[f]:r[f],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),o)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},960:function(t,e,n){"use strict";var r=n(4277),o=n(5984),i=n(5400),s=n(9931),a=n(7428),u=n(3424),c=n(1242),l=n(9598),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=u(e),l)try{return f(t,e)}catch(t){}if(c(t,e))return s(!o(i.f,t,e),t[e])}},6181:function(t,e,n){"use strict";var r=n(3243),o=n(2738).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},3492:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},6746:function(t,e,n){"use strict";var r=n(5097);t.exports=r({}.isPrototypeOf)},3243:function(t,e,n){"use strict";var r=n(5097),o=n(1242),i=n(7428),s=n(5418).indexOf,a=n(7612),u=r([].push);t.exports=function(t,e){var n,r=i(t),c=0,l=[];for(n in r)!o(a,n)&&o(r,n)&&u(l,n);for(;e.length>c;)o(r,n=e[c++])&&(~s(l,n)||u(l,n));return l}},3577:function(t,e,n){"use strict";var r=n(3243),o=n(2738);t.exports=Object.keys||function(t){return r(t,o)}},5400:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},8774:function(t,e,n){"use strict";var r=n(7881),o=n(8439),i=n(125),s=n(513);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return i(n),s(r),o(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0)},2044:function(t,e,n){"use strict";var r=n(6025),o=n(7190);t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},9655:function(t,e,n){"use strict";var r=n(5984),o=n(548),i=n(8439),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&o(n=t.toString)&&!i(a=r(n,t)))return a;if(o(n=t.valueOf)&&!i(a=r(n,t)))return a;if("string"!==e&&o(n=t.toString)&&!i(a=r(n,t)))return a;throw new s("Can't convert object to primitive value")}},1096:function(t,e,n){"use strict";var r=n(668),o=n(5097),i=n(6181),s=n(3492),a=n(3010),u=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=s.f;return n?u(e,n(t)):e}},7944:function(t,e,n){"use strict";var r=n(2632);t.exports=r},4527:function(t,e,n){"use strict";var r=n(3722).f;t.exports=function(t,e,n){n in t||r(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},9606:function(t,e,n){"use strict";var r,o,i=n(5984),s=n(5097),a=n(5330),u=n(4572),c=n(672),l=n(7285),f=n(9073),h=n(5254).get,p=n(8348),d=n(5865),v=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,y=m,g=s("".charAt),b=s("".indexOf),w=s("".replace),k=s("".slice),x=(o=/b*/g,i(m,r=/a/,"a"),i(m,o,"a"),0!==r.lastIndex||0!==o.lastIndex),S=c.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(x||O||S||p||d)&&(y=function(t){var e,n,r,o,s,c,l,p=this,d=h(p),C=a(t),M=d.raw;if(M)return M.lastIndex=p.lastIndex,e=i(y,M,C),p.lastIndex=M.lastIndex,e;var E=d.groups,T=S&&p.sticky,N=i(u,p),A=p.source,D=0,R=C;if(T&&(N=w(N,"y",""),-1===b(N,"g")&&(N+="g"),R=k(C,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==g(C,p.lastIndex-1))&&(A="(?: "+A+")",R=" "+R,D++),n=new RegExp("^(?:"+A+")",N)),O&&(n=new RegExp("^"+A+"$(?!\\s)",N)),x&&(r=p.lastIndex),o=i(m,T?n:p,R),T?o?(o.input=k(o.input,D),o[0]=k(o[0],D),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:x&&o&&(p.lastIndex=p.global?o.index+o[0].length:r),O&&o&&o.length>1&&i(v,o[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)})),o&&E)for(o.groups=c=f(null),s=0;s<E.length;s++)c[(l=E[s])[0]]=o[l[1]];return o}),t.exports=y},4572:function(t,e,n){"use strict";var r=n(3010);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},7601:function(t,e,n){"use strict";var r=n(5984),o=n(1242),i=n(6746),s=n(4572),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||o(t,"flags")||!i(a,t)?e:r(s,t)}},672:function(t,e,n){"use strict";var r=n(2138),o=n(2632).RegExp,i=r((function(){var t=o("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),s=i||r((function(){return!o("a","y").sticky})),a=i||r((function(){var t=o("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i}},8348:function(t,e,n){"use strict";var r=n(2138),o=n(2632).RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},5865:function(t,e,n){"use strict";var r=n(2138),o=n(2632).RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},125:function(t,e,n){"use strict";var r=n(4118),o=TypeError;t.exports=function(t){if(r(t))throw new o("Can't call method on "+t);return t}},7972:function(t,e,n){"use strict";var r=n(668),o=n(8829),i=n(9666),s=n(4277),a=i("species");t.exports=function(t){var e=r(t);s&&e&&!e[a]&&o(e,a,{configurable:!0,get:function(){return this}})}},8464:function(t,e,n){"use strict";var r=n(7285),o=n(8121),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},9950:function(t,e,n){"use strict";var r=n(5870),o=n(2632),i=n(70),s="__core-js_shared__",a=t.exports=o[s]||i(s,{});(a.versions||(a.versions=[])).push({version:"3.37.1",mode:r?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"})},7285:function(t,e,n){"use strict";var r=n(9950);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},862:function(t,e,n){"use strict";var r=n(2138);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},5115:function(t,e,n){"use strict";var r=n(5097),o=n(125),i=n(5330),s=n(7441),a=r("".replace),u=RegExp("^["+s+"]+"),c=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(t){return function(e){var n=i(o(e));return 1&t&&(n=a(n,u,"")),2&t&&(n=a(n,c,"$1")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},9416:function(t,e,n){"use strict";var r=n(7821),o=n(2138),i=n(2632).String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1073:function(t,e,n){"use strict";var r=n(5097);t.exports=r(1..valueOf)},2443:function(t,e,n){"use strict";var r=n(5904),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},7428:function(t,e,n){"use strict";var r=n(3784),o=n(125);t.exports=function(t){return r(o(t))}},5904:function(t,e,n){"use strict";var r=n(9702);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},2035:function(t,e,n){"use strict";var r=n(5904),o=Math.min;t.exports=function(t){var e=r(t);return e>0?o(e,9007199254740991):0}},9908:function(t,e,n){"use strict";var r=n(125),o=Object;t.exports=function(t){return o(r(t))}},1146:function(t,e,n){"use strict";var r=n(5984),o=n(8439),i=n(8520),s=n(5273),a=n(9655),u=n(9666),c=TypeError,l=u("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,u=s(t,l);if(u){if(void 0===e&&(e="default"),n=r(u,t,e),!o(n)||i(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},3424:function(t,e,n){"use strict";var r=n(1146),o=n(8520);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},6025:function(t,e,n){"use strict";var r={};r[n(9666)("toStringTag")]="z",t.exports="[object z]"===String(r)},5330:function(t,e,n){"use strict";var r=n(7190),o=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},6942:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},8121:function(t,e,n){"use strict";var r=n(5097),o=0,i=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++o+i,36)}},3129:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var o=n(9416);t.exports=o&&!Symbol.sham&&"symbol"==r(Symbol.iterator)},4411:function(t,e,n){"use strict";var r=n(4277),o=n(2138);t.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},785:function(t,e,n){"use strict";var r=n(2632),o=n(548),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},9666:function(t,e,n){"use strict";var r=n(2632),o=n(7285),i=n(1242),s=n(8121),a=n(9416),u=n(3129),c=r.Symbol,l=o("wks"),f=u?c.for||c:c&&c.withoutSetter||s;t.exports=function(t){return i(l,t)||(l[t]=a&&i(c,t)?c[t]:f("Symbol."+t)),l[t]}},7441:function(t){"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9109:function(t,e,n){"use strict";var r=n(4277),o=n(6663).EXISTS,i=n(5097),s=n(8829),a=Function.prototype,u=i(a.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(c.exec);r&&!o&&s(a,"name",{configurable:!0,get:function(){try{return l(c,u(this))[1]}catch(t){return""}}})},5401:function(t,e,n){"use strict";var r=n(7685),o=n(5870),i=n(4277),s=n(2632),a=n(7944),u=n(5097),c=n(7377),l=n(1242),f=n(1630),h=n(6746),p=n(8520),d=n(1146),v=n(2138),m=n(6181).f,y=n(960).f,g=n(3722).f,b=n(1073),w=n(5115).trim,k="Number",x=s[k],S=a[k],O=x.prototype,C=s.TypeError,M=u("".slice),E=u("".charCodeAt),T=c(k,!x(" 0o1")||!x("0b1")||x("+0x1")),N=function(t){var e,n=arguments.length<1?0:x(function(t){var e=d(t,"number");return"bigint"==typeof e?e:function(t){var e,n,r,o,i,s,a,u,c=d(t,"number");if(p(c))throw new C("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=w(c),43===(e=E(c,0))||45===e){if(88===(n=E(c,2))||120===n)return NaN}else if(48===e){switch(E(c,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(s=(i=M(c,2)).length,a=0;a<s;a++)if((u=E(i,a))<48||u>o)return NaN;return parseInt(i,r)}return+c}(e)}(t));return h(O,e=this)&&v((function(){b(e)}))?f(Object(n),this,N):n};N.prototype=O,T&&!o&&(O.constructor=N),r({global:!0,constructor:!0,wrap:!0,forced:T},{Number:N});var A=function(t,e){for(var n,r=i?m(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;r.length>o;o++)l(e,n=r[o])&&!l(t,n)&&g(t,n,y(e,n))};o&&S&&A(a[k],S),(T||o)&&A(a[k],x)},3454:function(t,e,n){"use strict";var r=n(6025),o=n(7613),i=n(2044);r||o(Object.prototype,"toString",i,{unsafe:!0})},3041:function(t,e,n){"use strict";var r=n(4277),o=n(2632),i=n(5097),s=n(7377),a=n(1630),u=n(7472),c=n(9073),l=n(6181).f,f=n(6746),h=n(9889),p=n(5330),d=n(7601),v=n(672),m=n(4527),y=n(7613),g=n(2138),b=n(1242),w=n(5254).enforce,k=n(7972),x=n(9666),S=n(8348),O=n(5865),C=x("match"),M=o.RegExp,E=M.prototype,T=o.SyntaxError,N=i(E.exec),A=i("".charAt),D=i("".replace),R=i("".indexOf),P=i("".slice),I=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,j=/a/g,z=/a/g,L=new M(j)!==j,B=v.MISSED_STICKY,F=v.UNSUPPORTED_Y;if(s("RegExp",r&&(!L||B||S||O||g((function(){return z[C]=!1,M(j)!==j||M(z)===z||"/a/i"!==String(M(j,"i"))}))))){for(var V=function(t,e){var n,r,o,i,s,l,v=f(E,this),m=h(t),y=void 0===e,g=[],k=t;if(!v&&m&&y&&t.constructor===V)return t;if((m||f(E,t))&&(t=t.source,y&&(e=d(k))),t=void 0===t?"":p(t),e=void 0===e?"":p(e),k=t,S&&"dotAll"in j&&(r=!!e&&R(e,"s")>-1)&&(e=D(e,/s/g,"")),n=e,B&&"sticky"in j&&(o=!!e&&R(e,"y")>-1)&&F&&(e=D(e,/y/g,"")),O&&(i=function(t){for(var e,n=t.length,r=0,o="",i=[],s=c(null),a=!1,u=!1,l=0,f="";r<=n;r++){if("\\"===(e=A(t,r)))e+=A(t,++r);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:N(I,P(t,r+1))&&(r+=2,u=!0),o+=e,l++;continue;case">"===e&&u:if(""===f||b(s,f))throw new T("Invalid capture group name");s[f]=!0,i[i.length]=[f,l],u=!1,f="";continue}u?f+=e:o+=e}return[o,i]}(t),t=i[0],g=i[1]),s=a(M(t,e),v?this:E,V),(r||o||g.length)&&(l=w(s),r&&(l.dotAll=!0,l.raw=V(function(t){for(var e,n=t.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(e=A(t,r))?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]":o+=e+A(t,++r);return o}(t),n)),o&&(l.sticky=!0),g.length&&(l.groups=g)),t!==k)try{u(s,"source",""===k?"(?:)":k)}catch(t){}return s},q=l(M),_=0;q.length>_;)m(V,M,q[_++]);E.constructor=V,V.prototype=E,y(o,"RegExp",V,{constructor:!0})}k("RegExp")},320:function(t,e,n){"use strict";var r=n(7685),o=n(9606);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},4288:function(t,e,n){"use strict";var r=n(6663).PROPER,o=n(7613),i=n(3010),s=n(5330),a=n(2138),u=n(7601),c="toString",l=RegExp.prototype,f=l[c],h=a((function(){return"/a/b"!==f.call({source:"a",flags:"b"})})),p=r&&f.name!==c;(h||p)&&o(l,c,(function(){var t=i(this);return"/"+s(t.source)+"/"+s(u(t))}),{unsafe:!0})},9505:function(t,e,n){"use strict";var r=n(7685),o=n(2757);r({target:"String",proto:!0,forced:n(862)("link")},{link:function(t){return o(this,"a","href",t)}})}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{getDefaultRichText:function(){return Sc},isEmptyRichText:function(){return Oc},mountRichText:function(){return Nc},renderRichText:function(){return Tc},unmountRichText:function(){return Dc},updateRichText:function(){return Ac},uploadResource:function(){return Mc}}),n(9109),n(3454),n(320),n(4288);var t=n(2531),e=n.n(t),o=n(1432),i=n.n(o),s=n(5361),a=n.n(s),u=n(8453),c=n.n(u),l=n(3695),f=n.n(l),h=n(6777),p=n.n(h),d=n(4108),v=n.n(d),m=n(4881),y=n.n(m),g=n(8978),b=n.n(g),w=n(8100),k=n.n(w),x=n(1987),S=n.n(x),O=n(4508),C=n.n(O),M=n(6292),E=n.n(M),T=n(9296),N=n.n(T),A=n(389),D=n.n(A);function R(t){this.content=t}R.prototype={constructor:R,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return-1==o?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new R(i)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new R(n)},addToStart:function(t,e){return new R([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new R(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(-1==i?o.length:i,0,e,n),new R(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=R.from(t)).size?new R(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=R.from(t)).size?new R(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=R.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},R.from=function(t){if(t instanceof R)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new R(e)};var P=R;function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(null,arguments)}function z(t,e,n){return e=q(e),function(t,e){if(e&&("object"==_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(e,n||[],q(t).constructor):e.apply(t,n))}function L(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}function B(t){var e="function"==typeof Map?new Map:void 0;return B=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(F())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&V(o,n.prototype),o}(t,arguments,q(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),V(n,t)},B(t)}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function $(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W(r.key),r)}}function J(t,e,n){return e&&U(t.prototype,e),n&&U(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function W(t){var e=function(t,e){if("object"!=_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}function H(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=H(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function K(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),u=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){for(var c=0,l=Math.min(s.text.length,a.text.length);c<l&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var f=K(s.content,a.content,n-1,r-1);if(f)return f}n-=u,r-=u}else n-=u,r-=u}}var G=function(){function t(e,n){if($(this,t),this.content=e,this.size=n||0,null==n)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize}return J(t,[{key:"nodesBetween",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,s=0;s<e;i++){var a=this.content[i],u=s+a.nodeSize;if(u>t&&!1!==n(a,r+s,o||null,i)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,r+c)}s=u}}},{key:"descendants",value:function(t){this.nodesBetween(0,this.size,t)}},{key:"textBetween",value:function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){var u=s.isText?s.text.slice(Math.max(t,a)-a,e-a):s.isLeaf?r?"function"==typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&u||s.isTextblock)&&n&&(i?i=!1:o+=n),o+=u}),0),o}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new t(o,this.size+e.size)}},{key:"cut",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&n==this.size)return this;var r=[],o=0;if(n>e)for(var i=0,s=0;s<n;i++){var a=this.content[i],u=s+a.nodeSize;u>e&&((s<e||u>n)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=u}return new t(r,o)}},{key:"cutByIndex",value:function(e,n){return e==n?t.empty:0==e&&n==this.content.length?this:new t(this.content.slice(e,n))}},{key:"replaceChild",value:function(e,n){var r=this.content[e];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new t(o,i)}},{key:"addToStart",value:function(e){return new t([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new t(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}},{key:"maybeChild",value:function(t){return this.content[t]||null}},{key:"forEach",value:function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}}},{key:"findDiffStart",value:function(t){return H(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}},{key:"findDiffEnd",value:function(t){return K(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.size)}},{key:"findIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==t)return X(0,t);if(t==this.size)return X(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?X(n+1,o):X(n,r);r=o}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return t.empty;for(var n,r=0,o=0;o<e.length;o++){var i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new t(n||e,r)}},{key:"from",value:function(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}])}();G.empty=new G([],0);var Y={index:0,offset:0};function X(t,e){return Y.index=t,Y.offset=e,Y}function Q(t,e){if(t===e)return!0;if(!t||"object"!=_(t)||!e||"object"!=_(e))return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Q(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!Q(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}var Z=function(){function t(e,n){$(this,t),this.type=e,this.attrs=n}return J(t,[{key:"addToSet",value:function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}},{key:"eq",value:function(t){return this==t||this.type==t.type&&Q(this.attrs,t.attrs)}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type ".concat(e.type," in this schema"));var r=n.create(e.attrs);return n.checkAttrs(r.attrs),r}},{key:"sameSet",value:function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&0==e.length)return t.none;if(e instanceof t)return[e];var n=e.slice();return n.sort((function(t,e){return t.type.rank-e.type.rank})),n}}])}();Z.none=[];var tt=function(t){function e(){return $(this,e),z(this,e,arguments)}return L(e,t),J(e)}(B(Error)),et=function(){function t(e,n,r){$(this,t),this.content=e,this.openStart=n,this.openEnd=r}return J(t,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,n){var r=rt(this.content,e+this.openStart,n);return r&&new t(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,n){return new t(nt(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}}],[{key:"fromJSON",value:function(e,n){if(!n)return t.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new t(G.fromJSON(e,n.content),r,o)}},{key:"maxOpen",value:function(e){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new t(e,r,o)}}])}();function nt(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),u=a.index,c=a.offset;if(i==e||s.isText){if(c!=n&&!t.child(u).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=u)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(nt(s.content,e-i-1,n-i-1)))}function rt(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var u=rt(a.content,e-s-1,n);return u&&t.replaceChild(i,a.copy(u))}function ot(t,e,n){if(n.openStart>t.depth)throw new tt("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new tt("Inconsistent open depths");return it(t,e,n,0)}function it(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=it(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(G.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return lt(i,ft(t,a.start,a.end,e,r))}var u=t.parent,c=u.content;return lt(u,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}return lt(i,ht(t,e,r))}function st(t,e){if(!e.type.compatibleContent(t.type))throw new tt("Cannot join "+e.type.name+" onto "+t.type.name)}function at(t,e,n){var r=t.node(n);return st(r,e.node(n)),r}function ut(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ct(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(ut(t.nodeAfter,r),i++));for(var a=i;a<s;a++)ut(o.child(a),r);e&&e.depth==n&&e.textOffset&&ut(e.nodeBefore,r)}function lt(t,e){return t.type.checkContent(e),t.copy(e)}function ft(t,e,n,r,o){var i=t.depth>o&&at(t,e,o+1),s=r.depth>o&&at(n,r,o+1),a=[];return ct(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(st(i,s),ut(lt(i,ft(t,e,n,r,o+1)),a)):(i&&ut(lt(i,ht(t,e,o+1)),a),ct(e,n,o,a),s&&ut(lt(s,ht(n,r,o+1)),a)),ct(r,null,o,a),new G(a)}function ht(t,e,n){var r=[];return ct(null,t,n,r),t.depth>n&&ut(lt(at(t,e,n+1),ht(t,e,n+1)),r),ct(e,null,n,r),new G(r)}et.empty=new et(G.empty,0,0);var pt=function(){function t(e,n,r){$(this,t),this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return J(t,[{key:"resolveDepth",value:function(t){return null==t?this.depth:t<0?this.depth+t:t}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(t){return this.path[3*this.resolveDepth(t)]}},{key:"index",value:function(t){return this.path[3*this.resolveDepth(t)+1]}},{key:"indexAfter",value:function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}},{key:"end",value:function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}},{key:"before",value:function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}},{key:"after",value:function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}},{key:"nodeBefore",get:function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}},{key:"posAtIndex",value:function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var t=this.parent,e=this.index();if(0==t.content.size)return Z.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i}},{key:"marksAcross",value:function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}},{key:"blockRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=arguments.length>1?arguments[1]:void 0;if(t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new yt(this,t,n);return null}},{key:"sameParent",value:function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}},{key:"max",value:function(t){return t.pos>this.pos?t:this}},{key:"min",value:function(t){return t.pos<this.pos?t:this}},{key:"toString",value:function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}}],[{key:"resolve",value:function(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,s=e;;){var a=s.content.findIndex(i),u=a.index,c=a.offset,l=i-c;if(r.push(s,u,o+c),!l)break;if((s=s.child(u)).isText)break;i=l-1,o+=c+1}return new t(n,r,i)}},{key:"resolveCached",value:function(e,n){var r=mt.get(e);if(r)for(var o=0;o<r.elts.length;o++){var i=r.elts[o];if(i.pos==n)return i}else mt.set(e,r=new dt);var s=r.elts[r.i]=t.resolve(e,n);return r.i=(r.i+1)%vt,s}}])}(),dt=J((function t(){$(this,t),this.elts=[],this.i=0})),vt=12,mt=new WeakMap,yt=function(){return J((function t(e,n,r){$(this,t),this.$from=e,this.$to=n,this.depth=r}),[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}])}(),gt=Object.create(null),bt=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Z.none;$(this,t),this.type=e,this.attrs=n,this.marks=o,this.content=r||G.empty}return J(t,[{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(t){return this.content.child(t)}},{key:"maybeChild",value:function(t){return this.content.maybeChild(t)}},{key:"forEach",value:function(t){this.content.forEach(t)}},{key:"nodesBetween",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(t,e,n,r,this)}},{key:"descendants",value:function(t){this.nodesBetween(0,this.content.size,t)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(t,e,n,r){return this.content.textBetween(t,e,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}},{key:"sameMarkup",value:function(t){return this.hasMarkup(t.type,t.attrs,t.marks)}},{key:"hasMarkup",value:function(t,e,n){return this.type==t&&Q(this.attrs,e||t.defaultAttrs||gt)&&Z.sameSet(this.marks,n||Z.none)}},{key:"copy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}},{key:"slice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t==e)return et.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new et(a,r.depth-i,o.depth-i)}},{key:"replace",value:function(t,e,n){return ot(this.resolve(t),this.resolve(e),n)}},{key:"nodeAt",value:function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}}},{key:"childAfter",value:function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}},{key:"resolve",value:function(t){return pt.resolveCached(this,t)}},{key:"resolveNoCache",value:function(t){return pt.resolve(this,t)}},{key:"rangeHasMark",value:function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),kt(this.marks,t)}},{key:"contentMatchAt",value:function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}},{key:"canReplace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}},{key:"canReplaceWith",value:function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd}},{key:"canAppend",value:function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}},{key:"check",value:function(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);for(var t=Z.none,e=0;e<this.marks.length;e++){var n=this.marks[e];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!Z.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(t){return t.type.name}))));this.content.forEach((function(t){return t.check()}))}},{key:"toJSON",value:function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t}}],[{key:"fromJSON",value:function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=void 0;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=G.fromJSON(t,e.content),o=t.nodeType(e.type).create(e.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}])}();bt.prototype.text=void 0;var wt=function(t){function e(t,n,r,o){var i;if($(this,e),i=z(this,e,[t,n,null,o]),!r)throw new RangeError("Empty text nodes are not allowed");return i.text=r,i}return L(e,t),J(e,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):kt(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(t,e){return this.text.slice(t,e)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)}},{key:"withText",value:function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)}},{key:"cut",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}},{key:"eq",value:function(t){return this.sameMarkup(t)&&this.text==t.text}},{key:"toJSON",value:function(){var t=j(q(e.prototype),"toJSON",this).call(this);return t.text=this.text,t}}])}(bt);function kt(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var xt=function(){function t(e){$(this,t),this.validEnd=e,this.next=[],this.wrapCache=[]}return J(t,[{key:"matchType",value:function(t){for(var e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}},{key:"matchFragment",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.childCount,r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var t=0;t<this.next.length;t++){var e=this.next[t].type;if(!e.isText&&!e.hasRequiredAttrs())return e}return null}},{key:"compatible",value:function(t){for(var e=0;e<this.next.length;e++)for(var n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return G.from(s.map((function(t){return t.createAndFill()})));for(var u=0;u<i.next.length;u++){var c=i.next[u],l=c.type,f=c.next;if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(f)){r.push(f);var h=o(f,s.concat(l));if(h)return h}}return null}(this,[])}},{key:"findWrapping",value:function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}},{key:"computeWrapping",value:function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a++){var u=o.next[a],c=u.type,l=u.next;c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!l.validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(t){if(t>=this.next.length)throw new RangeError("There's no ".concat(t,"th edge in this content match"));return this.next[t]}},{key:"toString",value:function(){var t=[];return function e(n){t.push(n);for(var r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o++)r+=(o?", ":"")+e.next[o].type.name+"->"+t.indexOf(e.next[o].next);return r})).join("\n")}}],[{key:"parse",value:function(e,n){var r=new St(e,n);if(null==r.next)return t.empty;var o=Ot(r);r.next&&r.err("Unexpected trailing text");var i=Dt(function(t){var e=[[]];return o(function t(e,i){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(t(n,i))}),[]);if("seq"!=e.type){if("star"==e.type){var s=n();return r(i,s),o(t(e.expr,s),s),[r(s)]}if("plus"==e.type){var a=n();return o(t(e.expr,i),a),o(t(e.expr,a),a),[r(a)]}if("opt"==e.type)return[r(i)].concat(t(e.expr,i));if("range"==e.type){for(var u=i,c=0;c<e.min;c++){var l=n();o(t(e.expr,u),l),u=l}if(-1==e.max)o(t(e.expr,u),u);else for(var f=e.min;f<e.max;f++){var h=n();r(u,h),o(t(e.expr,u),h),u=h}return[r(u)]}if("name"==e.type)return[r(i,void 0,e.value)];throw new Error("Unknown expr type")}for(var p=0;;p++){var d=t(e.exprs[p],i);if(p==e.exprs.length-1)return d;o(d,i=n())}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}}(o));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a++){var u=o.next[a],c=u.type,l=u.next;s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}}])}();xt.empty=new xt(!0);var St=function(){return J((function t(e,n){$(this,t),this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}),[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(t){return this.next==t&&(this.pos++||!0)}},{key:"err",value:function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}])}();function Ot(t){var e=[];do{e.push(Ct(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Ct(t){var e=[];do{e.push(Mt(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Mt(t){for(var e=function(t){if(t.eat("(")){var e=Ot(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Tt(t,e)}return e}function Et(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Tt(t,e){var n=Et(t),r=n;return t.eat(",")&&(r="}"!=t.next?Et(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Nt(t,e){return e-t}function At(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,u=s.to;a||-1!=n.indexOf(u)||e(u)}}(e),n.sort(Nt)}function Dt(t){var e=Object.create(null);return function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){for(var i,s=0;s<o.length;s++)o[s][0]==n&&(i=o[s][1]);At(t,r).forEach((function(t){i||o.push([n,i=[]]),-1==i.indexOf(t)&&i.push(t)}))}}))}));for(var i=e[r.join(",")]=new xt(r.indexOf(t.length-1)>-1),s=0;s<o.length;s++){var a=o[s][1].sort(Nt);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}(At(t,0))}function Rt(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Pt(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function It(t,e,n,r){for(var o in e)if(!(o in t))throw new RangeError("Unsupported attribute ".concat(o," for ").concat(n," of type ").concat(o));for(var i in t){var s=t[i];s.validate&&s.validate(e[i])}}function jt(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new Lt(t[n]);return e}var zt=function(){function t(e,n,r){$(this,t),this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=jt(r.attrs),this.defaultAttrs=Rt(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}return J(t,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==xt.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(t){return this==t||this.contentMatch.compatible(t.contentMatch)}},{key:"computeAttrs",value:function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Pt(this.attrs,t)}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new bt(this,this.computeAttrs(t),G.from(e),Z.setFrom(n))}},{key:"createChecked",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e=G.from(e),this.checkContent(e),new bt(this,this.computeAttrs(t),e,Z.setFrom(n))}},{key:"createAndFill",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(t=this.computeAttrs(t),(e=G.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e),i=o&&o.fillBefore(G.empty,!0);return i?new bt(this,t,e.append(i),Z.setFrom(n)):null}},{key:"validContent",value:function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(t){if(!this.validContent(t))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(t.toString().slice(0,50)))}},{key:"checkAttrs",value:function(t){It(this.attrs,t,"node",this.name)}},{key:"allowsMarkType",value:function(t){return null==this.markSet||this.markSet.indexOf(t)>-1}},{key:"allowsMarks",value:function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}},{key:"allowedMarks",value:function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:Z.none:t}}],[{key:"compile",value:function(e,n){var r=Object.create(null);e.forEach((function(e,o){return r[e]=new t(e,n,o)}));var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}])}(),Lt=function(){return J((function t(e){var n,r;$(this,t),this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default,this.validate="string"==typeof e.validate?(n=e.validate,r=n.split("|"),function(t){var e=null===t?"null":_(t);if(r.indexOf(e)<0)throw new RangeError("Expected value of type ".concat(r,", got ").concat(e))}):e.validate}),[{key:"isRequired",get:function(){return!this.hasDefault}}])}(),Bt=function(){function t(e,n,r,o){$(this,t),this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=jt(o.attrs),this.excluded=null;var i=Rt(this.attrs);this.instance=i?new Z(this,i):null}return J(t,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!t&&this.instance?this.instance:new Z(this,Pt(this.attrs,t))}},{key:"removeFromSet",value:function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}},{key:"isInSet",value:function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]}},{key:"checkAttrs",value:function(t){It(this.attrs,t,"mark",this.name)}},{key:"excludes",value:function(t){return this.excluded.indexOf(t)>-1}}],[{key:"compile",value:function(e,n){var r=Object.create(null),o=0;return e.forEach((function(e,i){return r[e]=new t(e,o++,n,i)})),r}}])}(),Ft=function(){return J((function t(e){$(this,t),this.linebreakReplacement=null,this.cached=Object.create(null);var n=this.spec={};for(var r in e)n[r]=e[r];n.nodes=P.from(e.nodes),n.marks=P.from(e.marks||{}),this.nodes=zt.compile(this.spec.nodes,this),this.marks=Bt.compile(this.spec.marks,this);var o=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var s=this.nodes[i],a=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=o[a]||(o[a]=xt.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet="_"==u?null:u?Vt(this,u.split(" ")):""!=u&&s.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],f=l.spec.excludes;l.excluded=null==f?[l]:""==f?[]:Vt(this,f.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}),[{key:"node",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof zt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}},{key:"text",value:function(t,e){var n=this.nodes.text;return new wt(n,n.defaultAttrs,t,Z.setFrom(e))}},{key:"mark",value:function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}},{key:"nodeFromJSON",value:function(t){return bt.fromJSON(this,t)}},{key:"markFromJSON",value:function(t){return Z.fromJSON(this,t)}},{key:"nodeType",value:function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}])}();function Vt(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var u=t.marks[a];("_"==o||u.spec.group&&u.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=u)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}var qt=function(){function t(e,n){var r=this;$(this,t),this.schema=e,this.rules=n,this.tags=[],this.styles=[];var o=this.matchedStyles=[];n.forEach((function(t){if(function(t){return null!=t.tag}(t))r.tags.push(t);else if(function(t){return null!=t.style}(t)){var e=/[^=]*/.exec(t.style)[0];o.indexOf(e)<0&&o.push(e),r.styles.push(t)}})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}return J(t,[{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Ht(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}},{key:"parseSlice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Ht(this,e,!0);return n.addAll(t,e.from,e.to),et.maxOpen(n.finish())}},{key:"matchTag",value:function(t,e,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if(Kt(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(t,e,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],s=i.style;if(!(0!=s.indexOf(t)||i.context&&!n.matchesContext(i.context)||s.length>t.length&&(61!=s.charCodeAt(t.length)||s.slice(t.length+1)!=e))){if(i.getAttrs){var a=i.getAttrs(e);if(!1===a)continue;i.attrs=a||void 0}return i}}}}],[{key:"schemaRules",value:function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Gt(t)),t.mark||t.ignore||t.clearMark||(t.mark=e)}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Gt(t)),t.node||t.ignore||t.mark||(t.node=e)}))};for(var s in t.nodes)i(s);return e}},{key:"fromSchema",value:function(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}}])}(),_t={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},$t={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ut={ol:!0,ul:!0};function Jt(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}var Wt=function(){return J((function t(e,n,r,o,i,s,a){$(this,t),this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=i,this.options=a,this.content=[],this.activeMarks=Z.none,this.stashMarks=[],this.match=s||(4&a?null:e.contentMatch)}),[{key:"findWrapping",value:function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(G.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}},{key:"finish",value:function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];if(n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length))}}var o=G.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(G.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"popFromStashMark",value:function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}},{key:"applyPending",value:function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Yt(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!_t.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}])}(),Ht=function(){return J((function t(e,n,r){$(this,t),this.parser=e,this.options=n,this.isOpen=r,this.open=0;var o,i=n.topNode,s=Jt(null,n.preserveWhitespace,0)|(r?4:0);o=i?new Wt(i.type,i.attrs,Z.none,Z.none,!0,n.topMatch||i.type.contentMatch,s):new Wt(r?null:e.schema.topNodeType,null,Z.none,Z.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}),[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(t){3==t.nodeType?this.addTextNode(t):1==t.nodeType&&this.addElement(t)}},{key:"withStyleRules",value:function(t,e){var n=t.style;if(!n||!n.length)return e();var r,o,i=this.readStyles(t.style);if(i){for(var s=(o=2,function(t){if(Array.isArray(t))return t}(r=i)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,s,a=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(r,o)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=s[0],u=s[1],c=this.top,l=0;l<u.length;l++)this.removePendingMark(u[l],c);for(var f=0;f<a.length;f++)this.addPendingMark(a[f]);e();for(var h=0;h<a.length;h++)this.removePendingMark(a[h],c);for(var p=0;p<u.length;p++)this.addPendingMark(u[p])}}},{key:"addTextNode",value:function(t){var e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}},{key:"addElement",value:function(t,e){var n,r=this,o=t.nodeName.toLowerCase();Ut.hasOwnProperty(o)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Ut.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:$t.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var s,a=this.top,u=this.needsBlock;if(_t.hasOwnProperty(o))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);i&&i.skip?this.addAll(t):this.withStyleRules(t,(function(){return r.addAll(t)})),s&&this.sync(a),this.needsBlock=u}else this.withStyleRules(t,(function(){r.addElementByRule(t,i,!1===i.consuming?n:void 0)}))}},{key:"leafFallback",value:function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}},{key:"ignoreFallback",value:function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(t){var e=this,n=Z.none,r=Z.none;if(t.length)for(var o=0;o<this.parser.matchedStyles.length;o++){var i=this.parser.matchedStyles[o],s=t.getPropertyValue(i);if(s)for(var a,u=function(t){var o=e.parser.matchStyle(i,s,e,t);return o?o.ignore?{v:null}:(o.clearMark?e.top.pendingMarks.concat(e.top.activeMarks).forEach((function(t){o.clearMark(t)&&(r=t.addToSet(r))})):n=e.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),!1!==o.consuming?(c=t,0):void(c=t=o)):(c=t,0)},c=void 0;0!==(a=u(c));)if(a)return a.v}return[n,r]}},{key:"addElementByRule",value:function(t,e,n){var r,o,i,s=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):r=this.enter(o,e.attrs||null,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var u=t;"string"==typeof e.contentElement?u=t.querySelector(e.contentElement):"function"==typeof e.contentElement?u=e.contentElement(t):e.contentElement&&(u=e.contentElement),this.findAround(t,u,!0),this.addAll(u)}r&&this.sync(a)&&this.open--,i&&this.removePendingMark(i,a)}},{key:"addAll",value:function(t,e,n){for(var r=e||0,o=e?t.childNodes[e]:t.firstChild,i=null==n?null:t.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(o);this.findAtPoint(t,r)}},{key:"findPlace",value:function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0}},{key:"insertNode",value:function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1}},{key:"enter",value:function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}},{key:"enterInner",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t);var i=Jt(t,r,o.options);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new Wt(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}},{key:"closeExtra",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t}},{key:"findAtPoint",value:function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}},{key:"findAround",value:function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},{key:"findInText",value:function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}},{key:"matchesContext",value:function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1);return function t(s,a){for(;s>=0;s--){var u=n[s];if(""==u){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(t(s-1,a))return!0;return!1}var c=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!c||c.name!=u&&-1==c.groups.indexOf(u))return!1;a--}return!0}(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}},{key:"addPendingMark",value:function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}}}])}();function Kt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Gt(t){var e={};for(var n in t)e[n]=t[n];return e}function Yt(t,e){var n,r=e.schema.nodes,o=function(){var n=r[i];if(!n.allowsMarkType(t))return 0;var o=[];return function t(n){o.push(n);for(var r=0;r<n.edgeCount;r++){var i=n.edge(r),s=i.type,a=i.next;if(s==e)return!0;if(o.indexOf(a)<0&&t(a))return!0}}(n.contentMatch)?{v:!0}:void 0};for(var i in r)if(0!==(n=o())&&n)return n.v}var Xt=function(){function t(e,n){$(this,t),this.nodes=e,this.marks=n}return J(t,[{key:"serializeFragment",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=Zt(n).createDocumentFragment());var o=r,i=[];return t.forEach((function(t){if(i.length||t.marks.length){for(var r=0,s=0;r<i.length&&s<t.marks.length;){var a=t.marks[s];if(e.marks[a.type.name]){if(!a.eq(i[r][0])||!1===a.type.spec.spanning)break;r++,s++}else s++}for(;r<i.length;)o=i.pop()[1];for(;s<t.marks.length;){var u=t.marks[s++],c=e.serializeMark(u,t.isInline,n);c&&(i.push([u,o]),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(e.serializeNodeInner(t,n))})),r}},{key:"serializeNodeInner",value:function(t,e){var n=ee(Zt(e),this.nodes[t.type.name](t),null,t.attrs),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,o)}return r}},{key:"serializeNode",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[t.type.name];return r&&ee(Zt(n),r(t,e),null,t.attrs)}}],[{key:"renderSpec",value:function(t,e){return ee(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromSchema",value:function(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(t){var e=Qt(t.nodes);return e.text||(e.text=function(t){return t.text}),e}},{key:"marksFromSchema",value:function(t){return Qt(t.marks)}}])}();function Qt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Zt(t){return t.document||window.document}var te=new WeakMap;function ee(t,e,n,r){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var o,i=e[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=function(t){var e=te.get(t);return void 0===e&&te.set(t,e=function(t){var e=null;return function t(n){if(n&&"object"==_(n))if(Array.isArray(n))if("string"==typeof n[0])e||(e=[]),e.push(n);else for(var r=0;r<n.length;r++)t(n[r]);else for(var o in n)t(n[o])}(t),e}(t)),e}(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");var s,a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));var u=n?t.createElementNS(n,i):t.createElement(i),c=e[1],l=1;if(c&&"object"==_(c)&&null==c.nodeType&&!Array.isArray(c))for(var f in l=2,c)if(null!=c[f]){var h=f.indexOf(" ");h>0?u.setAttributeNS(f.slice(0,h),f.slice(h+1),c[f]):u.setAttribute(f,c[f])}for(var p=l;p<e.length;p++){var d=e[p];if(0===d){if(p<e.length-1||p>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}var v=ee(t,d,n,r),m=v.dom,y=v.contentDOM;if(u.appendChild(m),y){if(s)throw new RangeError("Multiple content holes");s=y}}return{dom:u,contentDOM:s}}function ne(t,e,n){return e=oe(e),function(t,e){if(e&&("object"==ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,re()?Reflect.construct(e,n||[],oe(t).constructor):e.apply(t,n))}function re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(re=function(){return!!t})()}function oe(t){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oe(t)}function ie(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}function se(t,e){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},se(t,e)}function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fe(r.key),r)}}function le(t,e,n){return e&&ce(t.prototype,e),n&&ce(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fe(t){var e=function(t,e){if("object"!=ae(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ae(e)?e:e+""}var he=Math.pow(2,16);function pe(t){return 65535&t}var de=function(){return le((function t(e,n,r){ue(this,t),this.pos=e,this.delInfo=n,this.recover=r}),[{key:"deleted",get:function(){return(8&this.delInfo)>0}},{key:"deletedBefore",get:function(){return(5&this.delInfo)>0}},{key:"deletedAfter",get:function(){return(6&this.delInfo)>0}},{key:"deletedAcross",get:function(){return(4&this.delInfo)>0}}])}(),ve=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ue(this,t),this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}return le(t,[{key:"recover",value:function(t){var e=0,n=pe(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/he}(t)}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!0)}},{key:"_map",value:function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var u=this.ranges[s+o],c=this.ranges[s+i],l=a+u;if(t<=l){var f=a+r+((u?t==a?-1:t==l?1:e:e)<0?0:c);if(n)return f;var h=t==a?2:t==l?1:4;return(e<0?t!=a:t!=l)&&(h|=8),new de(f,h,t==(e<0?a:l)?null:s/3+(t-a)*he)}r+=c-u}return n?t+r:new de(t+r,0,null)}},{key:"touches",value:function(t,e){for(var n=0,r=pe(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var u=this.ranges[s+o];if(t<=a+u&&s==3*r)return!0;n+=this.ranges[s+i]-u}return!1}},{key:"forEach",value:function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),u=this.ranges[r+e],c=this.ranges[r+n];t(s,s+u,a,a+c),o+=c-u}}},{key:"invert",value:function(){return new t(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(e){return 0==e?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}}])}();ve.empty=new ve([]);var me=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;ue(this,t),this.maps=e,this.mirror=n,this.from=r,this.to=o}return le(t,[{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new t(this.maps,this.mirror,e,n)}},{key:"copy",value:function(){return new t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}},{key:"appendMapping",value:function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}},{key:"getMirror",value:function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}},{key:"setMirror",value:function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}},{key:"appendMappingInverted",value:function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}},{key:"invert",value:function(){var e=new t;return e.appendMappingInverted(this),e}},{key:"map",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}},{key:"mapResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(t,e,!1)}},{key:"_map",value:function(t,e,n){for(var r=0,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(i.recover);continue}}r|=i.delInfo,t=i.pos}return n?t:new de(t,r,null)}}])}(),ye=Object.create(null),ge=function(){return le((function t(){ue(this,t)}),[{key:"getMap",value:function(){return ve.empty}},{key:"merge",value:function(t){return null}}],[{key:"fromJSON",value:function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=ye[e.stepType];if(!n)throw new RangeError("No step type ".concat(e.stepType," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in ye)throw new RangeError("Duplicate use of step JSON ID "+t);return ye[t]=e,e.prototype.jsonID=t,e}}])}(),be=function(){function t(e,n){ue(this,t),this.doc=e,this.failed=n}return le(t,null,[{key:"ok",value:function(e){return new t(e,null)}},{key:"fail",value:function(e){return new t(null,e)}},{key:"fromReplace",value:function(e,n,r,o){try{return t.ok(e.replace(n,r,o))}catch(e){if(e instanceof tt)return t.fail(e.message);throw e}}}])}();function we(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(we(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return G.fromArray(r)}var ke=function(t){function e(t,n,r){var o;return ue(this,e),(o=ne(this,e)).from=t,o.to=n,o.mark=r,o}return ie(e,t),le(e,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new et(we(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return be.fromReplace(t,this.from,this.to,i)}},{key:"invert",value:function(){return new xe(this.from,this.to,this.mark)}},{key:"map",value:function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}}])}(ge);ge.jsonID("addMark",ke);var xe=function(t){function e(t,n,r){var o;return ue(this,e),(o=ne(this,e)).from=t,o.to=n,o.mark=r,o}return ie(e,t),le(e,[{key:"apply",value:function(t){var e=this,n=t.slice(this.from,this.to),r=new et(we(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))}),t),n.openStart,n.openEnd);return be.fromReplace(t,this.from,this.to,r)}},{key:"invert",value:function(){return new ke(this.from,this.to,this.mark)}},{key:"map",value:function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)}},{key:"merge",value:function(t){return t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))}}])}(ge);ge.jsonID("removeMark",xe);var Se=function(t){function e(t,n){var r;return ue(this,e),(r=ne(this,e)).pos=t,r.mark=n,r}return ie(e,t),le(e,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return be.fail("No node at mark step's position");var n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return be.fromReplace(t,this.pos,this.pos+1,new et(G.from(n),0,e.isLeaf?0:1))}},{key:"invert",value:function(t){var n=t.nodeAt(this.pos);if(n){var r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(var o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new e(this.pos,n.marks[o]);return new e(this.pos,this.mark)}}return new Oe(this.pos,this.mark)}},{key:"map",value:function(t){var n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}}])}(ge);ge.jsonID("addNodeMark",Se);var Oe=function(t){function e(t,n){var r;return ue(this,e),(r=ne(this,e)).pos=t,r.mark=n,r}return ie(e,t),le(e,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return be.fail("No node at mark step's position");var n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return be.fromReplace(t,this.pos,this.pos+1,new et(G.from(n),0,e.isLeaf?0:1))}},{key:"invert",value:function(t){var e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new Se(this.pos,this.mark):this}},{key:"map",value:function(t){var n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new e(n.pos,t.markFromJSON(n.mark))}}])}(ge);ge.jsonID("removeNodeMark",Oe);var Ce=function(t){function e(t,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ue(this,e),(o=ne(this,e)).from=t,o.to=n,o.slice=r,o.structure=i,o}return ie(e,t),le(e,[{key:"apply",value:function(t){return this.structure&&Ee(t,this.from,this.to)?be.fail("Structure replace would overwrite content"):be.fromReplace(t,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new ve([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}},{key:"map",value:function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)}},{key:"merge",value:function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?et.empty:new et(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?et.empty:new et(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,et.fromJSON(t,n.slice),!!n.structure)}}])}(ge);ge.jsonID("replace",Ce);var Me=function(t){function e(t,n,r,o,i,s){var a,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return ue(this,e),(a=ne(this,e)).from=t,a.to=n,a.gapFrom=r,a.gapTo=o,a.slice=i,a.insert=s,a.structure=u,a}return ie(e,t),le(e,[{key:"apply",value:function(t){if(this.structure&&(Ee(t,this.from,this.gapFrom)||Ee(t,this.gapTo,this.to)))return be.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return be.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?be.fromReplace(t,this.from,this.to,n):be.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new ve([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,et.fromJSON(t,n.slice),n.insert,!!n.structure)}}])}(ge);function Ee(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function Te(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=t.doc.nodeAt(e),s=[],a=e+1,u=0;u<i.childCount;u++){var c=i.child(u),l=a+c.nodeSize,f=r.matchType(c.type);if(f){r=f;for(var h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new xe(a,l,c.marks[h]));if(o&&c.isText&&"pre"!=n.whitespace)for(var p=void 0,d=/\r?\n|\r/g,v=void 0;p=d.exec(c.text);)v||(v=new et(G.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Ce(a+p.index,a+p.index+p[0].length,v))}else s.push(new Ce(a,l,et.empty));a=l}if(!r.validEnd){var m=r.fillBefore(G.empty,!0);t.replace(a,a,new et(m,0,0))}for(var y=s.length-1;y>=0;y--)t.step(s[y])}function Ne(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ae(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!Ne(r,o,i))break}return null}function De(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,u=r;a&&u<o;u++)a=a.matchType(n.child(u).type);return a&&a.validEnd?s:null}(r,e);return i?o.map(Re).concat({type:e,attrs:n}).concat(i.map(Re)):null}function Re(t){return{type:t,attrs:null}}function Pe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,u=n-2;a>i;a--,u--){var c=o.node(a),l=o.index(a);if(c.type.spec.isolating)return!1;var f=c.content.cutByIndex(l,c.childCount),h=r&&r[u+1];h&&(f=f.replaceChild(0,h.type.create(h.attrs)));var p=r&&r[u]||c;if(!c.canReplace(l+1,c.childCount)||!p.type.validContent(f))return!1}var d=o.indexAfter(i),v=r&&r[0];return o.node(i).canReplaceWith(d,d,v?v.type:o.node(i+1).type)}function Ie(t,e){var n=t.resolve(e),r=n.index();return je(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function je(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function ze(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t.resolve(e),o=r.depth;;o--){var i=void 0,s=void 0,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&je(i,s)&&r.node(o).canReplace(a,a+1))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function Le(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var u=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(u>0?1:0),l=r.node(a),f=!1;if(1==s)f=l.canReplace(c,c,o);else{var h=l.contentMatchAt(c).findWrapping(o.firstChild.type);f=h&&l.canReplaceWith(c,c,h[0])}if(f)return 0==u?r.pos:u<0?r.before(a+1):r.after(a+1)}return null}function Be(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:et.empty;if(e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return Fe(o,i,r)?new Ce(e,n,r):new Ve(o,i,r).fit()}function Fe(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}ge.jsonID("replaceAround",Me);var Ve=function(){return le((function t(e,n,r){ue(this,t),this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=G.empty;for(var o=0;o<=e.depth;o++){var i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(var s=e.depth;s>0;s--)this.placed=G.from(e.node(s).copy(this.placed))}),[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var u=new et(i,s,a);return e>-1?new Me(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Ce(r.pos,o.pos,u):null}},{key:"findFittable",value:function(){for(var t=this.unplaced.openStart,e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){var o=e.firstChild;if(e.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){t=n;break}e=o.content}for(var i=1;i<=2;i++)for(var s=1==i?t:this.unplaced.openStart;s>=0;s--)for(var a=null,u=(s?(a=$e(this.unplaced.content,s-1).firstChild).content:this.unplaced.content).firstChild,c=this.depth;c>=0;c--){var l=this.frontier[c],f=l.type,h=l.match,p=void 0,d=null;if(1==i&&(u?h.matchType(u.type)||(d=h.fillBefore(G.from(u),!1)):a&&f.compatibleContent(a.type)))return{sliceDepth:s,frontierDepth:c,parent:a,inject:d};if(2==i&&u&&(p=h.findWrapping(u.type)))return{sliceDepth:s,frontierDepth:c,parent:a,wrap:p};if(a&&h.matchType(a.type))break}}},{key:"openMore",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=$e(e,n);return!(!o.childCount||o.firstChild.isLeaf||(this.unplaced=new et(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),0))}},{key:"dropNode",value:function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=$e(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new et(qe(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new et(qe(e,n,1),n,r)}},{key:"placeNodes",value:function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,u=r?r.content:a.content,c=a.openStart-e,l=0,f=[],h=this.frontier[n],p=h.match,d=h.type;if(o){for(var v=0;v<o.childCount;v++)f.push(o.child(v));p=p.matchFragment(o)}for(var m=u.size+e-(a.content.size-a.openEnd);l<u.childCount;){var y=u.child(l),g=p.matchType(y.type);if(!g)break;(++l>1||0==c||y.content.size)&&(p=g,f.push(Ue(y.mark(d.allowedMarks(y.marks)),1==l?c:0,l==u.childCount?m:-1)))}var b=l==u.childCount;b||(m=-1),this.placed=_e(this.placed,n,G.from(f)),this.frontier[n].match=p,b&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,k=u;w<m;w++){var x=k.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),k=x.content}this.unplaced=b?0==e?et.empty:new et(qe(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new et(qe(a.content,e,l),a.openStart,a.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!Je(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r}},{key:"findCloseLevel",value:function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Je(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var u=this.frontier[a],c=u.match,l=Je(t,a,u.type,c,!0);if(!l||l.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}}},{key:"close",value:function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=_e(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t}},{key:"openFrontierNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=_e(this.placed,this.depth,G.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}},{key:"closeFrontierNode",value:function(){var t=this.frontier.pop().match.fillBefore(G.empty,!0);t.childCount&&(this.placed=_e(this.placed,this.frontier.length,t))}}])}();function qe(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(qe(t.firstChild.content,e-1,n)))}function _e(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(_e(t.lastChild.content,e-1,n)))}function $e(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function Ue(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,Ue(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(G.empty,!0)))),t.copy(r)}function Je(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function We(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(We(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(G.empty,!0))}return t}function He(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&n.push(r)}return n}var Ke=function(t){function e(t,n,r){var o;return ue(this,e),(o=ne(this,e)).pos=t,o.attr=n,o.value=r,o}return ie(e,t),le(e,[{key:"apply",value:function(t){var e=t.nodeAt(this.pos);if(!e)return be.fail("No node at attribute step's position");var n=Object.create(null);for(var r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;var o=e.type.create(n,null,e.marks);return be.fromReplace(t,this.pos,this.pos+1,new et(G.from(o),0,e.isLeaf?0:1))}},{key:"getMap",value:function(){return ve.empty}},{key:"invert",value:function(t){return new e(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(t){var n=t.mapResult(this.pos,1);return n.deletedAfter?null:new e(n.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new e(n.pos,n.attr,n.value)}}])}(ge);ge.jsonID("attr",Ke);var Ge=function(t){function e(t,n){var r;return ue(this,e),(r=ne(this,e)).attr=t,r.value=n,r}return ie(e,t),le(e,[{key:"apply",value:function(t){var e=Object.create(null);for(var n in t.attrs)e[n]=t.attrs[n];e[this.attr]=this.value;var r=t.type.create(e,t.content,t.marks);return be.ok(r)}},{key:"getMap",value:function(){return ve.empty}},{key:"invert",value:function(t){return new e(this.attr,t.attrs[this.attr])}},{key:"map",value:function(t){return this}},{key:"toJSON",value:function(){return{stepType:"docAttr",attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(t,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new e(n.attr,n.value)}}])}(ge);ge.jsonID("docAttr",Ge);var Ye=Error;((Ye=function t(e){var n=Error.call(this,e);return n.__proto__=t.prototype,n}).prototype=Object.create(Error.prototype)).constructor=Ye,Ye.prototype.name="TransformError";var Xe=function(){return le((function t(e){ue(this,t),this.doc=e,this.steps=[],this.docs=[],this.mapping=new me}),[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(t){var e=this.maybeStep(t);if(e.failed)throw new Ye(e.failed);return this}},{key:"maybeStep",value:function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}},{key:"replace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et.empty,r=Be(this.doc,t,e,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(t,e,n){return this.replace(t,e,new et(G.from(n),0,0))}},{key:"delete",value:function(t,e){return this.replace(t,e,et.empty)}},{key:"insert",value:function(t,e){return this.replaceWith(t,t,e)}},{key:"replaceRange",value:function(t,e,n){return function(t,e,n,r){if(!r.size)return t.deleteRange(e,n);var o=t.doc.resolve(e),i=t.doc.resolve(n);if(Fe(o,i,r))return t.step(new Ce(e,n,r));var s=He(o,t.doc.resolve(n));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var u=o.depth,c=o.pos-1;u>0;u--,c--){var l=o.node(u).type.spec;if(l.defining||l.definingAsContext||l.isolating)break;s.indexOf(u)>-1?a=u:o.before(u)==c&&s.splice(1,0,-u)}for(var f,h=s.indexOf(a),p=[],d=r.openStart,v=r.content,m=0;;m++){var y=v.firstChild;if(p.push(y),m==r.openStart)break;v=y.content}for(var g=d-1;g>=0;g--){var b=p[g],w=(f=b.type).spec.defining||f.spec.definingForContent;if(w&&!b.sameMarkup(o.node(Math.abs(a)-1)))d=g;else if(w||!b.type.isTextblock)break}for(var k=r.openStart;k>=0;k--){var x=(k+d+1)%(r.openStart+1),S=p[x];if(S)for(var O=0;O<s.length;O++){var C=s[(O+h)%s.length],M=!0;C<0&&(M=!1,C=-C);var E=o.node(C-1),T=o.index(C-1);if(E.canReplaceWith(T,T,S.type,S.marks))return t.replace(o.before(C),M?i.after(C):n,new et(We(r.content,0,r.openStart,x),x,r.openEnd))}}for(var N=t.steps.length,A=s.length-1;A>=0&&(t.replace(e,n,r),!(t.steps.length>N));A--){var D=s[A];D<0||(e=o.before(D),n=i.after(D))}}(this,t,e,n),this}},{key:"replaceRangeWith",value:function(t,e,n){return function(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){var o=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}return null}(t.doc,e,r.type);null!=o&&(e=n=o)}t.replaceRange(e,n,new et(G.from(r),0,0))}(this,t,e,n),this}},{key:"deleteRange",value:function(t,e){return function(t,e,n){for(var r=t.doc.resolve(e),o=t.doc.resolve(n),i=He(r,o),s=0;s<i.length;s++){var a=i[s],u=s==i.length-1;if(u&&0==a||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(u||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(var c=1;c<=r.depth&&c<=o.depth;c++)if(e-r.start(c)==r.depth-c&&n>r.end(c)&&o.end(c)-n!=o.depth-c)return t.delete(r.before(c),n);t.delete(e,n)}(this,t,e),this}},{key:"lift",value:function(t,e){return function(t,e,n){for(var r=e.$from,o=e.$to,i=e.depth,s=r.before(i+1),a=o.after(i+1),u=s,c=a,l=G.empty,f=0,h=i,p=!1;h>n;h--)p||r.index(h)>0?(p=!0,l=G.from(r.node(h).copy(l)),f++):u--;for(var d=G.empty,v=0,m=i,y=!1;m>n;m--)y||o.after(m+1)<o.end(m)?(y=!0,d=G.from(o.node(m).copy(d)),v++):c++;t.step(new Me(u,c,s,a,new et(l.append(d),f,v),l.size-f,!0))}(this,t,e),this}},{key:"join",value:function(t){return function(t,e,n){var r=new Ce(e-n,e+n,et.empty,!0);t.step(r)}(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}},{key:"wrap",value:function(t,e){return function(t,e,n){for(var r=G.empty,o=n.length-1;o>=0;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=G.from(n[o].type.create(n[o].attrs,r))}var s=e.start,a=e.end;t.step(new Me(s,a,s,a,new et(r,0,0),n.length,!0))}(this,t,e),this}},{key:"setBlockType",value:function(t){return function(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=t.steps.length;t.doc.nodesBetween(e,n,(function(e,n){if(e.isTextblock&&!e.hasMarkup(r,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(t.doc,t.mapping.slice(i).map(n),r)){var s=null;if(r.schema.linebreakReplacement){var a="pre"==r.whitespace,u=!!r.contentMatch.matchType(r.schema.linebreakReplacement);a&&!u?s=!1:!a&&u&&(s=!0)}!1===s&&function(t,e,n,r){e.forEach((function(o,i){if(o.type==o.type.schema.linebreakReplacement){var s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text("\n"))}}))}(t,e,n,i),Te(t,t.mapping.slice(i).map(n,1),r,void 0,null===s);var c=t.mapping.slice(i),l=c.map(n,1),f=c.map(n+e.nodeSize,1);return t.step(new Me(l,f,l+1,f-1,new et(G.from(r.create(o,null,e.marks)),0,0),1,!0)),!0===s&&function(t,e,n,r){e.forEach((function(o,i){if(o.isText)for(var s,a=/\r?\n|\r/g;s=a.exec(o.text);){var u=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}))}(t,e,n,i),!1}}))}(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}},{key:"setNodeMarkup",value:function(t,e){return function(t,e,n,r,o){var i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);var s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Me(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new et(G.from(s),0,0),1,!0))}(this,t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}},{key:"setNodeAttribute",value:function(t,e,n){return this.step(new Ke(t,e,n)),this}},{key:"setDocAttribute",value:function(t,e){return this.step(new Ge(t,e)),this}},{key:"addNodeMark",value:function(t,e){return this.step(new Se(t,e)),this}},{key:"removeNodeMark",value:function(t,e){if(!(e instanceof Z)){var n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(n.marks)))return this}return this.step(new Oe(t,e)),this}},{key:"split",value:function(t){return function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=t.doc.resolve(e),i=G.empty,s=G.empty,a=o.depth,u=o.depth-n,c=n-1;a>u;a--,c--){i=G.from(o.node(a).copy(i));var l=r&&r[c];s=G.from(l?l.type.create(l.attrs,s):o.node(a).copy(s))}t.step(new Ce(e,e,new et(i.append(s),n,n),!0))}(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}},{key:"addMark",value:function(t,e,n){return function(t,e,n,r){var o,i,s=[],a=[];t.doc.nodesBetween(e,n,(function(t,u,c){if(t.isInline){var l=t.marks;if(!r.isInSet(l)&&c.type.allowsMarkType(r.type)){for(var f=Math.max(u,e),h=Math.min(u+t.nodeSize,n),p=r.addToSet(l),d=0;d<l.length;d++)l[d].isInSet(p)||(o&&o.to==f&&o.mark.eq(l[d])?o.to=h:s.push(o=new xe(f,h,l[d])));i&&i.to==f?i.to=h:a.push(i=new ke(f,h,r))}}})),s.forEach((function(e){return t.step(e)})),a.forEach((function(e){return t.step(e)}))}(this,t,e,n),this}},{key:"removeMark",value:function(t,e,n){return function(t,e,n,r){var o=[],i=0;t.doc.nodesBetween(e,n,(function(t,s){if(t.isInline){i++;var a=null;if(r instanceof Bt)for(var u,c=t.marks;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c);else r?r.isInSet(t.marks)&&(a=[r]):a=t.marks;if(a&&a.length)for(var l=Math.min(s+t.nodeSize,n),f=0;f<a.length;f++){for(var h=a[f],p=void 0,d=0;d<o.length;d++){var v=o[d];v.step==i-1&&h.eq(o[d].style)&&(p=v)}p?(p.to=l,p.step=i):o.push({style:h,from:Math.max(s,e),to:l,step:i})}}})),o.forEach((function(e){return t.step(new xe(e.from,e.to,e.style))}))}(this,t,e,n),this}},{key:"clearIncompatible",value:function(t,e,n){return Te(this,t,e,n),this}}])}();function Qe(t,e,n){return e=en(e),function(t,e){if(e&&("object"==on(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ze()?Reflect.construct(e,n||[],en(t).constructor):e.apply(t,n))}function Ze(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ze=function(){return!!t})()}function tn(){return tn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=en(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},tn.apply(null,arguments)}function en(t){return en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},en(t)}function nn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rn(t,e)}function rn(t,e){return rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rn(t,e)}function on(t){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(t)}function sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cn(r.key),r)}}function un(t,e,n){return e&&an(t.prototype,e),n&&an(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cn(t){var e=function(t,e){if("object"!=on(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=on(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==on(e)?e:e+""}var ln=Object.create(null),fn=function(){return un((function t(e,n,r){sn(this,t),this.$anchor=e,this.$head=n,this.ranges=r||[new hn(e.min(n),e.max(n))]}),[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.empty,n=e.content.lastChild,r=null,o=0;o<e.openEnd;o++)r=n,n=n.lastChild;for(var i=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var u=s[a],c=u.$from,l=u.$to,f=t.mapping.slice(i);t.replaceRange(f.map(c.pos),f.map(l.pos),a?et.empty:e),0==a&&xn(t,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,u=t.mapping.slice(n),c=u.map(s.pos),l=u.map(a.pos);o?t.deleteRange(c,l):(t.replaceRangeWith(c,l,e),xn(t,n,e.isInline?-1:1))}}},{key:"getBookmark",value:function(){return vn.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.parent.inlineContent?new vn(t):kn(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?kn(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):kn(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}return null}},{key:"near",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(t,e)||this.findFrom(t,-e)||new bn(t.node(0))}},{key:"atStart",value:function(t){return kn(t,t,0,0,1)||new bn(t)}},{key:"atEnd",value:function(t){return kn(t,t,t.content.size,t.childCount,-1)||new bn(t)}},{key:"fromJSON",value:function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=ln[e.type];if(!n)throw new RangeError("No selection type ".concat(e.type," defined"));return n.fromJSON(t,e)}},{key:"jsonID",value:function(t,e){if(t in ln)throw new RangeError("Duplicate use of selection JSON ID "+t);return ln[t]=e,e.prototype.jsonID=t,e}}])}();fn.prototype.visible=!0;var hn=un((function t(e,n){sn(this,t),this.$from=e,this.$to=n})),pn=!1;function dn(t){pn||t.parent.inlineContent||(pn=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var vn=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return sn(this,e),dn(t),dn(n),Qe(this,e,[t,n])}return nn(e,t),un(e,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(t,n){var r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return fn.near(r);var o=t.resolve(n.map(this.anchor));return new e(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.empty;if(tn(en(e.prototype),"replace",this).call(this,t,n),n==et.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}},{key:"eq",value:function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head}},{key:"getBookmark",value:function(){return new mn(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))}},{key:"create",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}},{key:"between",value:function(t,n,r){var o=t.pos-n.pos;if(r&&!o||(r=o>=0?1:-1),!n.parent.inlineContent){var i=fn.findFrom(n,r,!0)||fn.findFrom(n,-r,!0);if(!i)return fn.near(n,r);n=i.$head}return t.parent.inlineContent||(0==o||(t=(fn.findFrom(t,-r,!0)||fn.findFrom(t,r,!0)).$anchor).pos<n.pos!=o<0)&&(t=n),new e(t,n)}}])}(fn);fn.jsonID("text",vn);var mn=function(){function t(e,n){sn(this,t),this.anchor=e,this.head=n}return un(t,[{key:"map",value:function(e){return new t(e.map(this.anchor),e.map(this.head))}},{key:"resolve",value:function(t){return vn.between(t.resolve(this.anchor),t.resolve(this.head))}}])}(),yn=function(t){function e(t){var n;sn(this,e);var r=t.nodeAfter,o=t.node(0).resolve(t.pos+r.nodeSize);return(n=Qe(this,e,[t,o])).node=r,n}return nn(e,t),un(e,[{key:"map",value:function(t,n){var r=n.mapResult(this.anchor),o=r.deleted,i=r.pos,s=t.resolve(i);return o?fn.near(s):new e(s)}},{key:"content",value:function(){return new et(G.from(this.node),0,0)}},{key:"eq",value:function(t){return t instanceof e&&t.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new gn(this.anchor)}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))}},{key:"create",value:function(t,n){return new e(t.resolve(n))}},{key:"isSelectable",value:function(t){return!t.isText&&!1!==t.type.spec.selectable}}])}(fn);yn.prototype.visible=!1,fn.jsonID("node",yn);var gn=function(){function t(e){sn(this,t),this.anchor=e}return un(t,[{key:"map",value:function(e){var n=e.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new mn(o,o):new t(o)}},{key:"resolve",value:function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&yn.isSelectable(n)?new yn(e):fn.near(e)}}])}(),bn=function(t){function e(t){return sn(this,e),Qe(this,e,[t.resolve(0),t.resolve(t.content.size)])}return nn(e,t),un(e,[{key:"replace",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et.empty;if(n==et.empty){t.delete(0,t.doc.content.size);var r=fn.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else tn(en(e.prototype),"replace",this).call(this,t,n)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(t){return new e(t)}},{key:"eq",value:function(t){return t instanceof e}},{key:"getBookmark",value:function(){return wn}}],[{key:"fromJSON",value:function(t){return new e(t)}}])}(fn);fn.jsonID("all",bn);var wn={map:function(){return this},resolve:function(t){return new bn(t)}};function kn(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.inlineContent)return vn.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&yn.isSelectable(a))return yn.create(t,n-(o<0?a.nodeSize:0))}else{var u=kn(t,a,n+o,o<0?a.childCount:0,o,i);if(u)return u}n+=a.nodeSize*o}return null}function xn(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,i=t.steps[r];(i instanceof Ce||i instanceof Me)&&(t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(fn.near(t.doc.resolve(o),n)))}}var Sn=function(t){function e(t){var n;return sn(this,e),(n=Qe(this,e,[t.doc])).curSelectionFor=0,n.updated=0,n.meta=Object.create(null),n.time=Date.now(),n.curSelection=t.selection,n.storedMarks=t.storedMarks,n}return nn(e,t),un(e,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(1&this.updated)>0}},{key:"setStoredMarks",value:function(t){return this.storedMarks=t,this.updated|=2,this}},{key:"ensureMarks",value:function(t){return Z.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}},{key:"addStoredMark",value:function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(2&this.updated)>0}},{key:"addStep",value:function(t,n){tn(en(e.prototype),"addStep",this).call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null}},{key:"setTime",value:function(t){return this.time=t,this}},{key:"replaceSelection",value:function(t){return this.selection.replace(this,t),this}},{key:"replaceSelectionWith",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Z.none))),n.replaceWith(this,t),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(t,e,n){var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(fn.near(this.selection.$to)),this}},{key:"setMeta",value:function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}},{key:"getMeta",value:function(t){return this.meta["string"==typeof t?t:t.key]}},{key:"isGeneric",get:function(){for(var t in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=4,this}},{key:"scrolledIntoView",get:function(){return(4&this.updated)>0}}])}(Xe);function On(t,e){return e&&t?t.bind(e):t}var Cn=un((function t(e,n,r){sn(this,t),this.name=e,this.init=On(n.init,r),this.apply=On(n.apply,r)})),Mn=[new Cn("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Cn("selection",{init:function(t,e){return t.selection||fn.atStart(e.doc)},apply:function(t){return t.selection}}),new Cn("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Cn("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],En=un((function t(e,n){var r=this;sn(this,t),this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Mn.slice(),n&&n.forEach((function(t){if(r.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");r.plugins.push(t),r.pluginsByKey[t.key]=t,t.spec.state&&r.fields.push(new Cn(t.key,t.spec.state,t))}))})),Tn=function(){function t(e){sn(this,t),this.config=e}return un(t,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(t){return this.applyTransaction(t).state}},{key:"filterTransaction",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0}},{key:"applyTransaction",value:function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,u=r?r[i].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,u,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(var l=0;l<this.config.plugins.length;l++)r.push(l<i?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}}},{key:"applyInner",value:function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new t(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}},{key:"tr",get:function(){return new Sn(this)}},{key:"reconfigure",value:function(e){for(var n=new En(this.schema,e.plugins),r=n.fields,o=new t(n),i=0;i<r.length;i++){var s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}},{key:"toJSON",value:function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==on(t))for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e}}],[{key:"create",value:function(e){for(var n=new En(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new t(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}},{key:"fromJSON",value:function(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new En(e.schema,e.plugins),i=new t(o);return o.fields.forEach((function(t){if("doc"==t.name)i.doc=bt.fromJSON(e.schema,n.doc);else if("selection"==t.name)i.selection=fn.fromJSON(i.doc,n.selection);else if("storedMarks"==t.name)n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(var o in r){var s=r[o],a=s.spec.state;if(s.key==t.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(i[t.name]=a.fromJSON.call(s,e,n[o],i))}i[t.name]=t.init(e,i)}})),i}}])}();function Nn(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=Nn(o,e,{})),n[r]=o}return n}var An=function(){return un((function t(e){sn(this,t),this.spec=e,this.props={},e.props&&Nn(e.props,this,this.props),this.key=e.key?e.key.key:Rn("plugin")}),[{key:"getState",value:function(t){return t[this.key]}}])}(),Dn=Object.create(null);function Rn(t){return t in Dn?t+"$"+ ++Dn[t]:(Dn[t]=0,t+"$")}var Pn=function(){return un((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";sn(this,t),this.key=Rn(e)}),[{key:"get",value:function(t){return t.config.pluginsByKey[this.key]}},{key:"getState",value:function(t){return t[this.key]}}])}();function In(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=jn(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function jn(t,e){if(t){if("string"==typeof t)return zn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(t,e):void 0}}function zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ln(t,e,n){return e=Vn(e),function(t,e){if(e&&("object"==$n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bn()?Reflect.construct(e,n||[],Vn(t).constructor):e.apply(t,n))}function Bn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bn=function(){return!!t})()}function Fn(){return Fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Vn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Fn.apply(null,arguments)}function Vn(t){return Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vn(t)}function qn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_n(t,e)}function _n(t,e){return _n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_n(t,e)}function $n(t){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(t)}function Un(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hn(r.key),r)}}function Wn(t,e,n){return e&&Jn(t.prototype,e),n&&Jn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hn(t){var e=function(t,e){if("object"!=$n(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=$n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$n(e)?e:e+""}var Kn=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},Gn=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},Yn=null,Xn=function(t,e,n){var r=Yn||(Yn=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},Qn=function(t,e,n,r){return n&&(tr(t,e,n,r,-1)||tr(t,e,n,r,1))},Zn=/^(img|br|input|textarea|hr)$/i;function tr(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:er(t))){var i=t.parentNode;if(!i||1!=i.nodeType||nr(t)||Zn.test(t.nodeName)||"false"==t.contentEditable)return!1;e=Kn(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?er(t):0}}}function er(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function nr(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var rr=function(t){return t.focusNode&&Qn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function or(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}var ir="undefined"!=typeof navigator?navigator:null,sr="undefined"!=typeof document?document:null,ar=ir&&ir.userAgent||"",ur=/Edge\/(\d+)/.exec(ar),cr=/MSIE \d/.exec(ar),lr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ar),fr=!!(cr||lr||ur),hr=cr?document.documentMode:lr?+lr[1]:ur?+ur[1]:0,pr=!fr&&/gecko\/(\d+)/i.test(ar);pr&&(/Firefox\/(\d+)/.exec(ar)||[0,0])[1];var dr=!fr&&/Chrome\/(\d+)/.exec(ar),vr=!!dr,mr=dr?+dr[1]:0,yr=!fr&&!!ir&&/Apple Computer/.test(ir.vendor),gr=yr&&(/Mobile\/\w+/.test(ar)||!!ir&&ir.maxTouchPoints>2),br=gr||!!ir&&/Mac/.test(ir.platform),wr=!!ir&&/Win/.test(ir.platform),kr=/Android \d/.test(ar),xr=!!sr&&"webkitFontSmoothing"in sr.documentElement.style,Sr=xr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Or(t){var e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Cr(t,e){return"number"==typeof t?t:t[e]}function Mr(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Er(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=n||t.dom;s;s=Gn(s))if(1==s.nodeType){var a=s,u=a==i.body,c=u?Or(i):Mr(a),l=0,f=0;if(e.top<c.top+Cr(r,"top")?f=-(c.top-e.top+Cr(o,"top")):e.bottom>c.bottom-Cr(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+Cr(o,"top")-c.top:e.bottom-c.bottom+Cr(o,"bottom")),e.left<c.left+Cr(r,"left")?l=-(c.left-e.left+Cr(o,"left")):e.right>c.right-Cr(r,"right")&&(l=e.right-c.right+Cr(o,"right")),l||f)if(u)i.defaultView.scrollBy(l,f);else{var h=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),l&&(a.scrollLeft+=l);var d=a.scrollLeft-h,v=a.scrollTop-p;e={left:e.left-d,top:e.top-v,right:e.right-d,bottom:e.bottom-v}}if(u||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function Tr(t){for(var e=[],n=t.ownerDocument,r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Gn(r));return e}function Nr(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Ar=null;function Dr(t,e){for(var n,r,o,i,s=2e8,a=0,u=e.top,c=e.top,l=t.firstChild,f=0;l;l=l.nextSibling,f++){var h=void 0;if(1==l.nodeType)h=l.getClientRects();else{if(3!=l.nodeType)continue;h=Xn(l).getClientRects()}for(var p=0;p<h.length;p++){var d=h[p];if(d.top<=u&&d.bottom>=c){u=Math.max(d.bottom,u),c=Math.min(d.top,c);var v=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(v<s){n=l,s=v,r=v&&3==n.nodeType?{left:d.right<e.left?d.right:d.left,top:e.top}:e,1==l.nodeType&&v&&(a=f+(e.left>=(d.left+d.right)/2?1:0));continue}}else d.top>e.top&&!o&&d.left<=e.left&&d.right>=e.left&&(o=l,i={left:Math.max(d.left,Math.min(d.right,e.left)),top:d.top});!n&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(a=f+1)}}return!n&&o&&(n=o,r=i,s=0),n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=zr(r,1);if(i.top!=i.bottom&&Rr(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||s&&1==n.nodeType?{node:t,offset:a}:Dr(n,r)}function Rr(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Pr(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=t.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),u=0;u<a.length;u++){var c=a[u];if(Rr(e,c))return Pr(s,e,c)}if((i=(i+1)%r)==o)break}return t}function Ir(t,e){var n,r=t.dom.ownerDocument,o=0,i=function(t,e,n){if(t.caretPositionFromPoint)try{var r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(t){}if(t.caretRangeFromPoint){var o=t.caretRangeFromPoint(e,n);if(o)return{node:o.startContainer,offset:o.startOffset}}}(r,e.left,e.top);i&&(n=i.node,o=i.offset);var s,a=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top);if(!a||!t.dom.contains(1!=a.nodeType?a.parentNode:a)){var u=t.dom.getBoundingClientRect();if(!Rr(e,u))return null;if(!(a=Pr(t.dom,e,u)))return null}if(yr)for(var c=a;n&&c;c=Gn(c))c.draggable&&(n=void 0);if(a=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(a,e),n){if(pr&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length){var l,f=n.childNodes[o];"IMG"==f.nodeName&&(l=f.getBoundingClientRect()).right<=e.left&&l.bottom>e.top&&o++}var h;xr&&o&&1==n.nodeType&&1==(h=n.childNodes[o-1]).nodeType&&"false"==h.contentEditable&&h.getBoundingClientRect().top>=e.top&&o--,n==t.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(s=function(t,e,n,r){for(var o=-1,i=e,s=!1;i!=t.dom;){var a=t.docView.nearestDesc(i,!0);if(!a)return null;if(1==a.dom.nodeType&&(a.node.isBlock&&a.parent||!a.contentDOM)){var u=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!s&&u.left>r.left||u.top>r.top?o=a.posBefore:(!s&&u.right<r.left||u.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText)return(a.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?a.posBefore:a.posAfter}i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}(t,n,o,e))}null==s&&(s=function(t,e,n){var r=Dr(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}(t,a,e));var p=t.docView.nearestDesc(a,!0);return{pos:s,inside:p?p.posAtStart-p.border:-1}}function jr(t){return t.top<t.bottom||t.left<t.right}function zr(t,e){var n=t.getClientRects();if(n.length){var r=n[e<0?0:n.length-1];if(jr(r))return r}return Array.prototype.find.call(n,jr)||t.getBoundingClientRect()}var Lr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Br(t,e,n){var r=t.docView.domFromPos(e,n<0?-1:1),o=r.node,i=r.offset,s=r.atom,a=xr||pr;if(3==o.nodeType){if(!a||!Lr.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var u=i,c=i,l=n<0?1:-1;return n<0&&!i?(c++,l=-1):n>=0&&i==o.nodeValue.length?(u--,l=1):n<0?u--:c++,Fr(zr(Xn(o,u,c),l),l<0)}var f=zr(Xn(o,i,i),n);if(pr&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var h=zr(Xn(o,i-1,i-1),-1);if(h.top==f.top){var p=zr(Xn(o,i,i+1),-1);if(p.top!=f.top)return Fr(p,p.left<h.left)}}return f}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(null==s&&i&&(n<0||i==er(o))){var d=o.childNodes[i-1];if(1==d.nodeType)return Vr(d.getBoundingClientRect(),!1)}if(null==s&&i<er(o)){var v=o.childNodes[i];if(1==v.nodeType)return Vr(v.getBoundingClientRect(),!0)}return Vr(o.getBoundingClientRect(),n>=0)}if(null==s&&i&&(n<0||i==er(o))){var m=o.childNodes[i-1],y=3==m.nodeType?Xn(m,er(m)-(a?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(y)return Fr(zr(y,1),!1)}if(null==s&&i<er(o)){for(var g=o.childNodes[i];g.pmViewDesc&&g.pmViewDesc.ignoreForCoords;)g=g.nextSibling;var b=g?3==g.nodeType?Xn(g,0,a?0:1):1==g.nodeType?g:null:null;if(b)return Fr(zr(b,-1),!0)}return Fr(zr(3==o.nodeType?Xn(o):o,-n),n>=0)}function Fr(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Vr(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function qr(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}var _r=/[\u0590-\u08ac]/,$r=null,Ur=null,Jr=!1;var Wr=function(){return Wn((function t(e,n,r,o){Un(this,t),this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=0,r.pmViewDesc=this}),[{key:"matchesWidget",value:function(t){return!1}},{key:"matchesMark",value:function(t){return!1}},{key:"matchesNode",value:function(t,e,n){return!1}},{key:"matchesHack",value:function(t){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(t){return!1}},{key:"size",get:function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var t=0;t<this.children.length;t++)this.children[t].destroy()}},{key:"posBeforeChild",value:function(t){for(var e=0,n=this.posAtStart;;e++){var r=this.children[e];if(r==t)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(t==this.dom&&this.contentDOM)a=e>Kn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var u=t;;u=u.parentNode){if(u==this.dom){a=!1;break}if(u.previousSibling)break}if(null==a&&e==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.nextSibling)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r),i=void 0;if(o&&(!e||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==t.nodeType?t:t.parentNode):i==t))return o;n=!1}}}},{key:"getDesc",value:function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e}},{key:"posFromDOM",value:function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1}},{key:"descAt",value:function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}}},{key:"domFromPos",value:function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};for(var n,r=0,o=0,i=0;r<this.children.length;r++){var s=this.children[r],a=i+s.size;if(a>t||s instanceof Zr){o=t-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,e);for(;r&&!(n=this.children[r-1]).size&&n instanceof Hr&&n.side>=0;r--);if(e<=0){for(var u,c=!0;(u=r?this.children[r-1]:null)&&u.dom.parentNode!=this.contentDOM;r--,c=!1);return u&&e&&c&&!u.border&&!u.domAtom?u.domFromPos(u.size,e):{node:this.contentDOM,offset:u?Kn(u.dom)+1:0}}for(var l,f=!0;(l=r<this.children.length?this.children[r]:null)&&l.dom.parentNode!=this.contentDOM;r++,f=!1);return l&&f&&!l.border&&!l.domAtom?l.domFromPos(0,e):{node:this.contentDOM,offset:l?Kn(l.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],u=i+a.size;if(-1==r&&t<=u){var c=i+a.border;if(t>=c&&e<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,c);t=i;for(var l=s;l>0;l--){var f=this.children[l-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){r=Kn(f.dom)+1;break}t-=f.size}-1==r&&(r=0)}if(r>-1&&(u>e||s==this.children.length-1)){e=u;for(var h=s+1;h<this.children.length;h++){var p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=Kn(p.dom);break}e+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}}},{key:"emptyChildAt",value:function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}},{key:"domAfterPos",value:function(t){var e=this.domFromPos(t,0),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}},{key:"setSelection",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(t,e),i=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var u=this.children[s],c=a+u.size;if(o>a&&i<c)return u.setSelection(t-a-u.border,e-a-u.border,n,r);a=c}var l=this.domFromPos(t,t?-1:1),f=e==t?l:this.domFromPos(e,e?-1:1),h=n.getSelection(),p=!1;if((pr||yr)&&t==e){var d=l,v=d.node,m=d.offset;if(3==v.nodeType){if((p=!(!m||"\n"!=v.nodeValue[m-1]))&&m==v.nodeValue.length)for(var y,g=v;g;g=g.parentNode){if(y=g.nextSibling){"BR"==y.nodeName&&(l=f={node:y.parentNode,offset:Kn(y)+1});break}var b=g.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{var w=v.childNodes[m-1];p=w&&("BR"==w.nodeName||"false"==w.contentEditable)}}if(pr&&h.focusNode&&h.focusNode!=f.node&&1==h.focusNode.nodeType){var k=h.focusNode.childNodes[h.focusOffset];k&&"false"==k.contentEditable&&(r=!0)}if(r||p&&yr||!Qn(l.node,l.offset,h.anchorNode,h.anchorOffset)||!Qn(f.node,f.offset,h.focusNode,h.focusOffset)){var x=!1;if((h.extend||t==e)&&!p){h.collapse(l.node,l.offset);try{t!=e&&h.extend(f.node,f.offset),x=!0}catch(t){}}if(!x){if(t>e){var S=l;l=f,f=S}var O=document.createRange();O.setEnd(f.node,f.offset),O.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(O)}}}},{key:"ignoreMutation",value:function(t){return!this.contentDOM&&"selection"!=t.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?2:1,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}},{key:"markParentsDirty",value:function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}},{key:"isText",value:function(t){return!1}}])}(),Hr=function(t){function e(t,n,r,o){var i;Un(this,e);var s,a=n.type.toDOM;if("function"==typeof a&&(a=a(r,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:o}))),!n.type.spec.raw){if(1!=a.nodeType){var u=document.createElement("span");u.appendChild(a),a=u}a.contentEditable="false",a.classList.add("ProseMirror-widget")}return(i=Ln(this,e,[t,[],a,null])).widget=n,i.widget=n,s=i,i}return qn(e,t),Wn(e,[{key:"matchesWidget",value:function(t){return 0==this.dirty&&t.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)}},{key:"ignoreMutation",value:function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),Fn(Vn(e.prototype),"destroy",this).call(this)}},{key:"domAtom",get:function(){return!0}},{key:"side",get:function(){return this.widget.type.side}}])}(Wr),Kr=function(t){function e(t,n,r,o){var i;return Un(this,e),(i=Ln(this,e,[t,[],n,null])).textDOM=r,i.text=o,i}return qn(e,t),Wn(e,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}},{key:"domFromPos",value:function(t){return{node:this.textDOM,offset:t}}},{key:"ignoreMutation",value:function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}])}(Wr),Gr=function(t){function e(t,n,r,o){var i;return Un(this,e),(i=Ln(this,e,[t,[],r,o])).mark=n,i}return qn(e,t),Wn(e,[{key:"parseRule",value:function(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(t){return 3!=this.dirty&&this.mark.eq(t)}},{key:"markDirty",value:function(t,n){if(Fn(Vn(e.prototype),"markDirty",this).call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}}},{key:"slice",value:function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=ho(i,n,s,r)),t>0&&(i=ho(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}}],[{key:"create",value:function(t,n,r,o){var i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return s&&s.dom||(s=Xt.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,s.dom,s.contentDOM||s.dom)}}])}(Wr),Yr=function(t){function e(t,n,r,o,i,s,a,u,c){var l;return Un(this,e),(l=Ln(this,e,[t,[],i,s])).node=n,l.outerDeco=r,l.innerDeco=o,l.nodeDOM=a,l}return qn(e,t),Wn(e,[{key:"parseRule",value:function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;n>=0;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=function(){return G.empty})}else e.contentElement=this.contentDOM;else e.getContent=function(){return t.node.content};return e}},{key:"matchesNode",value:function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&uo(e,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(t,e){var n=this,r=this.node.inlineContent,o=e,i=t.composing?this.localCompositionInfo(t,e):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,u=new lo(this,s&&s.node,t);!function(t,e,n,r){var o=e.locals(t),i=0;if(0!=o.length)for(var s=0,a=[],u=null,c=0;;){for(var l=void 0,f=void 0;s<o.length&&o[s].to==i;){var h=o[s++];h.widget&&(l?(f||(f=[l])).push(h):l=h)}if(l)if(f){f.sort(fo);for(var p=0;p<f.length;p++)n(f[p],c,!!u)}else n(l,c,!!u);var d=void 0,v=void 0;if(u)v=-1,d=u,u=null;else{if(!(c<t.childCount))break;v=c,d=t.child(c++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);var y=i+d.nodeSize;if(d.isText){var g=y;s<o.length&&o[s].from<g&&(g=o[s].from);for(var b=0;b<a.length;b++)a[b].to<g&&(g=a[b].to);g<y&&(u=d.cut(g-i),d=d.cut(0,g-i),y=g,v=-1)}else for(;s<o.length&&o[s].to<y;)s++;r(d,d.isInline&&!d.isLeaf?a.filter((function(t){return!t.inline})):a.slice(),e.forChild(i,d),v),i=y}else for(var w=0;w<t.childCount;w++){var k=t.child(w);r(k,o,e.forChild(i,k),w),i+=k.nodeSize}}(this.node,this.innerDeco,(function(e,i,s){e.spec.marks?u.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!s&&u.syncToMarks(i==n.node.childCount?Z.none:n.node.child(i).marks,r,t),u.placeWidget(e,t,o)}),(function(e,n,s,c){var l;u.syncToMarks(e.marks,r,t),u.findNodeMatch(e,n,s,c)||a&&t.state.selection.from>o&&t.state.selection.to<o+e.nodeSize&&(l=u.findIndexWithChild(i.node))>-1&&u.updateNodeAt(e,n,s,l,t)||u.updateNextNode(e,n,s,t,c,o)||u.addNode(e,n,s,t,o),o+=e.nodeSize})),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(s&&this.protectLocalComposition(t,s),eo(this.contentDOM,this.children,t),gr&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))}},{key:"localCompositionInfo",value:function(t,e){var n=t.state.selection,r=n.from,o=n.to;if(!(t.state.selection instanceof vn)||r<e||o>e+this.node.content.size)return null;var i=t.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){var s=i.nodeValue,a=function(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var u=s.text;o<t.childCount;){var c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;u+=c.text}if(i>=n){if(i>=r&&u.slice(r-e.length-a,r-a)==e)return r-e.length;var l=a<r?u.lastIndexOf(e,r-a-1):-1;if(l>=0&&l+e.length+a>=n)return a+l;if(n==r&&u.length>=r+e.length-a&&u.slice(r-a,r-a+e.length)==e)return r}}}return-1}(this.node.content,s,r-e,o-e);return a<0?null:{node:i,pos:a,text:s}}return{node:i,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}var s=new Kr(this,i,n,o);t.input.compositionNodes.push(s),this.children=ho(this.children,r,r+o.length,t,s)}}},{key:"update",value:function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node)||(this.updateInner(t,e,n,r),0))}},{key:"updateInner",value:function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}},{key:"updateOuterDeco",value:function(t){if(!uo(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=io(this.dom,this.nodeDOM,oo(this.outerDeco,this.node,e),oo(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(t,n,r,o,i,s){var a,u=i.nodeViews[n.type.name],c=u&&u(n,i,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:s}),r,o),l=c&&c.dom,f=c&&c.contentDOM;if(n.isText)if(l){if(3!=l.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else l=document.createTextNode(n.text);else if(!l){var h=Xt.renderSpec(document,n.type.spec.toDOM(n));l=h.dom,f=h.contentDOM}f||n.isText||"BR"==l.nodeName||(l.hasAttribute("contenteditable")||(l.contentEditable="false"),n.type.spec.draggable&&(l.draggable=!0));var p=l;return l=ao(l,r,n),c?a=new to(t,n,r,o,l,f||null,p,c,i,s+1):n.isText?new Qr(t,n,r,o,l,p,i):new e(t,n,r,o,l,f||null,p,i,s+1)}}])}(Wr);function Xr(t,e,n,r,o){ao(r,e,t);var i=new Yr(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}var Qr=function(t){function e(t,n,r,o,i,s,a){return Un(this,e),Ln(this,e,[t,n,r,o,i,null,s,a,0])}return qn(e,t),Wn(e,[{key:"parseRule",value:function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}},{key:"update",value:function(t,e,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node)||(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,0))}},{key:"inParent",value:function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}},{key:"domFromPos",value:function(t){return{node:this.nodeDOM,offset:t}}},{key:"localPosFromDOM",value:function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):Fn(Vn(e.prototype),"localPosFromDOM",this).call(this,t,n,r)}},{key:"ignoreMutation",value:function(t){return"characterData"!=t.type&&"selection"!=t.type}},{key:"slice",value:function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}},{key:"markDirty",value:function(t,n){Fn(Vn(e.prototype),"markDirty",this).call(this,t,n),this.dom==this.nodeDOM||0!=t&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)}},{key:"domAtom",get:function(){return!1}},{key:"isText",value:function(t){return this.node.text==t}}])}(Yr),Zr=function(t){function e(){return Un(this,e),Ln(this,e,arguments)}return qn(e,t),Wn(e,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(t){return 0==this.dirty&&this.dom.nodeName==t}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}])}(Wr),to=function(t){function e(t,n,r,o,i,s,a,u,c,l){var f;return Un(this,e),(f=Ln(this,e,[t,n,r,o,i,s,a,c,l])).spec=u,f}return qn(e,t),Wn(e,[{key:"update",value:function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n,r);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&Fn(Vn(e.prototype),"update",this).call(this,t,n,r,o)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():Fn(Vn(e.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():Fn(Vn(e.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):Fn(Vn(e.prototype),"setSelection",this).call(this,t,n,r,o)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),Fn(Vn(e.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}},{key:"ignoreMutation",value:function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):Fn(Vn(e.prototype),"ignoreMutation",this).call(this,t)}}])}(Yr);function eo(t,e,n){for(var r=t.firstChild,o=!1,i=0;i<e.length;i++){var s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=co(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof Gr){var u=r?r.previousSibling:t.lastChild;eo(s.contentDOM,s.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=co(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}var no=function(t){t&&(this.nodeName=t)};no.prototype=Object.create(null);var ro=[new no];function oo(t,e,n){if(0==t.length)return ro;for(var r=n?ro[0]:new no,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(r=new no(s.nodeName)),s){var u=s[a];null!=u&&(n&&1==o.length&&o.push(r=new no(e.isInline?"span":"div")),"class"==a?r.class=(r.class?r.class+" ":"")+u:"style"==a?r.style=(r.style?r.style+";":"")+u:"nodeName"!=a&&(r[a]=u))}}return o}function io(t,e,n,r){if(n==ro&&r==ro)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var u=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(u=o.parentNode)&&u.nodeName.toLowerCase()==s.nodeName||((u=document.createElement(s.nodeName)).pmIsDeco=!0,u.appendChild(o),a=ro[0]),o=u}so(o,a||ro[0],s)}return o}function so(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[],a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var u=0;u<s.length;u++)-1==i.indexOf(s[u])&&t.classList.add(s[u]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style)for(var c,l=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=l.exec(e.style);)t.style.removeProperty(c[1]);n.style&&(t.style.cssText+=n.style)}}function ao(t,e,n){return io(t,t,ro,oo(e,n,1!=t.nodeType))}function uo(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function co(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var lo=function(){return Wn((function t(e,n,r){Un(this,t),this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(t,e){var n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];t:for(;o>0;){for(var a=void 0;;)if(r){var u=n.children[r-1];if(!(u instanceof Gr)){a=u,r--;break}n=u,r=u.children.length}else{if(n==e)break t;r=n.parent.children.indexOf(n),n=n.parent}var c=a.node;if(c){if(c!=t.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}(e.node.content,e)}),[{key:"destroyBetween",value:function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){var u=this.top.children[a];if(u.matchesMark(t[o])&&!this.isLocked(u.dom)){s=a;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=Gr.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}},{key:"findNodeMatch",value:function(t,e,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(t,e,n))i=this.top.children.indexOf(o,this.index);else for(var s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){var u=this.top.children[s];if(u.matchesNode(t,e,n)&&!this.preMatch.matched.has(u)){i=s;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))}},{key:"updateNodeAt",value:function(t,e,n,r,o){var i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(t,e,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}},{key:"findIndexWithChild",value:function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var n=t.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}t=e}}},{key:"updateNextNode",value:function(t,e,n,r,o,i){for(var s=this.index;s<this.top.children.length;s++){var a=this.top.children[s];if(a instanceof Yr){var u=this.preMatch.matched.get(a);if(null!=u&&u!=o)return!1;var c=a.dom,l=void 0,f=this.isLocked(c)&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&3!=a.dirty&&uo(e,a.outerDeco));if(!f&&a.update(t,e,n,r))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(l=this.recreateWrapper(a,t,e,n,r,i)))return this.top.children[this.index]=l,l.contentDOM&&(l.dirty=2,l.updateChildren(r,i+1),l.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(t,e,n,r,o,i){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content))return null;var s=Yr.create(this.top,e,n,r,o,i);if(s.contentDOM){s.children=t.children,t.children=[];var a,u=In(s.children);try{for(u.s();!(a=u.n()).done;)a.value.parent=s}catch(t){u.e(t)}finally{u.f()}}return t.destroy(),s}},{key:"addNode",value:function(t,e,n,r,o){var i=Yr.create(this.top,t,e,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}},{key:"placeWidget",value:function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new Hr(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){for(var t=this.top.children[this.index-1],e=this.top;t instanceof Gr;)t=(e=t).children[e.children.length-1];(!t||!(t instanceof Qr)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((yr||vr)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{var n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");var r=new Zr(this.top,[],n,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}},{key:"isLocked",value:function(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}])}();function fo(t,e){return t.type.side-e.type.side}function ho(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var u=t[s],c=a,l=a+=u.size;c>=n||l<=e?i.push(u):(c<e&&i.push(u.slice(0,e-c,r)),o&&(i.push(o),o=void 0),l>n&&i.push(u.slice(n-c,u.size,r)))}return i}function po(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;var o=t.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;var a,u,c=r.resolve(s);if(rr(n)){for(a=c;o&&!o.node;)o=o.parent;var l=o.node;if(o&&l.isAtom&&yn.isSelectable(l)&&o.parent&&(!l.isInline||!function(t,e,n){for(var r=0==e,o=e==er(t);r||o;){if(t==n)return!0;var i=Kn(t);if(!(t=t.parentNode))return!1;r=r&&0==i,o=o&&i==er(t)}}(n.focusNode,n.focusOffset,o.dom))){var f=o.posBefore;u=new yn(s==f?c:r.resolve(f))}}else{var h=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(h<0)return null;a=r.resolve(h)}return u||(u=So(t,a,c,"pointer"==e||t.state.selection.head<c.pos&&!i?1:-1)),u}function vo(t){return t.editable?t.hasFocus():Co(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function mo(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.state.selection;if(ko(t,n),vo(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&vr){var r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Qn(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,Kn(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&fr&&hr<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var i,s,a=n.anchor,u=n.head;!yo||n instanceof vn||(n.$from.parent.inlineContent||(i=go(t,n.from)),n.empty||n.$from.parent.inlineContent||(s=go(t,n.to))),t.docView.setSelection(a,u,t.root,e),yo&&(i&&wo(i),s&&wo(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);var n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((function(){vo(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}var yo=yr||vr&&mr<63;function go(t,e){var n=t.docView.domFromPos(e,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(yr&&i&&"false"==i.contentEditable)return bo(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return bo(i);if(s)return bo(s)}}function bo(t){return t.contentEditable="true",yr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function wo(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ko(t,e){if(e instanceof yn){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(xo(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else xo(t)}function xo(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function So(t,e,n,r){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||vn.between(e,n,r)}function Oo(t){return!(t.editable&&!t.hasFocus())&&Co(t)}function Co(t){var e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function Mo(t,e){var n=t.selection,r=n.$anchor,o=n.$head,i=e>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&fn.findFrom(s,e)}function Eo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function To(t,e,n){var r=t.state.selection;if(!(r instanceof vn)){if(r instanceof yn&&r.node.isInline)return Eo(t,new vn(e>0?r.$to:r.$from));var o=Mo(t.state,e);return!!o&&Eo(t,o)}if(n.indexOf("s")>-1){var i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;var a=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Eo(t,new vn(r.$anchor,a))}if(!r.empty)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){var u=Mo(t.state,e);return!!(u&&u instanceof yn)&&Eo(t,u)}if(!(br&&n.indexOf("m")>-1)){var c,l=r.$head,f=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!f||f.isText)return!1;var h=e<0?l.pos-f.nodeSize:l.pos;return!!(f.isAtom||(c=t.docView.descAt(h))&&!c.contentDOM)&&(yn.isSelectable(f)?Eo(t,new yn(e<0?t.state.doc.resolve(l.pos-f.nodeSize):l)):!!xr&&Eo(t,new vn(t.state.doc.resolve(e<0?h:h+f.nodeSize))))}}function No(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Ao(t,e){var n=t.pmViewDesc;return n&&0==n.size&&(e<0||t.nextSibling||"BR"!=t.nodeName)}function Do(t,e){return e<0?function(t){var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,s=!1;for(pr&&1==n.nodeType&&r<No(n)&&Ao(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(Ao(a,-1))o=n,i=--r;else{if(3!=a.nodeType)break;r=(n=a).nodeValue.length}}else{if(Ro(n))break;for(var u=n.previousSibling;u&&Ao(u,-1);)o=n.parentNode,i=Kn(u),u=u.previousSibling;if(u)r=No(n=u);else{if((n=n.parentNode)==t.dom)break;r=0}}s?Po(t,n,r):o&&Po(t,o,i)}}(t):function(t){var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=No(n);;)if(r<s){if(1!=n.nodeType)break;if(!Ao(n.childNodes[r],1))break;o=n,i=++r}else{if(Ro(n))break;for(var a=n.nextSibling;a&&Ao(a,1);)o=a.parentNode,i=Kn(a)+1,a=a.nextSibling;if(a)r=0,s=No(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}o&&Po(t,o,i)}}(t)}function Ro(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Po(t,e,n){var r,o;3!=e.nodeType&&((o=function(t,e){for(;t&&e==t.childNodes.length&&!nr(t);)e=Kn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){var n=t.childNodes[e];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=n,e=0}}(e,n))?(e=o,n=0):(r=function(t,e){for(;t&&!e&&!nr(t);)e=Kn(t),t=t.parentNode;for(;t&&e;){var n=t.childNodes[e-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=(t=n).childNodes.length}}(e,n))&&(e=r,n=r.nodeValue.length));var i=t.domSelection();if(rr(i)){var s=document.createRange();s.setEnd(e,n),s.setStart(e,n),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();var a=t.state;setTimeout((function(){t.state==a&&mo(t)}),50)}function Io(t,e){var n=t.state.doc.resolve(e);if(!vr&&!wr&&n.parent.inlineContent){var r=t.coordsAtPos(e);if(e>n.start()){var o=t.coordsAtPos(e-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){var s=t.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(t.dom).direction?"rtl":"ltr"}function jo(t,e,n){var r=t.state.selection;if(r instanceof vn&&!r.empty||n.indexOf("s")>-1)return!1;if(br&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=Mo(t.state,e);if(s&&s instanceof yn)return Eo(t,s)}if(!o.parent.inlineContent){var a=e<0?o:i,u=r instanceof bn?fn.near(a,e):fn.findFrom(a,e);return!!u&&Eo(t,u)}return!1}function zo(t,e){if(!(t.state.selection instanceof vn))return!0;var n=t.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a.delete(r.pos-s.nodeSize,r.pos):a.delete(r.pos,r.pos+s.nodeSize),t.dispatch(a),!0}return!1}function Lo(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Bo(t,e){t.someProp("transformCopied",(function(n){e=n(e,t)}));for(var n=[],r=e,o=r.content,i=r.openStart,s=r.openEnd;i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,s--;var a=o.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),o=a.content}var u=t.someProp("clipboardSerializer")||Xt.fromSchema(t.state.schema),c=Ko(),l=c.createElement("div");l.appendChild(u.serializeFragment(o,{document:c}));for(var f,h=l.firstChild,p=0;h&&1==h.nodeType&&(f=Wo[h.nodeName.toLowerCase()]);){for(var d=f.length-1;d>=0;d--){for(var v=c.createElement(f[d]);l.firstChild;)v.appendChild(l.firstChild);l.appendChild(v),p++}h=l.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice","".concat(i," ").concat(s).concat(p?" -".concat(p):""," ").concat(JSON.stringify(n))),{dom:l,text:t.someProp("clipboardTextSerializer",(function(n){return n(e,t)}))||e.content.textBetween(0,e.content.size,"\n\n"),slice:e}}function Fo(t,e,n,r,o){var i,s,a=o.parent.type.spec.code;if(!n&&!e)return null;var u=e&&(r||a||!n);if(u){if(t.someProp("transformPastedText",(function(n){e=n(e,a||r,t)})),a)return e?new et(G.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):et.empty;var c=t.someProp("clipboardTextParser",(function(n){return n(e,o,r,t)}));if(c)s=c;else{var l=o.marks(),f=t.state.schema,h=Xt.fromSchema(f);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((function(t){var e=i.appendChild(document.createElement("p"));t&&e.appendChild(h.serializeNode(f.text(t,l)))}))}}else t.someProp("transformPastedHTML",(function(e){n=e(n,t)})),i=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Ko().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);if((n=o&&Wo[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join("")),r.innerHTML=t,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}(n),xr&&function(t){for(var e=t.querySelectorAll(vr?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<e.length;n++){var r=e[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}(i);var p=i&&i.querySelector("[data-pm-slice]"),d=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(d&&d[3])for(var v=+d[3];v>0;v--){for(var m=i.firstChild;m&&1!=m.nodeType;)m=m.nextSibling;if(!m)break;i=m}if(!s){var y=t.someProp("clipboardParser")||t.someProp("domParser")||qt.fromSchema(t.state.schema);s=y.parseSlice(i,{preserveWhitespace:!(!u&&!d),context:o,ruleFromNode:function(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Vo.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(d)s=function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var o=t.content,i=t.openStart,s=t.openEnd,a=n.length-2;a>=0;a-=2){var u=r.nodes[n[a]];if(!u||u.hasRequiredAttrs())break;o=G.from(u.create(n[a+1],o)),i++,s++}return new et(o,i,s)}(Jo(s,+d[1],+d[2]),d[4]);else if(s=et.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n,r=function(){var n,r=e.node(o).contentMatchAt(e.index(o)),i=[];if(t.forEach((function(t){if(i){var e,o=r.findWrapping(t.type);if(!o)return i=null;if(e=i.length&&n.length&&_o(o,n,t,i[i.length-1],0))i[i.length-1]=e;else{i.length&&(i[i.length-1]=$o(i[i.length-1],n.length));var s=qo(t,o);i.push(s),r=r.matchType(s.type),n=o}}})),i)return{v:G.from(i)}},o=e.depth;o>=0;o--)if(n=r())return n.v;return t}(s.content,o),!0),s.openStart||s.openEnd){for(var g=0,b=0,w=s.content.firstChild;g<s.openStart&&!w.type.spec.isolating;g++,w=w.firstChild);for(var k=s.content.lastChild;b<s.openEnd&&!k.type.spec.isolating;b++,k=k.lastChild);s=Jo(s,g,b)}return t.someProp("transformPasted",(function(e){s=e(s,t)})),s}var Vo=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function qo(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.length-1;r>=n;r--)t=e[r].create(null,G.from(t));return t}function _o(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var i=_o(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(G.from(qo(n,t,o+1))))}}function $o(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,$o(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(G.empty,!0);return t.copy(n.append(r))}function Uo(t,e,n,r,o,i){var s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=Uo(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(G.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Jo(t,e,n){return e<t.openStart&&(t=new et(Uo(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new et(Uo(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var Wo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ho=null;function Ko(){return Ho||(Ho=document.implementation.createHTMLDocument("title"))}var Go={},Yo={},Xo={touchstart:!0,touchmove:!0},Qo=Wn((function t(){Un(this,t),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}));function Zo(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function ti(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=function(e){return ei(t,e)})}))}function ei(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function ni(t){return{left:t.clientX,top:t.clientY}}function ri(t,e,n,r,o){if(-1==r)return!1;for(var i,s=t.state.doc.resolve(r),a=function(r){if(t.someProp(e,(function(e){return r>s.depth?e(t,n,s.nodeAfter,s.before(r),o,!0):e(t,n,s.node(r),s.before(r),o,!1)})))return{v:!0}},u=s.depth+1;u>0;u--)if(i=a(u))return i.v;return!1}function oi(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function ii(t,e,n,r){return ri(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function si(t,e,n,r){return ri(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||function(t,e,n){if(0!=n.button)return!1;var r=t.state.doc;if(-1==e)return!!r.inlineContent&&(oi(t,vn.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(e),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)oi(t,vn.create(r,a+1,a+1+s.content.size),"pointer");else{if(!yn.isSelectable(s))continue;oi(t,yn.create(r,a),"pointer")}return!0}}(t,n,r)}function ai(t){return di(t)}Yo.keydown=function(t,e){var n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!li(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!kr||!vr||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!gr||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(function(e){return e(t,n)}))||function(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);if(8==n||br&&72==n&&"c"==r)return zo(t,-1)||Do(t,-1);if(46==n&&!e.shiftKey||br&&68==n&&"c"==r)return zo(t,1)||Do(t,1);if(13==n||27==n)return!0;if(37==n||br&&66==n&&"c"==r){var o=37==n?"ltr"==Io(t,t.state.selection.from)?-1:1:-1;return To(t,o,r)||Do(t,o)}if(39==n||br&&70==n&&"c"==r){var i=39==n?"ltr"==Io(t,t.state.selection.from)?1:-1:1;return To(t,i,r)||Do(t,i)}return 38==n||br&&80==n&&"c"==r?jo(t,-1,r)||Do(t,-1):40==n||br&&78==n&&"c"==r?function(t){if(!yr||t.state.selection.$head.parentOffset>0)return!1;var e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Lo(t,o,"true"),setTimeout((function(){return Lo(t,o,"false")}),20)}return!1}(t)||jo(t,1,r)||Do(t,1):r==(br?"m":"c")&&(66==n||73==n||89==n||90==n)}(t,n)?n.preventDefault():Zo(t,"key");else{var r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout((function(){t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",(function(e){return e(t,or(13,"Enter"))})),t.input.lastIOSEnter=0)}),200)}},Yo.keyup=function(t,e){16==e.keyCode&&(t.input.shiftKey=!1)},Yo.keypress=function(t,e){var n=e;if(!(li(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||br&&n.metaKey))if(t.someProp("handleKeyPress",(function(e){return e(t,n)})))n.preventDefault();else{var r=t.state.selection;if(!(r instanceof vn&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(n.charCode);/[\r\n]/.test(o)||t.someProp("handleTextInput",(function(e){return e(t,r.$from.pos,r.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}}};var ui=br?"metaKey":"ctrlKey";Go.mousedown=function(t,e){var n=e;t.input.shiftKey=n.shiftKey;var r=ai(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(n,t.input.lastClick)&&!n[ui]&&("singleClick"==t.input.lastClick.type?i="doubleClick":"doubleClick"==t.input.lastClick.type&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};var s=t.posAtCoords(ni(n));s&&("singleClick"==i?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new ci(t,s,n,!!r)):("doubleClick"==i?ii:si)(t,s.pos,s.inside,n)?n.preventDefault():Zo(t,"pointer"))};var ci=function(){return Wn((function t(e,n,r,o){var i,s,a=this;if(Un(this,t),this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ui],this.allowDefault=r.shiftKey,n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{var u=e.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}var c=o?null:r.target,l=c?e.docView.nearestDesc(c,!0):null;this.target=l&&1==l.dom.nodeType?l.dom:null;var f=e.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||f instanceof yn&&f.from<=s&&f.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!pr||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){a.view.input.mouseDown==a&&a.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zo(e,"pointer")}),[{key:"done",value:function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return mo(t.view)})),this.view.input.mouseDown=null}},{key:"up",value:function(t){if(this.done(),this.view.dom.contains(t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(ni(t))),this.updateAllowDefault(t),this.allowDefault||!e?Zo(this.view,"pointer"):function(t,e,n,r,o){return ri(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?function(t,e){if(-1==e)return!1;var n,r,o=t.state.selection;o instanceof yn&&(n=o.node);for(var i=t.state.doc.resolve(e),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(yn.isSelectable(a)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(oi(t,yn.create(t.state.doc,r),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&yn.isSelectable(r))&&(oi(t,new yn(n),"pointer"),!0)}(t,n))}(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||yr&&this.mightDrag&&!this.mightDrag.node.isAtom||vr&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(oi(this.view,fn.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Zo(this.view,"pointer")}}},{key:"move",value:function(t){this.updateAllowDefault(t),Zo(this.view,"pointer"),0==t.buttons&&this.done()}},{key:"updateAllowDefault",value:function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}])}();function li(t,e){return!!t.composing||!!(yr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Go.touchstart=function(t){t.input.lastTouch=Date.now(),ai(t),Zo(t,"pointer")},Go.touchmove=function(t){t.input.lastTouch=Date.now(),Zo(t,"pointer")},Go.contextmenu=function(t){return ai(t)};var fi=kr?5e3:-1;function hi(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((function(){return di(t)}),e))}function pi(t){var e;for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=((e=document.createEvent("Event")).initEvent("event",!0,!0),e.timeStamp));t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function di(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(kr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),pi(t),e||t.docView&&t.docView.dirty){var n=po(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}Yo.compositionstart=Yo.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),di(t,!0),t.markCursor=null;else if(di(t),pr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.domSelectionRange(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){t.domSelection().collapse(s,s.nodeValue.length);break}o=s,i=-1}t.input.composing=!0}hi(t,fi)},Yo.compositionend=function(t,e){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then((function(){return t.domObserver.flush()})),t.input.compositionID++,hi(t,20))};var vi=fr&&hr<15||gr&&Sr<604;function mi(t,e,n,r,o){var i=Fo(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,o,i||et.empty)})))return!0;if(!i)return!1;var s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function yi(t){var e=t.getData("text/plain")||t.getData("Text");if(e)return e;var n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Go.copy=Yo.cut=function(t,e){var n=e,r=t.state.selection,o="cut"==n.type;if(!r.empty){var i=vi?null:n.clipboardData,s=Bo(t,r.content()),a=s.dom,u=s.text;i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",u)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Yo.paste=function(t,e){var n=e;if(!t.composing||kr){var r=vi?null:n.clipboardData,o=t.input.shiftKey&&45!=t.input.lastKeyCode;r&&mi(t,yi(r),r.getData("text/html"),o,n)?n.preventDefault():function(t,e){if(t.dom.parentNode){var n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();var o=t.input.shiftKey&&45!=t.input.lastKeyCode;setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?mi(t,r.value,null,o,e):mi(t,r.textContent,r.innerHTML,o,e)}),50)}}(t,n)}};var gi=Wn((function t(e,n,r){Un(this,t),this.slice=e,this.move=n,this.node=r})),bi=br?"altKey":"ctrlKey";for(var wi in Go.dragstart=function(t,e){var n=e,r=t.input.mouseDown;if(r&&r.done(),n.dataTransfer){var o,i=t.state.selection,s=i.empty?null:t.posAtCoords(ni(n));if(s&&s.pos>=i.from&&s.pos<=(i instanceof yn?i.to-1:i.to));else if(r&&r.mightDrag)o=yn.create(t.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){var a=t.docView.nearestDesc(n.target,!0);a&&a.node.type.spec.draggable&&a!=t.docView&&(o=yn.create(t.state.doc,a.posBefore))}var u=Bo(t,(o||t.state.selection).content()),c=u.dom,l=u.text,f=u.slice;n.dataTransfer.clearData(),n.dataTransfer.setData(vi?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",vi||n.dataTransfer.setData("text/plain",l),t.dragging=new gi(f,!n[bi],o)}},Go.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},Yo.dragover=Yo.dragenter=function(t,e){return e.preventDefault()},Yo.drop=function(t,e){var n=e,r=t.dragging;if(t.dragging=null,n.dataTransfer){var o=t.posAtCoords(ni(n));if(o){var i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",(function(e){s=e(s,t)})):s=Fo(t,yi(n.dataTransfer),vi?null:n.dataTransfer.getData("text/html"),!1,i);var a=!(!r||n[bi]);if(t.someProp("handleDrop",(function(e){return e(t,n,s||et.empty,a)})))n.preventDefault();else if(s){n.preventDefault();var u=s?Le(t.state.doc,i.pos,s):i.pos;null==u&&(u=i.pos);var c=t.state.tr;if(a){var l=r.node;l?l.replace(c):c.deleteSelection()}var f=c.mapping.map(u),h=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=c.doc;if(h?c.replaceRangeWith(f,f,s.content.firstChild):c.replaceRange(f,f,s),!c.doc.eq(p)){var d=c.doc.resolve(f);if(h&&yn.isSelectable(s.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new yn(d));else{var v=c.mapping.map(u);c.mapping.maps[c.mapping.maps.length-1].forEach((function(t,e,n,r){return v=r})),c.setSelection(So(t,d,c.doc.resolve(v)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}}}}},Go.focus=function(t){t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&mo(t)}),20))},Go.blur=function(t,e){var n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Go.beforeinput=function(t,e){if(vr&&kr&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();var n=t.input.domChangeCount;setTimeout((function(){if(t.input.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,or(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},Yo)Go[wi]=Yo[wi];function ki(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var xi=function(){function t(e,n){Un(this,t),this.toDOM=e,this.spec=n||Ei,this.side=this.spec.side||0}return Wn(t,[{key:"map",value:function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Ci(i-n,i-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(e){return this==e||e instanceof t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ki(this.spec,e.spec))}},{key:"destroy",value:function(t){this.spec.destroy&&this.spec.destroy(t)}}])}(),Si=function(){function t(e,n){Un(this,t),this.attrs=e,this.spec=n||Ei}return Wn(t,[{key:"map",value:function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Ci(o,i,this)}},{key:"valid",value:function(t,e){return e.from<e.to}},{key:"eq",value:function(e){return this==e||e instanceof t&&ki(this.attrs,e.attrs)&&ki(this.spec,e.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(e){return e.type instanceof t}}])}(),Oi=function(){function t(e,n){Un(this,t),this.attrs=e,this.spec=n||Ei}return Wn(t,[{key:"map",value:function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Ci(o.pos-n,i.pos-n,this)}},{key:"valid",value:function(t,e){var n,r=t.content.findIndex(e.from),o=r.index,i=r.offset;return i==e.from&&!(n=t.child(o)).isText&&i+n.nodeSize==e.to}},{key:"eq",value:function(e){return this==e||e instanceof t&&ki(this.attrs,e.attrs)&&ki(this.spec,e.spec)}},{key:"destroy",value:function(){}}])}(),Ci=function(){function t(e,n,r){Un(this,t),this.from=e,this.to=n,this.type=r}return Wn(t,[{key:"copy",value:function(e,n){return new t(e,n,this.type)}},{key:"eq",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}},{key:"map",value:function(t,e,n){return this.type.map(t,this,e,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Si}},{key:"widget",get:function(){return this.type instanceof xi}}],[{key:"widget",value:function(e,n,r){return new t(e,e,new xi(n,r))}},{key:"inline",value:function(e,n,r,o){return new t(e,n,new Si(r,o))}},{key:"node",value:function(e,n,r,o){return new t(e,n,new Oi(r,o))}}])}(),Mi=[],Ei={},Ti=function(){function t(e,n){Un(this,t),this.local=e.length?e:Mi,this.children=n.length?n:Mi}return Wn(t,[{key:"find",value:function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}},{key:"findInner",value:function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var u=this.children[a]+1;this.children[a+2].findInner(t-u,e-u,n,r+u,o)}}},{key:"map",value:function(t,e,n){return this==Ni||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Ei)}},{key:"mapInner",value:function(e,n,r,o,i){for(var s,a=0;a<this.local.length;a++){var u=this.local[a].map(e,r,o);u&&u.type.valid(n,u)?(s||(s=[])).push(u):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?Di(this.children,s||[],e,n,r,o,i):s?new t(s.sort(zi),Mi):Ni}},{key:"add",value:function(e,n){return n.length?this==Ni?t.create(e,n):this.addInner(e,n,0):this}},{key:"addInner",value:function(e,n,r){var o,i=this,s=0;e.forEach((function(t,e){var a,u=e+r;if(a=Pi(n,t,u)){for(o||(o=i.children.slice());s<o.length&&o[s]<e;)s+=3;o[s]==e?o[s+2]=o[s+2].addInner(t,a,u+1):o.splice(s,0,e,e+t.nodeSize,ji(a,t,u+1,Ei)),s+=3}}));for(var a=Ri(s?Ii(n):n,-r),u=0;u<a.length;u++)a[u].type.valid(e,a[u])||a.splice(u--,1);return new t(a.length?this.local.concat(a).sort(zi):this.local,o||this.children)}},{key:"remove",value:function(t){return 0==t.length||this==Ni?this:this.removeInner(t,0)}},{key:"removeInner",value:function(e,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var s,a=void 0,u=r[i]+n,c=r[i+1]+n,l=0;l<e.length;l++)(s=e[l])&&s.from>u&&s.to<c&&(e[l]=null,(a||(a=[])).push(s));if(a){r==this.children&&(r=this.children.slice());var f=r[i+2].removeInner(a,u+1);f!=Ni?r[i+2]=f:(r.splice(i,3),i-=3)}}if(o.length)for(var h,p=0;p<e.length;p++)if(h=e[p])for(var d=0;d<o.length;d++)o[d].eq(h,n)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1));return r==this.children&&o==this.local?this:o.length||r.length?new t(o,r):Ni}},{key:"forChild",value:function(e,n){if(this==Ni)return this;if(n.isLeaf)return t.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(r=this.children[i+2]);break}for(var s=e+1,a=s+n.content.size,u=0;u<this.local.length;u++){var c=this.local[u];if(c.from<a&&c.to>s&&c.type instanceof Si){var l=Math.max(s,c.from)-s,f=Math.min(a,c.to)-s;l<f&&(o||(o=[])).push(c.copy(l,f))}}if(o){var h=new t(o.sort(zi),Mi);return r?new Ai([h,r]):h}return r||Ni}},{key:"eq",value:function(e){if(this==e)return!0;if(!(e instanceof t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}},{key:"locals",value:function(t){return Li(this.localsInner(t))}},{key:"localsInner",value:function(t){if(this==Ni)return Mi;if(t.inlineContent||!this.local.some(Si.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Si||e.push(this.local[n]);return e}}],[{key:"create",value:function(t,e){return e.length?ji(e,t,0,Ei):Ni}}])}();Ti.empty=new Ti([],[]),Ti.removeOverlap=Li;var Ni=Ti.empty,Ai=function(){function t(e){Un(this,t),this.members=e}return Wn(t,[{key:"map",value:function(e,n){var r=this.members.map((function(t){return t.map(e,n,Ei)}));return t.from(r)}},{key:"forChild",value:function(e,n){if(n.isLeaf)return Ti.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(e,n);i!=Ni&&(i instanceof t?r=r.concat(i.members):r.push(i))}return t.from(r)}},{key:"eq",value:function(e){if(!(e instanceof t)||e.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}},{key:"locals",value:function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?Li(n?e:e.sort(zi)):Mi}}],[{key:"from",value:function(e){switch(e.length){case 0:return Ni;case 1:return e[0];default:return new t(e.every((function(t){return t instanceof Ti}))?e:e.reduce((function(t,e){return t.concat(e instanceof Ti?e:e.members)}),[]))}}}])}();function Di(t,e,n,r,o,i,s){for(var a=t.slice(),u=function(t){var e=0;n.maps[c].forEach((function(n,r,o,i){for(var s=i-o-(r-n),u=0;u<a.length;u+=3){var c=a[u+1];if(!(c<0||n>c+t-e)){var l=a[u]+t-e;r>=l?a[u+1]=n<=l?-2:-1:n>=t&&s&&(a[u]+=s,a[u+1]+=s)}}e+=s})),t=n.maps[c].map(t,-1),l=t},c=0,l=i;c<n.maps.length;c++)u(l);for(var f=!1,h=0;h<a.length;h+=3)if(a[h+1]<0){if(-2==a[h+1]){f=!0,a[h+1]=-1;continue}var p=n.map(t[h]+i),d=p-o;if(d<0||d>=r.content.size){f=!0;continue}var v=n.map(t[h+1]+i,-1)-o,m=r.content.findIndex(d),y=m.index,g=m.offset,b=r.maybeChild(y);if(b&&g==d&&g+b.nodeSize==v){var w=a[h+2].mapInner(n,b,p+1,t[h]+i+1,s);w!=Ni?(a[h]=d,a[h+1]=v,a[h+2]=w):(a[h+1]=-2,f=!0)}else f=!0}if(f){var k=function(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var u=t.local[i].map(r,o,e);u?n.push(u):s.onRemove&&s.onRemove(t.local[i].spec)}for(var c=0;c<t.children.length;c+=3)a(t.children[c+2],t.children[c]+e+1)}for(var u=0;u<t.length;u+=3)-1==t[u+1]&&a(t[u+2],e[u]+i+1);return n}(a,t,e,n,o,i,s),x=ji(k,r,0,s);e=x.local;for(var S=0;S<a.length;S+=3)a[S+1]<0&&(a.splice(S,3),S-=3);for(var O=0,C=0;O<x.children.length;O+=3){for(var M=x.children[O];C<a.length&&a[C]<M;)C+=3;a.splice(C,0,x.children[O],x.children[O+1],x.children[O+2])}}return new Ti(e.sort(zi),a)}function Ri(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new Ci(o.from+e,o.to+e,o.type))}return n}function Pi(t,e,n){if(e.isLeaf)return null;for(var r,o=n+e.nodeSize,i=null,s=0;s<t.length;s++)(r=t[s])&&r.from>n&&r.to<o&&((i||(i=[])).push(r),t[s]=null);return i}function Ii(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function ji(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=Pi(t,e,s+n);if(a){i=!0;var u=ji(a,e,n+s+1,r);u!=Ni&&o.push(s,s+e.nodeSize,u)}}));for(var s=Ri(i?Ii(t):t,-n).sort(zi),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Ti(s,o):Ni}function zi(t,e){return t.from-e.from||t.to-e.to}function Li(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Bi(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Bi(e,o+1,i.copy(r.to,i.to)))}}return e}function Bi(t,e,n){for(;e<t.length&&zi(n,t[e])>0;)e++;t.splice(e,0,n)}function Fi(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Ni&&e.push(r)})),t.cursorWrapper&&e.push(Ti.create(t.state.doc,[t.cursorWrapper.deco])),Ai.from(e)}var Vi={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qi=fr&&hr<=11,_i=function(){return Wn((function t(){Un(this,t),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}),[{key:"set",value:function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}])}(),$i=function(){return Wn((function t(e,n){var r=this;Un(this,t),this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new _i,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)r.queue.push(t[e]);fr&&hr<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?r.flushSoon():r.flush()})),qi&&(this.onCharData=function(t){r.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}),[{key:"flushSoon",value:function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Vi)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if(Oo(this.view)){if(this.suppressingSelectionUpdates)return mo(this.view);if(fr&&hr<=11&&!this.view.state.selection.empty){var t=this.view.domSelectionRange();if(t.focusNode&&Qn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(t){if(!t.focusNode)return!0;for(var e,n=new Set,r=t.focusNode;r;r=Gn(r))n.add(r);for(var o=t.anchorNode;o;o=Gn(o))if(n.has(o)){e=o;break}var i=e&&this.view.docView.nearestDesc(e);return i&&i.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}},{key:"pendingRecords",value:function(){if(this.observer){var t,e=In(this.observer.takeRecords());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.queue.push(n)}}catch(t){e.e(t)}finally{e.f()}}return this.queue}},{key:"flush",value:function(){var t,e,n=this.view;if(n.docView&&!(this.flushingSoon>-1)){var r=this.pendingRecords();r.length&&(this.queue=[]);var o=n.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(o)&&Oo(n)&&!this.ignoreSelectionChange(o),s=-1,a=-1,u=!1,c=[];if(n.editable)for(var l=0;l<r.length;l++){var f=this.registerMutation(r[l],c);f&&(s=s<0?f.from:Math.min(f.from,s),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(u=!0))}if(pr&&c.length){var h=c.filter((function(t){return"BR"==t.nodeName}));if(2==h.length){var p=(e=2,function(t){if(Array.isArray(t))return t}(t=h)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,s,a=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||jn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=p[0],v=p[1];d.parentNode&&d.parentNode.parentNode==v.parentNode?v.remove():d.remove()}else{var m,y=this.currentSelection.focusNode,g=In(h);try{for(g.s();!(m=g.n()).done;){var b=m.value,w=b.parentNode;!w||"LI"!=w.nodeName||y&&Hi(n,y)==w||b.remove()}}catch(t){g.e(t)}finally{g.f()}}}var k=null;s<0&&i&&n.input.lastFocus>Date.now()-200&&Math.max(n.input.lastTouch,n.input.lastClick.time)<Date.now()-300&&rr(o)&&(k=po(n))&&k.eq(fn.near(n.state.doc.resolve(0),1))?(n.input.lastFocus=0,mo(n),this.currentSelection.set(o),n.scrollToSelection()):(s>-1||i)&&(s>-1&&(n.docView.markDirty(s,a),function(t){if(!Ui.has(t)&&(Ui.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace))){if(t.requiresGeckoHackNode=pr,Ji)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ji=!0}}(n)),this.handleDOMChange(s,a,u,c),n.docView&&n.docView.dirty?n.updateState(n.state):this.currentSelection.eq(o)||mo(n),this.currentSelection.set(o))}}},{key:"registerMutation",value:function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var r=0;r<t.addedNodes.length;r++){var o=t.addedNodes[r];e.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var i=t.previousSibling,s=t.nextSibling;if(fr&&hr<=11&&t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){var u=t.addedNodes[a],c=u.previousSibling,l=u.nextSibling;(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(i=c),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(s=l)}var f=i&&i.parentNode==t.target?Kn(i)+1:0,h=n.localPosFromDOM(t.target,f,-1),p=s&&s.parentNode==t.target?Kn(s):t.target.childNodes.length;return{from:h,to:n.localPosFromDOM(t.target,p,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}])}(),Ui=new WeakMap,Ji=!1;function Wi(t,e){var n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);if(Qn(s.node,s.offset,o,i)){var a=[o,i,n,r];n=a[0],r=a[1],o=a[2],i=a[3]}return{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function Hi(t,e){for(var n=e.parentNode;n&&n!=t.dom;n=n.parentNode){var r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Ki(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(yr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||yr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}var Gi=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Yi(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:So(t,e.resolve(n.anchor),e.resolve(n.head))}function Xi(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Qi(t){if(2!=t.length)return!1;var e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}var Zi=function(){return Wn((function t(e,n){var r=this;Un(this,t),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Qo,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(is),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ns(this),es(this),this.nodeViews=rs(this),this.docView=Xr(this.state.doc,ts(this),Fi(this),this.dom,this),this.domObserver=new $i(this,(function(t,e,n,o){return function(t,e,n,r,o){var i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){var s=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,a=po(t,s);if(a&&!t.state.selection.eq(a)){if(vr&&kr&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(function(e){return e(t,or(13,"Enter"))})))return;var u=t.state.tr.setSelection(a);"pointer"==s?u.setMeta("pointer",!0):"key"==s&&u.scrollIntoView(),i&&u.setMeta("composition",i),t.dispatch(u)}}else{var c=t.state.doc.resolve(e),l=c.sharedDepth(n);e=c.before(l+1),n=t.state.doc.resolve(n).after(l+1);var f,h,p=t.state.selection,d=function(t,e,n){var r,o=t.docView.parseRange(e,n),i=o.node,s=o.fromOffset,a=o.toOffset,u=o.from,c=o.to,l=t.domSelectionRange(),f=l.anchorNode;if(f&&t.dom.contains(1==f.nodeType?f:f.parentNode)&&(r=[{node:f,offset:l.anchorOffset}],rr(l)||r.push({node:l.focusNode,offset:l.focusOffset})),vr&&8===t.input.lastKeyCode)for(var h=a;h>s;h--){var p=i.childNodes[h-1],d=p.pmViewDesc;if("BR"==p.nodeName&&!d){a=h;break}if(!d||d.size)break}var v=t.state.doc,m=t.someProp("domParser")||qt.fromSchema(t.state.schema),y=v.resolve(u),g=null,b=m.parse(i,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=y.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Ki,context:y});if(r&&null!=r[0].pos){var w=r[0].pos,k=r[1]&&r[1].pos;null==k&&(k=w),g={anchor:w+u,head:k+u}}return{doc:b,sel:g,from:u,to:c}}(t,e,n),v=t.state.doc,m=v.slice(d.from,d.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;var y=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,u=s.b;if("end"==o&&(r-=a+Math.max(0,i-Math.min(a,u))-i),a<i&&t.size<e.size){var c=r<=i&&r>=a?i-r:0;(i-=c)&&i<e.size&&Qi(e.textBetween(i-1,i+1))&&(i+=c?1:-1),u=i+(u-a),a=i}else if(u<i){var l=r<=i&&r>=u?i-r:0;(i-=l)&&i<t.size&&Qi(t.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-u),u=i}return{start:i,endA:a,endB:u}}(m.content,d.doc.content,d.from,f,h);if((gr&&t.input.lastIOSEnter>Date.now()-225||kr)&&o.some((function(t){return 1==t.nodeType&&!Gi.test(t.nodeName)}))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",(function(e){return e(t,or(13,"Enter"))})))t.input.lastIOSEnter=0;else{if(!y){if(!(r&&p instanceof vn&&!p.empty&&p.$head.sameParent(p.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){var g=Yi(t,t.state.doc,d.sel);if(g&&!g.eq(t.state.selection)){var b=t.state.tr.setSelection(g);i&&b.setMeta("composition",i),t.dispatch(b)}}return}y={start:p.from,endA:p.to,endB:p.to}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof vn&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),fr&&hr<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>d.from&&"  "==d.doc.textBetween(y.start-d.from-1,y.start-d.from+1)&&(y.start--,y.endA--,y.endB--);var w,k=d.doc.resolveNoCache(y.start-d.from),x=d.doc.resolveNoCache(y.endB-d.from),S=v.resolve(y.start),O=k.sameParent(x)&&k.parent.inlineContent&&S.end()>=y.endA;if((gr&&t.input.lastIOSEnter>Date.now()-225&&(!O||o.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!O&&k.pos<d.doc.content.size&&!k.sameParent(x)&&(w=fn.findFrom(d.doc.resolve(k.pos+1),1,!0))&&w.head==x.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,or(13,"Enter"))})))t.input.lastIOSEnter=0;else if(t.state.selection.anchor>y.start&&function(t,e,n,r,o){if(n-e<=o.pos-r.pos||Xi(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(!r.parent.isTextblock){var s=i.nodeAfter;return null!=s&&n==e+s.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=t.resolve(Xi(i,!0,!0));return!(!a.parent.isTextblock||a.pos>n||Xi(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(v,y.start,y.endA,k,x)&&t.someProp("handleKeyDown",(function(e){return e(t,or(8,"Backspace"))})))kr&&vr&&t.domObserver.suppressSelectionUpdates();else{vr&&kr&&y.endB==y.start&&(t.input.lastAndroidDelete=Date.now()),kr&&!O&&k.start()!=x.start()&&0==x.parentOffset&&k.depth==x.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==y.endA&&(y.endB-=2,x=d.doc.resolveNoCache(y.endB-d.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,or(13,"Enter"))}))}),20));var C,M,E,T=y.start,N=y.endA;if(O)if(k.pos==x.pos)fr&&hr<=11&&0==k.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return mo(t)}),20)),C=t.state.tr.delete(T,N),M=v.resolve(y.start).marksAcross(v.resolve(y.endA));else if(y.endA==y.endB&&(E=function(t,e){for(var n,r,o,i=t.firstChild.marks,s=e.firstChild.marks,a=i,u=s,c=0;c<s.length;c++)a=s[c].removeFromSet(a);for(var l=0;l<i.length;l++)u=i[l].removeFromSet(u);if(1==a.length&&0==u.length)r=a[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=a.length||1!=u.length)return null;r=u[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var f=[],h=0;h<e.childCount;h++)f.push(o(e.child(h)));if(G.from(f).eq(t))return{mark:r,type:n}}(k.parent.content.cut(k.parentOffset,x.parentOffset),S.parent.content.cut(S.parentOffset,y.endA-S.start()))))C=t.state.tr,"add"==E.type?C.addMark(T,N,E.mark):C.removeMark(T,N,E.mark);else if(k.parent.child(k.index()).isText&&k.index()==x.index()-(x.textOffset?0:1)){var A=k.parent.textBetween(k.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,T,N,A)})))return;C=t.state.tr.insertText(A,T,N)}if(C||(C=t.state.tr.replace(T,N,d.doc.slice(y.start-d.from,y.endB-d.from))),d.sel){var D=Yi(t,C.doc,d.sel);D&&!(vr&&kr&&t.composing&&D.empty&&(y.start!=y.endB||t.input.lastAndroidDelete<Date.now()-100)&&(D.head==T||D.head==C.mapping.map(N)-1)||fr&&D.empty&&D.head==T)&&C.setSelection(D)}M&&C.ensureMarks(M),i&&C.setMeta("composition",i),t.dispatch(C.scrollIntoView())}}}}(r,t,e,n,o)})),this.domObserver.start(),function(t){var e=function(){var e=Go[n];t.dom.addEventListener(n,t.input.eventHandlers[n]=function(n){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,n)||ei(t,n)||!t.editable&&n.type in Yo||e(t,n)},Xo[n]?{passive:!0}:void 0)};for(var n in Go)e();yr&&t.dom.addEventListener("input",(function(){return null})),ti(t)}(this),this.updatePluginViews()}),[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props}},{key:"update",value:function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ti(this);var e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(is),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}},{key:"setProps",value:function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)}},{key:"updateState",value:function(t){this.updateStateInner(t,this._props)}},{key:"updateStateInner",value:function(t,e){var n,r=this.state,o=!1,i=!1;t.storedMarks&&this.composing&&(pi(this),i=!0),this.state=t;var s=r.plugins!=t.plugins||this._props.plugins!=e.plugins;if(s||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){var a=rs(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(a,this.nodeViews)&&(this.nodeViews=a,o=!0)}(s||e.handleDOMEvents!=this._props.handleDOMEvents)&&ti(this),this.editable=ns(this),es(this);var u=Fi(this),c=ts(this),l=r.plugins==t.plugins||r.doc.eq(t.doc)?t.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",f=o||!this.docView.matchesNode(t.doc,c,u);!f&&t.selection.eq(r.selection)||(i=!0);var h,p,d,v,m,y,g,b,w,k,x="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a&&a!=t.dom&&t.dom.contains(a)){var u=a.getBoundingClientRect();if(u.top>=o-20){e=a,n=u.top;break}}}return{refDOM:e,refTop:n,stack:Tr(t.dom)}}(this);if(i){this.domObserver.stop();var S=f&&(fr||vr)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&(v=r.selection,m=t.selection,y=Math.min(v.$anchor.sharedDepth(v.head),m.$anchor.sharedDepth(m.head)),v.$anchor.start(y)!=m.$anchor.start(y));if(f){var O=vr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(t){var e=t.domSelectionRange();if(!e.focusNode)return null;var n=function(t,e){for(;;){if(3==t.nodeType&&e)return t;if(1==t.nodeType&&e>0){if("false"==t.contentEditable)return null;e=er(t=t.childNodes[e-1])}else{if(!t.parentNode||nr(t))return null;e=Kn(t),t=t.parentNode}}}(e.focusNode,e.focusOffset),r=function(t,e){for(;;){if(3==t.nodeType&&e<t.nodeValue.length)return t;if(1==t.nodeType&&e<t.childNodes.length){if("false"==t.contentEditable)return null;t=t.childNodes[e],e=0}else{if(!t.parentNode||nr(t))return null;e=Kn(t)+1,t=t.parentNode}}}(e.focusNode,e.focusOffset);if(n&&r&&n!=r){var o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){var s=n.pmViewDesc;if(s&&s.isText(n.nodeValue))return r}}return n||r}(this)),!o&&this.docView.update(t.doc,c,u,this)||(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Xr(t.doc,c,u,this.dom,this)),O&&!this.trackWrites&&(S=!0)}S||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(h=this,p=h.docView.domFromPos(h.state.selection.anchor,0),d=h.domSelectionRange(),Qn(p.node,p.offset,d.anchorNode,d.anchorOffset)))?mo(this,S):(ko(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():x&&(b=(g=x).refDOM,w=g.refTop,Nr(g.stack,0==(k=b?b.getBoundingClientRect().top:0)?0:k-w))}},{key:"scrollToSelection",value:function(){var t=this,e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(function(e){return e(t)})));else if(this.state.selection instanceof yn){var n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&Er(this,n.getBoundingClientRect(),e)}else Er(this,this.coordsAtPos(this.state.selection.head,1),e)}},{key:"destroyPluginViews",value:function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()}},{key:"updatePluginViews",value:function(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var s=this.state.plugins[i];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}}},{key:"updateDraggedNode",value:function(t,e){var n=t.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{var o=n.from+(this.state.doc.content.size-e.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==n.node&&(r=o)}this.dragging=new gi(t.slice,t.move,r<0?void 0:yn.create(this.state.doc,r))}},{key:"someProp",value:function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[t];if(null!=i&&(n=e?e(i):i))return n}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var u=s[a].props[t];if(null!=u&&(n=e?e(u):u))return n}}},{key:"hasFocus",value:function(){if(fr){var t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(Ar)return t.focus(Ar);var e=Tr(t);t.focus(null==Ar?{get preventScroll(){return Ar={preventScroll:!0},!0}}:void 0),Ar||(Ar=!1,Nr(e,0))}(this.dom),mo(this),this.domObserver.start()}},{key:"root",get:function(){var t=this,e=this._root;if(null==e)for(var n,r=function(e){if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return e.ownerDocument.getSelection()}),{v:t._root=e}},o=this.dom.parentNode;o;o=o.parentNode)if(n=r(o))return n.v;return e||document}},{key:"updateRoot",value:function(){this._root=null}},{key:"posAtCoords",value:function(t){return Ir(this,t)}},{key:"coordsAtPos",value:function(t){return Br(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"domAtPos",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(t,e)}},{key:"nodeDOM",value:function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null}},{key:"posAtDOM",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(t,e){return function(t,e,n){return $r==e&&Ur==n?Jr:($r=e,Ur=n,Jr="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$from:r.$to;return qr(t,e,(function(){for(var e=t.docView.domFromPos(o.pos,"up"==n?-1:1).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.contentDOM||r.dom;break}e=r.dom.parentNode}for(var i=Br(t,o.pos,1),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=Xn(s,0,s.nodeValue.length).getClientRects()}for(var u=0;u<a.length;u++){var c=a[u];if(c.bottom>c.top+1&&("up"==n?i.top-c.top>2*(c.bottom-i.top):c.bottom-i.bottom>2*(i.bottom-c.top)))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=t.domSelection();return _r.test(r.parent.textContent)&&a.modify?qr(t,e,(function(){var e=t.domSelectionRange(),o=e.focusNode,i=e.focusOffset,s=e.anchorNode,u=e.anchorOffset,c=a.caretBidiLevel;a.modify("move",n,"character");var l=r.depth?t.docView.domAfterPos(r.before()):t.dom,f=t.domSelectionRange(),h=f.focusNode,p=f.focusOffset,d=h&&!l.contains(1==h.nodeType?h:h.parentNode)||o==h&&i==p;try{a.collapse(s,u),o&&(o!=s||i!=u)&&a.extend&&a.extend(o,i)}catch(t){}return null!=c&&(a.caretBidiLevel=c),d})):"left"==n||"backward"==n?i:s}(t,e,n))}(this,e||this.state,t)}},{key:"pasteHTML",value:function(t,e){return mi(this,"",t,!1,e||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(t,e){return mi(this,t,null,!0,e||new ClipboardEvent("paste"))}},{key:"destroy",value:function(){this.docView&&(function(t){for(var e in t.domObserver.stop(),t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Fi(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Yn=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(t){return function(t,e){ei(t,e)||!Go[e.type]||!t.editable&&e.type in Yo||Go[e.type](t,e)}(this,t)}},{key:"dispatch",value:function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}},{key:"domSelectionRange",value:function(){var t=this.domSelection();return yr&&11===this.root.nodeType&&function(t){for(var e=t.activeElement;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t,e){if(e.getComposedRanges){var n=e.getComposedRanges(t.root)[0];if(n)return Wi(t,n)}var r;function o(t){t.preventDefault(),t.stopImmediatePropagation(),r=t.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",o,!0),r?Wi(t,r):null}(this,t)||t}},{key:"domSelection",value:function(){return this.root.getSelection()}}])}();function ts(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:"style"==r?e.style=(e.style?e.style+";":"")+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),e.translate||(e.translate="no"),[Ci.node(0,t.state.doc.content.size,e)]}function es(t){if(t.markCursor){var e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ci.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function ns(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function rs(t){var e=Object.create(null);function n(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function is(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ss,as=n(6162),us=n.n(as);!function(t){t.Url="Url",t.File="File",t.Resource="Resource"}(ss||(ss={}));var cs=["p",0],ls=["blockquote",0],fs=["hr"],hs=["br"],ps={},ds=["em",0],vs=["strong",0],ms={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){var e=t.attrs;return["a",{href:e.href,title:e.title},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return ds}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!=t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return vs}},color:{attrs:{value:{default:null}},parseDOM:[{style:"color",getAttrs:function(t){return!(!t||"inherit"==t||"transparent"==t)&&{value:t}}}],toDOM:function(t){var e=t.attrs.value;return["span",{style:"color: ".concat(e,";")},0]}},bgColor:{attrs:{value:{default:null}},parseDOM:[{style:"background-color",getAttrs:function(t){return!(!t||"inherit"==t||"transparent"==t)&&{value:t}}}],toDOM:function(t){var e=t.attrs.value;return["span",{style:"background-color: ".concat(e,";")},0]}}};function ys(t){return new Ft({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return cs}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return ls}},horizontalRule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return fs}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},text:{group:"inline"},image:{inline:!0,attrs:{imageType:{default:"Url"},src:{default:null},resourceKey:{default:null},file:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){var e=t.getAttribute("data-image-type"),n=t.getAttribute("src"),r=t.getAttribute("data-resource-key"),o=t.file;e||(e=r?ss.Resource:o?ss.File:ss.Url);var i={imageType:e};return ss.Url==e?i.src=n:ss.Resource==e?i.resourceKey=r:ss.File==e&&(!o&&n&&(o=ps[n]),i.src=n,i.file=o),i}}],toDOM:function(e){var n=e.attrs,r=n.imageType,o=n.src,i=n.resourceKey,s=n.file,a=document.createElement("img");return a.setAttribute("data-image-type",r),ss.Resource==r?o=t(i):ss.File==r&&!o&&s&&(o=us().createObjectURL(s)),a.setAttribute("src",o),ss.File==r?a.file=s:ss.Resource==r&&a.setAttribute("data-resource-key",i),a}},hardBreak:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return hs}}},marks:ms})}for(var gs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},bs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ws="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ks="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),xs=0;xs<10;xs++)gs[48+xs]=gs[96+xs]=String(xs);for(xs=1;xs<=24;xs++)gs[xs+111]="F"+xs;for(xs=65;xs<=90;xs++)gs[xs]=String.fromCharCode(xs+32),bs[xs]=String.fromCharCode(xs);for(var Ss in gs)bs.hasOwnProperty(Ss)||(bs[Ss]=gs[Ss]);var Os="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Cs(t){var e,n,r,o,i=t.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var u=i[a];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);Os?o=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function Ms(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Es(t){return new An({props:{handleKeyDown:Ts(t)}})}function Ts(t){var e=function(t){var e=Object.create(null);for(var n in t)e[Cs(n)]=t[n];return e}(t);return function(t,n){var r,o=function(t){var e=!(ws&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ks&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?bs:gs)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),i=e[Ms(o,n)];if(i&&i(t.state,t.dispatch,t))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){var s=e[Ms(o,n,!1)];if(s&&s(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=gs[n.keyCode])&&r!=o){var a=e[Ms(r,n)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}var Ns=200,As=function(){};As.prototype.append=function(t){return t.length?(t=As.from(t),!this.length&&t||t.length<Ns&&this.leafAppend(t)||this.length<Ns&&t.leafPrepend(this)||this.appendInner(t)):this},As.prototype.prepend=function(t){return t.length?As.from(t).append(this):this},As.prototype.appendInner=function(t){return new Rs(this,t)},As.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?As.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},As.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},As.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},As.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},As.from=function(t){return t instanceof As?t:t&&t.length?new Ds(t):As.empty};var Ds=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=Ns)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=Ns)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(As);As.empty=new Ds([]);var Rs=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(As),Ps=As;function Is(t){return Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(t)}function js(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bs(r.key),r)}}function Ls(t,e,n){return e&&zs(t.prototype,e),n&&zs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bs(t){var e=function(t,e){if("object"!=Is(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Is(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Is(e)?e:e+""}var Fs=function(){function t(e,n){js(this,t),this.items=e,this.eventCount=n}return Ls(t,[{key:"popEvent",value:function(e,n){var r=this;if(0==this.eventCount)return null;for(var o,i,s=this.items.length;;s--)if(this.items.get(s-1).selection){--s;break}n&&(o=this.remapping(s,this.items.length),i=o.maps.length);var a,u,c=e.tr,l=[],f=[];return this.items.forEach((function(e,n){if(!e.step)return o||(o=r.remapping(s,n+1),i=o.maps.length),i--,void f.push(e);if(o){f.push(new Vs(e.map));var h,p=e.step.map(o.slice(i));p&&c.maybeStep(p).doc&&(h=c.mapping.maps[c.mapping.maps.length-1],l.push(new Vs(h,void 0,void 0,l.length+f.length))),i--,h&&o.appendMap(h,i)}else c.maybeStep(e.step);return e.selection?(a=o?e.selection.map(o.slice(i)):e.selection,u=new t(r.items.slice(0,s).append(f.reverse().concat(l)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:u,transform:c,selection:a}}},{key:"addTransform",value:function(e,n,r,o){for(var i=[],s=this.eventCount,a=this.items,u=!o&&a.length?a.get(a.length-1):null,c=0;c<e.steps.length;c++){var l,f=e.steps[c].invert(e.docs[c]),h=new Vs(e.mapping.maps[c],f,n);(l=u&&u.merge(h))&&(h=l,c?i.pop():a=a.slice(0,a.length-1)),i.push(h),n&&(s++,n=void 0),o||(u=h)}var p,d,v,m=s-r.depth;return m>_s&&(d=m,(p=a).forEach((function(t,e){if(t.selection&&0==d--)return v=e,!1})),a=p.slice(v),s-=m),new t(a.append(i),s)}},{key:"remapping",value:function(t,e){var n=new me;return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,o)}),t,e),n}},{key:"addMaps",value:function(e){return 0==this.eventCount?this:new t(this.items.append(e.map((function(t){return new Vs(t)}))),this.eventCount)}},{key:"rebased",value:function(e,n){if(!this.eventCount)return this;var r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach((function(t){t.selection&&a--}),o);var u=n;this.items.forEach((function(t){var n=i.getMirror(--u);if(null!=n){s=Math.min(s,n);var o=i.maps[n];if(t.step){var c=e.steps[n].invert(e.docs[n]),l=t.selection&&t.selection.map(i.slice(u+1,n));l&&a++,r.push(new Vs(o,c,l))}else r.push(new Vs(o))}}),o);for(var c=[],l=n;l<s;l++)c.push(new Vs(i.maps[l]));var f=new t(this.items.slice(0,o).append(c).append(r),a);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-r.length)),f}},{key:"emptyItemCount",value:function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t}},{key:"compress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((function(t,s){if(s>=e)o.push(t),t.selection&&i++;else if(t.step){var a=t.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){var c=t.selection&&t.selection.map(n.slice(r));c&&i++;var l,f=new Vs(u.invert(),a,c),h=o.length-1;(l=o.length&&o[h].merge(f))?o[h]=l:o.push(f)}}else t.map&&r--}),this.items.length,0),new t(Ps.from(o.reverse()),i)}}])}();Fs.empty=new Fs(Ps.empty,0);var Vs=function(){function t(e,n,r,o){js(this,t),this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}return Ls(t,[{key:"merge",value:function(e){if(this.step&&e.step&&!e.selection){var n=e.step.merge(this.step);if(n)return new t(n.getMap().invert(),n,this.selection)}}}])}(),qs=Ls((function t(e,n,r,o,i){js(this,t),this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i})),_s=20;function $s(t){for(var e=[],n=t.length-1;n>=0&&0==e.length;n--)t[n].forEach((function(t,n,r,o){return e.push(r,o)}));return e}function Us(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}var Js=!1,Ws=null;function Hs(t){var e=t.plugins;if(Ws!=e){Js=!1,Ws=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Js=!0;break}}return Js}var Ks=new Pn("history"),Gs=new Pn("closeHistory");function Ys(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new An({key:Ks,state:{init:function(){return new qs(Fs.empty,Fs.empty,null,0,-1)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(Ks);if(i)return i.historyState;n.getMeta(Gs)&&(t=new qs(t.done,t.undone,null,0,-1));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(Ks))return s.getMeta(Ks).redo?new qs(t.done.addTransform(n,void 0,r,Hs(e)),t.undone,$s(n.mapping.maps),t.prevTime,t.prevComposition):new qs(t.done,t.undone.addTransform(n,void 0,r,Hs(e)),null,t.prevTime,t.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new qs(t.done.rebased(n,o),t.undone.rebased(n,o),Us(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new qs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Us(t.prevRanges,n.mapping),t.prevTime,t.prevComposition);var a=n.getMeta("composition"),u=0==t.prevTime||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}(n,t.prevRanges)),c=s?Us(t.prevRanges,n.mapping):$s(n.mapping.maps);return new qs(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,Hs(e)),Fs.empty,c,n.time,null==a?t.prevComposition:a)}(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput:function(t,e){var n=e.inputType,r="historyUndo"==n?Qs:"historyRedo"==n?Zs:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}function Xs(t,e){return function(n,r){var o=Ks.getState(n);if(!o||0==(t?o.undone:o.done).eventCount)return!1;if(r){var i=function(t,e,n){var r=Hs(e),o=Ks.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;var s=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),u=new qs(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(Ks,{redo:n,historyState:u})}(o,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}var Qs=Xs(!1,!0),Zs=Xs(!0,!0);Xs(!1,!1),Xs(!0,!1);var ta=function(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)};function ea(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}function na(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ra(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var oa=function(t,e){var n,r=t.selection,o=r instanceof yn;if(o){if(r.node.isTextblock||!Ie(t.doc,r.from))return!1;n=r.from}else if(null==(n=ze(t.doc,r.from,-1)))return!1;if(e){var i=t.tr.join(n);o&&i.setSelection(yn.create(i.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},ia=function(t,e){var n,r=t.selection;if(r instanceof yn){if(r.node.isTextblock||!Ie(t.doc,r.to))return!1;n=r.to}else if(null==(n=ze(t.doc,r.to,1)))return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},sa=function(t,e){var n=t.selection,r=n.$from,o=n.$to,i=r.blockRange(o),s=i&&Ae(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)};function aa(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var ua=function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),s=r.indexAfter(-1),a=aa(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){var u=r.after(),c=t.tr.replaceWith(u,u,a.createAndFill());c.setSelection(fn.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},ca=function(t,e){var n,r=t.selection,o=r.$from,i=r.to,s=o.sharedDepth(i);return 0!=s&&(n=o.before(s),e&&e(t.tr.setSelection(yn.create(t.doc,n))),!0)};function la(t,e,n){var r,o,i=e.nodeBefore,s=e.nodeAfter;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,n){var r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(i,i+1)||!o.isTextblock&&!Ie(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;var a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(n){for(var u=e.pos+s.nodeSize,c=G.empty,l=r.length-1;l>=0;l--)c=G.from(r[l].create(null,c));c=G.from(i.copy(c));var f=t.tr.step(new Me(e.pos-1,u,e.pos,u,new et(c,1,0),r.length,!0)),h=u+2*r.length;Ie(f.doc,h)&&f.join(h),n(f.scrollIntoView())}return!0}var p=fn.findFrom(e,1),d=p&&p.$from.blockRange(p.$to),v=d&&Ae(d);if(null!=v&&v>=e.depth)return n&&n(t.tr.lift(d,v).scrollIntoView()),!0;if(a&&ea(s,"start",!0)&&ea(i,"end")){for(var m=i,y=[];y.push(m),!m.isTextblock;)m=m.lastChild;for(var g=s,b=1;!g.isTextblock;g=g.firstChild)b++;if(m.canReplace(m.childCount,m.childCount,g.content)){if(n){for(var w=G.empty,k=y.length-1;k>=0;k--)w=G.from(y[k].copy(w));n(t.tr.step(new Me(e.pos-y.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new et(w,y.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function fa(t){return function(e,n){for(var r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(e.tr.setSelection(vn.create(e.doc,t<0?o.start(i):o.end(i)))),!0)}}var ha=fa(-1),pa=fa(1);function da(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=i.blockRange(s),u=a&&De(a,t,e);return!!u&&(r&&r(n.tr.wrap(a,u).scrollIntoView()),!0)}}function va(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){for(var o=!1,i=0;i<n.selection.ranges.length&&!o;i++){var s=n.selection.ranges[i],a=s.$from.pos,u=s.$to.pos;n.doc.nodesBetween(a,u,(function(r,i){if(o)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)o=!0;else{var s=n.doc.resolve(i),a=s.index();o=s.parent.canReplaceWith(a,a+1,t)}}))}if(!o)return!1;if(r){for(var c=n.tr,l=0;l<n.selection.ranges.length;l++){var f=n.selection.ranges[l],h=f.$from.pos,p=f.$to.pos;c.setBlockType(h,p,t,e)}r(c.scrollIntoView())}return!0}}function ma(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!function(t,e,n){for(var r,o=function(){var r=e[i],o=r.$from,s=r.$to,a=0==o.depth&&t.inlineContent&&t.type.allowsMarkType(n);if(t.nodesBetween(o.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},i=0;i<e.length;i++)if(r=o())return r.v;return!1}(n.doc,a,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var u=!1,c=n.tr,l=0;!u&&l<a.length;l++){var f=a[l],h=f.$from,p=f.$to;u=n.doc.rangeHasMark(h.pos,p.pos,t)}for(var d=0;d<a.length;d++){var v=a[d],m=v.$from,y=v.$to;if(u)c.removeMark(m.pos,y.pos,t);else{var g=m.pos,b=y.pos,w=m.nodeAfter,k=y.nodeBefore,x=w&&w.isText?/^\s*/.exec(w.text)[0].length:0,S=k&&k.isText?/\s*$/.exec(k.text)[0].length:0;g+x<b&&(g+=x,b-=S),c.addMark(g,b,t.create(e))}}r(c.scrollIntoView())}return!0}}function ya(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}var ga=ya(ta,(function(t,e,n){var r=function(t,e){var n=t.selection.$cursor;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}(t,n);if(!r)return!1;var o=na(r);if(!o){var i=r.blockRange(),s=i&&Ae(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}var a=o.nodeBefore;if(!a.type.spec.isolating&&la(t,o,e))return!0;if(0==r.parent.content.size&&(ea(a,"end")||yn.isSelectable(a))){var u=Be(t.doc,r.before(),r.after(),et.empty);if(u&&u.slice.size<u.to-u.from){if(e){var c=t.tr.step(u);c.setSelection(ea(a,"end")?fn.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):yn.create(c.doc,o.pos-a.nodeSize)),e(c.scrollIntoView())}return!0}}return!(!a.isAtom||o.depth!=r.depth-1||(e&&e(t.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),0))}),(function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;i=na(o)}var s=i&&i.nodeBefore;return!(!s||!yn.isSelectable(s)||(e&&e(t.tr.setSelection(yn.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),0))})),ba=ya(ta,(function(t,e,n){var r=function(t,e){var n=t.selection.$cursor;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}(t,n);if(!r)return!1;var o=ra(r);if(!o)return!1;var i=o.nodeAfter;if(la(t,o,e))return!0;if(0==r.parent.content.size&&(ea(i,"start")||yn.isSelectable(i))){var s=Be(t.doc,r.before(),r.after(),et.empty);if(s&&s.slice.size<s.to-s.from){if(e){var a=t.tr.step(s);a.setSelection(ea(i,"start")?fn.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):yn.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1||(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))}),(function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;i=ra(o)}var s=i&&i.nodeAfter;return!(!s||!yn.isSelectable(s)||(e&&e(t.tr.setSelection(yn.create(t.doc,i.pos)).scrollIntoView()),0))})),wa={Enter:ya((function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o)||(e&&e(t.tr.insertText("\n").scrollIntoView()),0))}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(n instanceof bn||r.parent.inlineContent||o.parent.inlineContent)return!1;var i=aa(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(vn.create(a.doc,s+1)),e(a.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Pe(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Ae(o);return null!=i&&(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(t.selection instanceof yn&&t.selection.node.isBlock)return!(!r.parentOffset||!Pe(t.doc,r.pos)||(e&&e(t.tr.split(r.pos).scrollIntoView()),0));if(!r.parent.isBlock)return!1;if(e){var i=o.parentOffset==o.parent.content.size,s=t.tr;(t.selection instanceof vn||t.selection instanceof bn)&&s.deleteSelection();var a=0==r.depth?null:aa(r.node(-1).contentMatchAt(r.indexAfter(-1))),u=i&&a?[{type:a}]:void 0,c=Pe(s.doc,s.mapping.map(r.pos),1,u);if(u||c||!Pe(s.doc,s.mapping.map(r.pos),1,a?[{type:a}]:void 0)||(a&&(u=[{type:a}]),c=!0),c&&(s.split(s.mapping.map(r.pos),1,u),!i&&!r.parentOffset&&r.parent.type!=a)){var l=s.mapping.map(r.before()),f=s.doc.resolve(l);a&&r.node(-1).canReplaceWith(f.index(),f.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}e(s.scrollIntoView())}return!0})),"Mod-Enter":ua,Backspace:ga,"Mod-Backspace":ga,"Shift-Backspace":ga,Delete:ba,"Mod-Delete":ba,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new bn(t.doc))),!0}},ka={"Ctrl-h":wa.Backspace,"Alt-Backspace":wa["Mod-Backspace"],"Ctrl-d":wa.Delete,"Ctrl-Alt-Backspace":wa["Mod-Delete"],"Alt-Delete":wa["Mod-Delete"],"Alt-d":wa["Mod-Delete"],"Ctrl-a":ha,"Ctrl-e":pa};for(var xa in wa)ka[xa]=wa[xa];var Sa=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&"darwin"==os.platform())?ka:wa;function Oa(t){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(t)}function Ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ma(r.key),r)}}function Ma(t){var e=function(t,e){if("object"!=Oa(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Oa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Oa(e)?e:e+""}function Ea(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new An({view:function(e){return new Ta(e,t)}})}var Ta=function(){return t=function t(e,n){var r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(r=n.width)&&void 0!==r?r:1,this.color=!1===n.color?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var n=function(e){o[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))},(e=[{key:"destroy",value:function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))}},{key:"update",value:function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}},{key:"setCursor",value:function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){var r=e.nodeBefore,o=e.nodeAfter;if(r||o){var i=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0));if(i){var s=i.getBoundingClientRect(),a=r?s.bottom:s.top;r&&o&&(a=(a+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:s.left,right:s.right,top:a-this.width/2,bottom:a+this.width/2}}}}if(!t){var u=this.editorView.coordsAtPos(this.cursorPos);t={left:u.left-this.width/2,right:u.left+this.width/2,top:u.top,bottom:u.bottom}}var c,l,f=this.editorView.dom.offsetParent;if(this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!f||f==document.body&&"static"==getComputedStyle(f).position)c=-pageXOffset,l=-pageYOffset;else{var h=f.getBoundingClientRect();c=h.left-f.scrollLeft,l=h.top-f.scrollTop}this.element.style.left=t.left-c+"px",this.element.style.top=t.top-l+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}},{key:"scheduleRemoval",value:function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)}},{key:"dragover",value:function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,e,t):r;if(e&&!o){var i=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){var s=Le(this.editorView.state.doc,i,this.editorView.dragging.slice);null!=s&&(i=s)}this.setCursor(i),this.scheduleRemoval(5e3)}}}},{key:"dragend",value:function(){this.scheduleRemoval(20)}},{key:"drop",value:function(){this.scheduleRemoval(20)}},{key:"dragleave",value:function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}])&&Ca(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Na(t){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Na(t)}function Aa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Da(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pa(r.key),r)}}function Ra(t,e,n){return e&&Da(t.prototype,e),n&&Da(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pa(t){var e=function(t,e){if("object"!=Na(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Na(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Na(e)?e:e+""}function Ia(t,e,n){return e=za(e),function(t,e){if(e&&("object"==Na(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ja()?Reflect.construct(e,n||[],za(t).constructor):e.apply(t,n))}function ja(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ja=function(){return!!t})()}function za(t){return za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},za(t)}function La(t,e){return La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},La(t,e)}var Ba=function(t){function e(t){return Aa(this,e),Ia(this,e,[t,t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&La(t,e)}(e,t),Ra(e,[{key:"map",value:function(t,n){var r=t.resolve(n.map(this.head));return e.valid(r)?new e(r):fn.near(r)}},{key:"content",value:function(){return et.empty}},{key:"eq",value:function(t){return t instanceof e&&t.head==this.head}},{key:"toJSON",value:function(){return{type:"gapcursor",pos:this.head}}},{key:"getBookmark",value:function(){return new Fa(this.anchor)}}],[{key:"fromJSON",value:function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))}},{key:"valid",value:function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e),r=t.node(e);if(0!=n)for(var o=r.child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}},{key:"findGapCursorFrom",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t:for(;;){if(!r&&e.valid(t))return t;for(var o=t.pos,i=null,s=t.depth;;s--){var a=t.node(s);if(n>0?t.indexAfter(s)<a.childCount:t.index(s)>0){i=a.child(n>0?t.indexAfter(s):t.index(s)-1);break}if(0==s)return null;o+=n;var u=t.doc.resolve(o);if(e.valid(u))return u}for(;;){var c=n>0?i.firstChild:i.lastChild;if(!c){if(i.isAtom&&!i.isText&&!yn.isSelectable(i)){t=t.doc.resolve(o+i.nodeSize*n),r=!1;continue t}break}i=c,o+=n;var l=t.doc.resolve(o);if(e.valid(l))return l}return null}}}])}(fn);Ba.prototype.visible=!1,Ba.findFrom=Ba.findGapCursorFrom,fn.jsonID("gapcursor",Ba);var Fa=function(){function t(e){Aa(this,t),this.pos=e}return Ra(t,[{key:"map",value:function(e){return new t(e.map(this.pos))}},{key:"resolve",value:function(t){var e=t.resolve(this.pos);return Ba.valid(e)?new Ba(e):fn.near(e)}}])}(),Va=Ts({ArrowLeft:qa("horiz",-1),ArrowRight:qa("horiz",1),ArrowUp:qa("vert",-1),ArrowDown:qa("vert",1)});function qa(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,o){var i=t.selection,s=e>0?i.$to:i.$from,a=i.empty;if(i instanceof vn){if(!o.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}var u=Ba.findGapCursorFrom(s,e,a);return!!u&&(r&&r(t.tr.setSelection(new Ba(u))),!0)}}function _a(t,e,n){if(!t||!t.editable)return!1;var r=t.state.doc.resolve(e);if(!Ba.valid(r))return!1;var o=t.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&yn.isSelectable(t.state.doc.nodeAt(o.inside))||(t.dispatch(t.state.tr.setSelection(new Ba(r))),0))}function $a(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof Ba))return!1;var n=t.state.selection.$from,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;for(var o=G.empty,i=r.length-1;i>=0;i--)o=G.from(r[i].createAndFill(null,o));var s=t.state.tr.replace(n.pos,n.pos,new et(o,0,0));return s.setSelection(vn.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function Ua(t){if(!(t.selection instanceof Ba))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ti.create(t.doc,[Ci.widget(t.selection.head,e,{key:"gapcursor"})])}function Ja(t){return Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ja(t)}function Wa(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==Ja(n)&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var o=n[r];"string"==typeof o?t.setAttribute(r,o):null!=o&&(t[r]=o)}e++}for(;e<arguments.length;e++)Ha(t,arguments[e]);return t}function Ha(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)Ha(t,e[n])}}function Ka(t){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function Ga(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ya(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qa(r.key),r)}}function Xa(t,e,n){return e&&Ya(t.prototype,e),n&&Ya(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qa(t){var e=function(t,e){if("object"!=Ka(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ka(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ka(e)?e:e+""}function Za(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tu="http://www.w3.org/2000/svg",eu="ProseMirror-icon";function nu(t,e){var n=(9==t.nodeType?t:t.ownerDocument)||document,r=n.createElement("div");if(r.className=eu,e.path){var o=e.path,i=e.width,s=e.height,a="pm-icon-"+function(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e}(o).toString(16);n.getElementById(a)||function(t,e,n){var r,o,i=9==t.nodeType?[t,t.body]:[t.ownerDocument||document,t],s=(o=2,function(t){if(Array.isArray(t))return t}(r=i)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,s,a=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(r,o)||function(t,e){if(t){if("string"==typeof t)return Za(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Za(t,e):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=s[0],u=s[1],c=a.getElementById(eu+"-collection");c||((c=a.createElementNS(tu,"svg")).id=eu+"-collection",c.style.display="none",u.insertBefore(c,u.firstChild));var l=a.createElementNS(tu,"symbol");l.id=e,l.setAttribute("viewBox","0 0 "+n.width+" "+n.height),l.appendChild(a.createElementNS(tu,"path")).setAttribute("d",n.path),c.appendChild(l)}(t,a,e);var u=r.appendChild(n.createElementNS(tu,"svg"));u.style.width=i/s+"em",u.appendChild(n.createElementNS(tu,"use")).setAttributeNS("http://www.w3.org/1999/xlink","href",/([^#]*)/.exec(n.location.toString())[1]+"#"+a)}else if(e.dom)r.appendChild(e.dom.cloneNode(!0));else{var c=e.text,l=e.css;r.appendChild(n.createElement("span")).textContent=c||"",l&&(r.firstChild.style.cssText=l)}return r}var ru="ProseMirror-menu",ou=function(){return Xa((function t(e){Ga(this,t),this.spec=e}),[{key:"render",value:function(t){var e=this.spec,n=e.render?e.render(t):e.icon?nu(t.root,e.icon):e.label?Wa("div",null,iu(t,e.label)):null;if(!n)throw new RangeError("MenuItem without icon or label property");if(e.title){var r="function"==typeof e.title?e.title(t.state):e.title;n.setAttribute("title",iu(t,r))}return e.class&&n.classList.add(e.class),e.css&&(n.style.cssText+=e.css),n.addEventListener("mousedown",(function(r){r.preventDefault(),n.classList.contains(ru+"-disabled")||e.run(t.state,t.dispatch,t,r)})),{dom:n,update:function(t){if(e.select){var r=e.select(t);if(n.style.display=r?"":"none",!r)return!1}var o=!0;if(e.enable&&(o=e.enable(t)||!1,bu(n,ru+"-disabled",!o)),e.active){var i=o&&e.active(t)||!1;bu(n,ru+"-active",i)}return!0}}}}])}();function iu(t,e){return t._props.translate?t._props.translate(e):e}var su={time:0,node:null};function au(t){su.time=Date.now(),su.node=t.target}function uu(t){return Date.now()-100<su.time&&su.node&&t.contains(su.node)}var cu=function(){return Xa((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ga(this,t),this.options=n,this.options=n||{},this.content=Array.isArray(e)?e:[e]}),[{key:"render",value:function(t){var e=this,n=lu(this.content,t),r=t.dom.ownerDocument.defaultView||window,o=Wa("div",{class:ru+"-dropdown "+(this.options.class||""),style:this.options.css},iu(t,this.options.label||""));this.options.title&&o.setAttribute("title",iu(t,this.options.title));var i=Wa("div",{class:ru+"-dropdown-wrap"},o),s=null,a=null,u=function(){s&&s.close()&&(s=null,r.removeEventListener("mousedown",a))};return o.addEventListener("mousedown",(function(t){t.preventDefault(),au(t),s?u():(s=e.expand(i,n.dom),r.addEventListener("mousedown",a=function(){uu(i)||u()}))})),{dom:i,update:function(t){var e=n.update(t);return i.style.display=e?"":"none",e}}}},{key:"expand",value:function(t,e){var n=Wa("div",{class:ru+"-dropdown-menu "+(this.options.class||"")},e),r=!1;return t.appendChild(n),{close:function(){return!r&&(r=!0,t.removeChild(n),!0)},node:n}}}])}();function lu(t,e){for(var n=[],r=[],o=0;o<t.length;o++){var i=t[o].render(e),s=i.dom,a=i.update;n.push(Wa("div",{class:ru+"-dropdown-item"},s)),r.push(a)}return{dom:n,update:fu(r,n)}}function fu(t,e){return function(n){for(var r=!1,o=0;o<t.length;o++){var i=t[o](n);e[o].style.display=i?"":"none",i&&(r=!0)}return r}}var hu=function(){return Xa((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ga(this,t),this.options=n,this.content=Array.isArray(e)?e:[e]}),[{key:"render",value:function(t){var e=lu(this.content,t),n=t.dom.ownerDocument.defaultView||window,r=Wa("div",{class:ru+"-submenu-label"},iu(t,this.options.label||"")),o=Wa("div",{class:ru+"-submenu-wrap"},r,Wa("div",{class:ru+"-submenu"},e.dom)),i=null;return r.addEventListener("mousedown",(function(t){t.preventDefault(),au(t),bu(o,ru+"-submenu-wrap-active",!1),i||n.addEventListener("mousedown",i=function(){uu(o)||(o.classList.remove(ru+"-submenu-wrap-active"),n.removeEventListener("mousedown",i),i=null)})})),{dom:o,update:function(t){var n=e.update(t);return o.style.display=n?"":"none",n}}}}])}(),pu={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"⬚",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},du=new ou({title:"Join with above block",run:oa,select:function(t){return oa(t)},icon:pu.join}),vu=new ou({title:"Lift out of enclosing block",run:sa,select:function(t){return sa(t)},icon:pu.lift}),mu=(new ou({title:"Select parent node",run:ca,select:function(t){return ca(t)},icon:pu.selectParentNode}),new ou({title:"Undo last change",run:Qs,enable:function(t){return Qs(t)},icon:pu.undo})),yu=new ou({title:"Redo last undone change",run:Zs,enable:function(t){return Zs(t)},icon:pu.redo});function gu(t,e){var n=va(t,e.attrs),r={run:n,enable:function(t){return n(t)},active:function(n){var r=n.selection,o=r.$from,i=r.to,s=r.node;return s?s.hasMarkup(t,e.attrs):i<=o.end()&&o.parent.hasMarkup(t,e.attrs)}};for(var o in e)r[o]=e[o];return new ou(r)}function bu(t,e,n){n?t.classList.add(e):t.classList.remove(e)}var wu="ProseMirror-menubar";function ku(t){return new An({view:function(e){return new xu(e,t)}})}var xu=function(){return Xa((function t(e,n){var r=this;Ga(this,t),this.editorView=e,this.options=n,this.spacer=null,this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1,this.scrollHandler=null,this.wrapper=Wa("div",{class:wu+"-wrapper"}),this.menu=this.wrapper.appendChild(Wa("div",{class:wu})),this.menu.className=wu,e.dom.parentNode&&e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom);var o=function(t,e){for(var n=document.createDocumentFragment(),r=[],o=[],i=0;i<e.length;i++){for(var s=e[i],a=[],u=[],c=0;c<s.length;c++){var l=s[c].render(t),f=l.dom,h=l.update,p=Wa("span",{class:ru+"item"},f);n.appendChild(p),u.push(p),a.push(h)}a.length&&(r.push(fu(a,u)),i<e.length-1&&o.push(n.appendChild(Wa("span",{class:ru+"separator"}))))}return{dom:n,update:function(t){for(var e=!1,n=!1,i=0;i<r.length;i++){var s=r[i](t);i&&(o[i-1].style.display=n&&s?"":"none"),n=s,s&&(e=!0)}return e}}}(this.editorView,this.options.content),i=o.dom,s=o.update;if(this.contentUpdate=s,this.menu.appendChild(i),this.update(),n.floating&&!function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent;return!/Edge\/\d/.test(t)&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t)}()){this.updateFloat();var a=function(t){for(var e=[t.ownerDocument.defaultView||window],n=t.parentNode;n;n=n.parentNode)e.push(n);return e}(this.wrapper);this.scrollHandler=function(t){var e=r.editorView.root;(e.body||e).contains(r.wrapper)?r.updateFloat(t.target.getBoundingClientRect?t.target:void 0):a.forEach((function(t){return t.removeEventListener("scroll",r.scrollHandler)}))},a.forEach((function(t){return t.addEventListener("scroll",r.scrollHandler)}))}}),[{key:"update",value:function(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))}},{key:"updateScrollCursor",value:function(){var t=this.editorView.root.getSelection();if(t.focusNode){var e=t.getRangeAt(0).getClientRects(),n=e[function(t){return t.anchorNode==t.focusNode?t.anchorOffset>t.focusOffset:t.anchorNode.compareDocumentPosition(t.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}(t)?0:e.length-1];if(n){var r=this.menu.getBoundingClientRect();if(n.top<r.bottom&&n.bottom>r.top){var o=function(t){for(var e=t.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}(this.wrapper);o&&(o.scrollTop-=r.bottom-n.top)}}}}},{key:"updateFloat",value:function(t){var e=this.wrapper,n=e.getBoundingClientRect(),r=t?Math.max(0,t.getBoundingClientRect().top):0;if(this.floating)if(n.top>=r||n.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var o=(e.offsetWidth-e.clientWidth)/2;this.menu.style.left=n.left+o+"px",this.menu.style.display=n.top>(this.editorView.dom.ownerDocument.defaultView||window).innerHeight?"none":"",t&&(this.menu.style.top=r+"px")}else if(n.top<r&&n.bottom>=this.menu.offsetHeight+10){this.floating=!0;var i=this.menu.getBoundingClientRect();this.menu.style.left=i.left+"px",this.menu.style.width=i.width+"px",t&&(this.menu.style.top=r+"px"),this.menu.style.position="fixed",this.spacer=Wa("div",{class:wu+"-spacer",style:"height: ".concat(i.height,"px")}),e.insertBefore(this.spacer,this.menu)}}},{key:"destroy",value:function(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)}}])}();n(5401),n(9505);var Su=n(2057),Ou=n.n(Su),Cu=n(7323),Mu=n.n(Cu),Eu=n(6803),Tu=n.n(Eu),Nu=n(1731),Au=n.n(Nu),Du=n(5386),Ru=n.n(Du),Pu=n(110),Iu=n.n(Pu),ju=n(805),zu=n.n(ju),Lu=n(1076),Bu=n.n(Lu);function Fu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=i.blockRange(s),u=!1,c=a;if(!a)return!1;if(a.depth>=2&&i.node(a.depth-1).type.compatibleContent(t)&&0==a.startIndex){if(0==i.index(a.depth-1))return!1;var l=n.doc.resolve(a.start-2);c=new yt(l,l,a.depth),a.endIndex<a.parent.childCount&&(a=new yt(i,n.doc.resolve(s.end(a.depth)),a.depth)),u=!0}var f=De(c,t,e,a);return!!f&&(r&&r(function(t,e,n,r,o){for(var i=G.empty,s=n.length-1;s>=0;s--)i=G.from(n[s].type.create(n[s].attrs,i));t.step(new Me(e.start-(r?2:0),e.end,e.start,e.end,new et(i,0,0),n.length,!0));for(var a=0,u=0;u<n.length;u++)n[u].type==o&&(a=u+1);for(var c=n.length-a,l=e.start+n.length-(r?2:0),f=e.parent,h=e.startIndex,p=e.endIndex,d=!0;h<p;h++,d=!1)!d&&Pe(t.doc,l,c)&&(t.split(l,c),l+=2*c),l+=f.child(h).nodeSize;return t}(n.tr,a,f,u,t).scrollIntoView()),!0)}}function Vu(t){return Vu="function"==typeof e()&&"symbol"==typeof i()?function(t){return typeof t}:function(t){return t&&"function"==typeof e()&&t.constructor===e()&&t!==e().prototype?"symbol":typeof t},Vu(t)}function qu(t,e){var n=Au()(t);if(Ru()){var r=Ru()(t);e&&(r=Ou()(r).call(r,(function(e){return Iu()(t,e).enumerable}))),n.push.apply(n,r)}return n}function _u(t){for(var e=1;e<arguments.length;e++){var n,r,o=null!=arguments[e]?arguments[e]:{};e%2?E()(n=qu(Object(o),!0)).call(n,(function(e){$u(t,e,o[e])})):zu()?Bu()(t,zu()(o)):E()(r=qu(Object(o))).call(r,(function(e){k()(t,e,Iu()(o,e))}))}return t}function $u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Vu(t)||!t)return t;var n=t[Tu()];if(void 0!==n){var r=n.call(t,"string");if("object"!=Vu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vu(e)?e:e+""}(e))in t?k()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uu(){Uu=function(){return n};var t,n={},r=Object.prototype,o=r.hasOwnProperty,i=k()||function(t,e,n){t[e]=n.value},s="function"==typeof e()?e():{},a=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,e,n){return k()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof w?e:w,s=S()(o.prototype),a=new F(r||[]);return i(s,"_invoke",{value:j(t,n,a)}),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var d="suspendedStart",v="suspendedYield",m="executing",y="completed",g={};function w(){}function x(){}function O(){}var M={};l(M,a,(function(){return this}));var T=C(),A=T&&T(T(V([])));A&&A!==r&&o.call(A,a)&&(M=A);var R=O.prototype=w.prototype=S()(M);function P(t){var e;E()(e=["next","throw","return"]).call(e,(function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(r,i,s,a){var u=h(t[r],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Vu(l)&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}var r;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}})}function j(e,n,r){var o=d;return function(i,s){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var u=z(a,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var c=h(e,n,r);if("normal"===c.type){if(o=r.done?y:v,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=y,r.method="throw",r.arg=c.arg)}}}function z(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,z(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],E()(t).call(t,L,this),this.reset(!0)}function V(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Vu(e)+" is not iterable")}return x.prototype=O,i(R,"constructor",{value:O,configurable:!0}),i(O,"constructor",{value:x,configurable:!0}),x.displayName=l(O,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return N()?N()(t,O):(t.__proto__=O,l(t,c,"GeneratorFunction")),t.prototype=S()(R),t},n.awrap=function(t){return{__await:t}},P(I.prototype),l(I.prototype,u,(function(){return this})),n.AsyncIterator=I,n.async=function(t,e,r,o,i){void 0===i&&(i=b());var s=new I(f(t,e,r,o),i);return n.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},P(R),l(R,c,"Generator"),l(R,a,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return D()(n).call(n),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=V,F.prototype={constructor:F,reset:function(e){var n;if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,E()(n=this.tryEntries).call(n,B),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+p()(r).call(r,1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),B(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:V(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}function Ju(t,e,n,r,o,i,s){try{var a=t[i](s),u=a.value}catch(t){return void n(t)}a.done?e(u):b().resolve(u).then(r,o)}function Wu(t){return function(){var e=this,n=arguments;return new(b())((function(r,o){var i=t.apply(e,n);function s(t){Ju(i,r,o,s,a,"next",t)}function a(t){Ju(i,r,o,s,a,"throw",t)}s(void 0)}))}}function Hu(t,e){for(var n=t.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,e))return!0}return!1}function Ku(t,e){return new ou(_u({run:t},e))}function Gu(t,e){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?!!e.isInSet(t.storedMarks||o.marks()):t.doc.rangeHasMark(r,i,e)}function Yu(t,e){return Ku(ma(t),_u({active:function(e){return Gu(e,t)},enable:function(t){return!0}},e))}function Xu(t,e){return Ku(Fu(t,e.attrs),e)}function Qu(t){return Ou()(t).call(t,(function(t){return t}))}function Zu(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}function tc(t,e){var n,r={};if((n=t.marks.strong)&&(r.toggleStrong=Yu(n,{title:"Toggle strong style",icon:pu.strong})),(n=t.marks.em)&&(r.toggleEm=Yu(n,{title:"Toggle emphasis",icon:pu.em})),(n=t.marks.color)&&(r.setColor=Ku(function(){var n=Wu(Uu().mark((function n(r,o,i){var s,a;return Uu().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=t.marks.color,!Gu(r,s)){n.next=4;break}return ma(s)(r,o),n.abrupt("return");case 4:return n.next=6,b().resolve(e.pickColor());case 6:null!=(a=n.sent)&&(ma(s,{value:a})(r,o),i.focus());case 8:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}(),{title:"Color",icon:{dom:Zu('<svg style="transform: scale(1.3);" viewBox="0 0 24 24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"></path><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"></path></g></svg>')}})),(n=t.marks.bgColor)&&(r.setBgColor=Ku(function(){var n=Wu(Uu().mark((function n(r,o,i){var s,a;return Uu().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=t.marks.bgColor,!Gu(r,s)){n.next=4;break}return ma(s)(r,o),n.abrupt("return");case 4:return n.next=6,b().resolve(e.pickColor());case 6:null!=(a=n.sent)&&(ma(s,{value:a})(r,o),i.focus());case 8:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}(),{title:"Background color",icon:{dom:Zu('<svg style="transform: scale(1.3);" viewBox="0 0 24 24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"></path><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"></path></g></svg>')}})),(n=t.marks.code)&&(r.toggleCode=Yu(n,{title:"Toggle code font",icon:pu.code})),(n=t.marks.link)&&(r.toggleLink=function(t,e){return new ou({title:"Add or remove link",icon:pu.link,active:function(e){return Gu(e,t)},enable:function(t){return!t.selection.empty},run:function(n,r,o){return Wu(Uu().mark((function i(){var s;return Uu().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!Gu(n,t)){i.next=3;break}return ma(t)(n,r),i.abrupt("return",!0);case 3:return i.next=5,b().resolve(e.getLink());case 5:null!=(s=i.sent)&&(ma(t,s)(o.state,o.dispatch),o.focus());case 7:case"end":return i.stop()}}),i)})))()}})}(n,e)),(n=t.nodes.image)&&(r.insertImage=function(t,e){return new ou({title:"Insert image",label:"Image",enable:function(e){return Hu(e,t)},run:function(n,r,o){return Wu(Uu().mark((function n(){var r,i,s,a;return Uu().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b().resolve(e.getResource());case 2:if(null==(r=n.sent)){n.next=19;break}if(ss.File!=r.imageType){n.next=10;break}i=us().createObjectURL(r.file),a=r.file,ps[i]=a,n.next=18;break;case 10:if(ss.Resource!=r.imageType){n.next=17;break}return n.next=13,b().resolve(e.packageResourceUrl(r.resourceKey));case 13:i=n.sent,s=r.resourceKey,n.next=18;break;case 17:ss.Url==r.imageType&&(i=r.url);case 18:null!=i&&(o.dispatch(o.state.tr.replaceSelectionWith(t.createAndFill({imageType:r.imageType,src:i,resourceKey:s,file:a}))),o.focus());case 19:case"end":return n.stop()}}),n)})))()}})}(n,e)),(n=t.nodes.bullet_list)&&(r.wrapBulletList=Xu(n,{title:"Wrap in bullet list",icon:pu.bulletList})),(n=t.nodes.ordered_list)&&(r.wrapOrderedList=Xu(n,{title:"Wrap in ordered list",icon:pu.orderedList})),(n=t.nodes.blockquote)&&(r.wrapBlockQuote=function(t,e){var n={run:function(n,r){return da(t,e.attrs)(n,r)},select:function(n){return da(t,e.attrs)(n)}};for(var r in e)n[r]=e[r];return new ou(n)}(n,{title:"Wrap in block quote",icon:pu.blockquote})),(n=t.nodes.paragraph)&&(r.makeParagraph=gu(n,{title:"Change to paragraph",label:"Plain"})),(n=t.nodes.code_block)&&(r.makeCodeBlock=gu(n,{title:"Change to code block",label:"Code"})),n=t.nodes.heading)for(var o=1;o<=10;o++)r["makeHead"+o]=gu(n,{title:"Change to heading "+o,label:"Level "+o,attrs:{level:o}});if(n=t.nodes.horizontalRule){var i=n;r.insertHorizontalRule=new ou({title:"Insert horizontal rule",label:"Horizontal rule",enable:function(t){return Hu(t,i)},run:function(t,e){e(t.tr.replaceSelectionWith(i.create()))}})}r.insertMenu=new cu(Qu([r.insertImage,r.insertHorizontalRule]),{label:"Insert"}),r.typeMenu=new cu(Qu([r.makeParagraph,r.makeCodeBlock,r.makeHead1&&new hu(Qu([r.makeHead1,r.makeHead2,r.makeHead3,r.makeHead4,r.makeHead5,r.makeHead6]),{label:"Heading"})]),{label:"Type..."});var s=[Qu([r.toggleStrong,r.toggleEm,r.setColor,r.setBgColor,r.toggleCode,r.toggleLink])],a=[Qu([r.wrapBulletList,r.wrapOrderedList,r.wrapBlockQuote,du,vu])];return Mu()(s).call(s,[[r.insertMenu,r.typeMenu]],[[mu,yu]],a)}function ec(t){return ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(t)}function nc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oc(r.key),r)}}function rc(t,e,n){return e&&nc(t.prototype,e),n&&nc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oc(t){var e=function(t,e){if("object"!=ec(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ec(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ec(e)?e:e+""}var ic=rc((function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.match=e,this.match=e,this.handler="string"==typeof n?(r=n,function(t,e,n,o){var i=r;if(e[1]){var s=e[0].lastIndexOf(e[1]);i+=e[0].slice(s+e[1].length);var a=(n+=s)-o;a>0&&(i=e[0].slice(s-a,s)+i,n=o)}return t.tr.insertText(i,n,o)}):n,this.undoable=!1!==o.undoable,this.inCode=o.inCode||!1})),sc=500;function ac(t,e,n,r,o,i){if(t.composing)return!1;for(var s=t.state,a=s.doc.resolve(e),u=a.parent.textBetween(Math.max(0,a.parentOffset-sc),a.parentOffset,null,"￼")+r,c=0;c<o.length;c++){var l=o[c];if(a.parent.type.spec.code){if(!l.inCode)continue}else if("only"===l.inCode)continue;var f=l.match.exec(u),h=f&&l.handler(s,f,e-(f[0].length-r.length),n);if(h)return l.undoable&&h.setMeta(i,{transform:h,from:e,to:n,text:r}),t.dispatch(h),!0}return!1}var uc=function(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){for(var s=t.tr,a=i.transform,u=a.steps.length-1;u>=0;u--)s.step(a.steps[u].invert(a.docs[u]));if(i.text){var c=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,c))}else s.delete(i.from,i.to);e(s)}return!0}}return!1},cc=new ic(/--$/,"—"),lc=new ic(/\.\.\.$/,"…"),fc=[new ic(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new ic(/"$/,"”"),new ic(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new ic(/'$/,"’")];function hc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new ic(t,(function(t,o,i,s){var a=n instanceof Function?n(o):n,u=t.tr.delete(i,s),c=u.doc.resolve(i).blockRange(),l=c&&De(c,e,a);if(!l)return null;u.wrap(c,l);var f=u.doc.resolve(i-1).nodeBefore;return f&&f.type==e&&Ie(u.doc,i-1)&&(!r||r(o,f))&&u.join(i-1),u}))}function pc(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new ic(t,(function(t,r,o,i){var s=t.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(o,i).setBlockType(o,o,e,a):null}))}var dc="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function vc(t){var e,n,r={};function o(t,e){r[t]=e}if(o("Mod-z",Qs),o("Shift-Mod-z",Zs),o("Backspace",uc),dc||o("Mod-y",Zs),o("Alt-ArrowUp",oa),o("Alt-ArrowDown",ia),o("Mod-BracketLeft",sa),o("Escape",ca),(e=t.marks.strong)&&(o("Mod-b",ma(e)),o("Mod-B",ma(e))),(e=t.marks.em)&&(o("Mod-i",ma(e)),o("Mod-I",ma(e))),(e=t.marks.code)&&o("Mod-`",ma(e)),(e=t.nodes.bullet_list)&&o("Shift-Ctrl-8",Fu(e)),(e=t.nodes.ordered_list)&&o("Shift-Ctrl-9",Fu(e)),(e=t.nodes.blockquote)&&o("Ctrl->",da(e)),e=t.nodes.hardBreak){var i=e,s=ya(ua,(function(t,e){return e&&e(t.tr.replaceSelectionWith(i.create()).scrollIntoView()),!0}));o("Mod-Enter",s),o("Shift-Enter",s),dc&&o("Ctrl-Enter",s)}if((e=t.nodes.list_item)&&(o("Enter",function(t,e){return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=o.node;if(a&&a.isBlock||i.depth<2||!i.sameParent(s))return!1;var u=i.node(-1);if(u.type!=t)return!1;if(0==i.parent.content.size&&i.node(-1).childCount==i.indexAfter(-1)){if(3==i.depth||i.node(-3).type!=t||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){for(var c=G.empty,l=i.index(-1)?1:i.index(-2)?2:3,f=i.depth-l;f>=i.depth-3;f--)c=G.from(i.node(f).copy(c));var h=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;c=c.append(G.from(t.createAndFill()));var p=i.before(i.depth-(l-1)),d=n.tr.replace(p,i.after(-h),new et(c,4-l,0)),v=-1;d.doc.nodesBetween(p,d.doc.content.size,(function(t,e){if(v>-1)return!1;t.isTextblock&&0==t.content.size&&(v=e+1)})),v>-1&&d.setSelection(fn.near(d.doc.resolve(v))),r(d.scrollIntoView())}return!0}var m=s.pos==i.end()?u.contentMatchAt(0).defaultType:null,y=n.tr.delete(i.pos,s.pos),g=m?[e?{type:t,attrs:e}:null,{type:m}]:void 0;return!!Pe(y.doc,i.pos,2,g)&&(r&&r(y.split(i.pos,2,g).scrollIntoView()),!0)}}(e)),o("Mod-[",function(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=o.blockRange(i,(function(e){return e.childCount>0&&e.firstChild.type==t}));return!!s&&(!n||(o.node(s.depth-1).type==t?function(t,e,n,r){var o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Me(i-1,s,i,s,new et(G.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new yt(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));var a=Ae(r);if(null==a)return!1;o.lift(r,a);var u=o.mapping.map(i,-1)-1;return Ie(o.doc,u)&&o.join(u),e(o.scrollIntoView()),!0}(e,n,t,s):function(t,e,n){for(var r=t.tr,o=n.parent,i=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)i-=o.child(s).nodeSize,r.delete(i-1,i+1);var u=r.doc.resolve(n.start),c=u.nodeAfter;if(r.mapping.map(n.end)!=n.start+u.nodeAfter.nodeSize)return!1;var l=0==n.startIndex,f=n.endIndex==o.childCount,h=u.node(-1),p=u.index(-1);if(!h.canReplace(p+(l?0:1),p+1,c.content.append(f?G.empty:G.from(o))))return!1;var d=u.pos,v=d+c.nodeSize;return r.step(new Me(d-(l?1:0),v+(f?1:0),d+1,v-1,new et((l?G.empty:G.from(o.copy(G.empty))).append(f?G.empty:G.from(o.copy(G.empty))),l?0:1,f?0:1),l?0:1)),e(r.scrollIntoView()),!0}(e,n,s)))}}(e)),o("Mod-]",(n=e,function(t,e){var r=t.selection,o=r.$from,i=r.$to,s=o.blockRange(i,(function(t){return t.childCount>0&&t.firstChild.type==n}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var u=s.parent,c=u.child(a-1);if(c.type!=n)return!1;if(e){var l=c.lastChild&&c.lastChild.type==u.type,f=G.from(l?n.create():null),h=new et(G.from(n.create(null,G.from(u.type.create(null,f)))),l?3:1,0),p=s.start,d=s.end;e(t.tr.step(new Me(p-(l?3:1),d,p,d,h,1,!0)).scrollIntoView())}return!0}))),(e=t.nodes.paragraph)&&o("Shift-Ctrl-0",va(e)),(e=t.nodes.code_block)&&o("Shift-Ctrl-\\",va(e)),e=t.nodes.heading)for(var a=1;a<=6;a++)o("Shift-Ctrl-"+a,va(e,{level:a}));if(e=t.nodes.horizontalRule){var u=e;o("Mod-_",(function(t,e){return e&&e(t.tr.replaceSelectionWith(u.create()).scrollIntoView()),!0}))}return r}function mc(t){var e,n=Mu()(fc).call(fc,lc,cc);return(e=t.nodes.blockquote)&&n.push(hc(/^\s*>\s$/,e)),(e=t.nodes.ordered_list)&&n.push(hc(/^(\d+)\.\s$/,e,(function(t){return{order:+t[1]}}),(function(t,e){return e.childCount+e.attrs.order==+t[1]}))),(e=t.nodes.bullet_list)&&n.push(function(t){return hc(/^\s*([-+*])\s$/,t)}(e)),(e=t.nodes.code_block)&&n.push(function(t){return pc(/^```$/,t)}(e)),(e=t.nodes.heading)&&n.push(function(t,e){return pc(new RegExp("^(#{1,6})\\s$"),t,(function(t){return{level:t[1].length}}))}(e)),function(t){var e=t.rules,n=new An({state:{init:function(){return null},apply:function(t,e){return t.getMeta(this)||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,o,i){return ac(t,r,o,i,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection.$cursor;r&&ac(t,r.pos,r.pos,"",e,n)}))}}},isInputRules:!0});return n}({rules:n})}function yc(){yc=function(){return n};var t,n={},r=Object.prototype,o=r.hasOwnProperty,i=k()||function(t,e,n){t[e]=n.value},s="function"==typeof e()?e():{},a=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,e,n){return k()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var o=e&&e.prototype instanceof w?e:w,s=S()(o.prototype),a=new F(r||[]);return i(s,"_invoke",{value:j(t,n,a)}),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var d="suspendedStart",v="suspendedYield",m="executing",y="completed",g={};function w(){}function x(){}function O(){}var M={};l(M,a,(function(){return this}));var T=C(),A=T&&T(T(V([])));A&&A!==r&&o.call(A,a)&&(M=A);var R=O.prototype=w.prototype=S()(M);function P(t){var e;E()(e=["next","throw","return"]).call(e,(function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(r,i,s,a){var u=h(t[r],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==kc(l)&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}var r;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}})}function j(e,n,r){var o=d;return function(i,s){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var u=z(a,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var c=h(e,n,r);if("normal"===c.type){if(o=r.done?y:v,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=y,r.method="throw",r.arg=c.arg)}}}function z(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,z(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],E()(t).call(t,L,this),this.reset(!0)}function V(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(kc(e)+" is not iterable")}return x.prototype=O,i(R,"constructor",{value:O,configurable:!0}),i(O,"constructor",{value:x,configurable:!0}),x.displayName=l(O,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return N()?N()(t,O):(t.__proto__=O,l(t,c,"GeneratorFunction")),t.prototype=S()(R),t},n.awrap=function(t){return{__await:t}},P(I.prototype),l(I.prototype,u,(function(){return this})),n.AsyncIterator=I,n.async=function(t,e,r,o,i){void 0===i&&(i=b());var s=new I(f(t,e,r,o),i);return n.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},P(R),l(R,c,"Generator"),l(R,a,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return D()(n).call(n),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=V,F.prototype={constructor:F,reset:function(e){var n;if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,E()(n=this.tryEntries).call(n,B),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+p()(r).call(r,1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),B(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:V(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}function gc(t,e,n,r,o,i,s){try{var a=t[i](s),u=a.value}catch(t){return void n(t)}a.done?e(u):b().resolve(u).then(r,o)}function bc(t,n){var r=void 0!==e()&&v()(t)||t["@@iterator"];if(!r){if(y()(t)||(r=function(t,e){if(t){var n;if("string"==typeof t)return wc(t,e);var r=p()(n={}.toString.call(t)).call(n,8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?c()(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wc(t,e):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw s}}}}function wc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function kc(t){return kc="function"==typeof e()&&"symbol"==typeof i()?function(t){return typeof t}:function(t){return t&&"function"==typeof e()&&t.constructor===e()&&t!==e().prototype?"symbol":typeof t},kc(t)}n(3041);var xc=function(t,e){var n,r=ys(t.packageResourceUrl);return Tn.create({schema:r,plugins:(n={schema:r,config:t},[mc(n.schema),Es(vc(n.schema)),Es(Sa),Ea(),new An({props:{decorations:Ua,createSelectionBetween:function(t,e,n){return e.pos==n.pos&&Ba.valid(n)?new Ba(n):null},handleClick:_a,handleKeyDown:Va,handleDOMEvents:{beforeinput:$a}}}),ku({floating:!0,content:tc(n.schema,n.config)}),Ys(),new An({props:{attributes:{class:"ProseMirror-example-setup-style"}}})]),doc:e?bt.fromJSON(r,e):void 0})};function Sc(){return{type:"doc",content:[{type:"paragraph",content:[]}]}}function Oc(t){if(!t||"doc"!=t.type||!t.content||!t.content.length)return!0;if(1<t.content.length)return!1;var e=t.content[0];if(!e||!e.content||!e.content.length)return!0;if(1<e.content.length)return!1;var n=e.content[0];return"text"==n.type&&!n.text}function Cc(t,e){var n=kc(t);if(t instanceof Array){var r,o=bc(t);try{for(o.s();!(r=o.n()).done;)Cc(r.value,e)}catch(t){o.e(t)}finally{o.f()}}else if("object"===n&&t&&t.type){var i=t.attrs,s=t.content;if(i&&ss.File==i.imageType){var a=i.file,u=e.get(a);u||(u=[],e.set(a,u)),u.push((function(t){i.imageType=ss.Resource,i.resourceKey=t,delete i.file,delete i.src}))}else Cc(s,e)}}function Mc(t,e){return Ec.apply(this,arguments)}function Ec(){var t;return t=yc().mark((function t(e,n){var r,o,i,s,u,l,h,p,d;return yc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new(a()),Cc(n,r),!r.size){t.next=8;break}return o=c()(f()(r).call(r)),t.next=6,e(o);case 6:for(i=t.sent,s=0;s<o.length;s++)if(u=i[s],l=o[s],h=r.get(l)){p=bc(h);try{for(p.s();!(d=p.n()).done;)(0,d.value)(u)}catch(t){p.e(t)}finally{p.f()}}case 8:case"end":return t.stop()}}),t)})),Ec=function(){var e=this,n=arguments;return new(b())((function(r,o){var i=t.apply(e,n);function s(t){gc(i,r,o,s,a,"next",t)}function a(t){gc(i,r,o,s,a,"throw",t)}s(void 0)}))},Ec.apply(this,arguments)}function Tc(t,e){var n=ys(e);return Xt.fromSchema(n).serializeFragment(bt.fromJSON(n,t).content)}function Nc(t,e,n){var r=new Zi(t,{state:xc(e,n),dispatchTransaction:function(t){var n=r.state.apply(t);r.updateState(n),e.change&&e.change(n.doc.toJSON())},plugins:[new An({key:new Pn("focus"),props:{handleDOMEvents:{focus:function(t){return e.focus&&e.focus(t),!0},blur:function(t){return e.blur&&e.blur(t),!0}}}})]});return r}function Ac(t,e,n){t.updateState(xc(e,n))}function Dc(t){t.destroy()}}(),r}()}));
//# sourceMappingURL=rich-text.js.map